diff -u -aruN unison.orig/unison-2.10.2/Makefile.OCaml unison/unison-2.10.2/Makefile.OCaml
--- unison.orig/unison-2.10.2/Makefile.OCaml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/Makefile.OCaml	2005-08-29 20:28:48.000000000 -0700
@@ -25,7 +25,7 @@
 
 ifeq (${OSCOMP},cygwingnuc) # Define this if compiling with Cygwin GNU C
   OSARCH=win32gnuc
-  ETAGS=c:/emacs/bin/etags
+  ETAGS=/bin/etags
   buildexecutable:: win32rc/unison.res.lib   
 else
 # Win32 system
@@ -60,7 +60,7 @@
 # to Unix '/' separators, and extraneous control-M's are deleted.
 # Unfortunately there is a literal control-M buried in this, I'd rather
 # get rid of it...
-OCAMLLIBDIR=$(shell ocamlc -v | tail -1 | sed -e 's/.* //g' | sed -e 's/\\/\//g' | sed -e 's///g')
+OCAMLLIBDIR=$(shell ocamlc -v | tail -n -1 | sed -e 's/.* //g' | sed -e 's/\\/\//g' | sed -e 's///g')
 
 # User interface style: 
 #   Legal values are
@@ -295,18 +295,35 @@
 #-cclib user32.lib -cclib advapi32.lib -cclib wsock32.lib \
 #               -cclib gdi32.lib -cclib imm32.lib -cclib shell32.lib \
 #               -cclib ole32.lib -cclib uuid.lib
-      CLIBS+=-cclib -llablgtk \
+      ifeq ($(OSCOMP), cygwingnuc)
+        # Cygwin
+        CLIBS+=-cclib -llablgtk \
+           -cclib /usr/lib/libglib.dll.a \
+           -cclib /usr/lib/libgmodule.dll.a \
+           -cclib /usr/lib/libgdk.dll.a \
+           -cclib /usr/lib/libgtk.dll.a \
+           $(WINSYSLIBS)
+        STATICLIBS+=-cclib -llablgtk \
+                -cclib /usr/lib/libglib.a \
+                -cclib /usr/lib/libgmodule.a \
+                -cclib /usr/lib/libgdk.a \
+                -cclib /usr/lib/libgtk.a \
+                $(WINSYSLIBS)
+      else
+        # Win32 with GNU C, but not Cygwin
+        CLIBS+=-cclib -llablgtk \
            -cclib $(GUILIBDIR)/glib-1.3.lib \
            -cclib $(GUILIBDIR)/gmodule-1.3.lib \
            -cclib $(GUILIBDIR)/gdk-1.3.lib \
            -cclib $(GUILIBDIR)/gtk-1.3.lib \
            $(WINSYSLIBS)
-      STATICLIBS+=-cclib -llablgtk \
+        STATICLIBS+=-cclib -llablgtk \
                 -cclib $(GUILIBDIR)/cclibs/glib-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gmodule-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gdk-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gtk-1.3.lib \
                 $(WINSYSLIBS)
+     endif # cygwingnuc
     else
       ifeq ($(OSARCH), solaris)
         STATICLIBS+=-cclib -llablgtk \
@@ -351,18 +368,35 @@
 #-cclib user32.lib -cclib advapi32.lib -cclib wsock32.lib \
 #               -cclib gdi32.lib -cclib imm32.lib -cclib shell32.lib \
 #               -cclib ole32.lib -cclib uuid.lib
-      CLIBS+=-cclib -llablgtk2 \
+      ifeq ($(OSCOMP), cygwingnuc)
+        # Cygwin
+        CLIBS+=-cclib -llablgtk2 \
+           -cclib /usr/lib/libglib-2.0.dll.a \
+           -cclib /usr/lib/libglib-2.0.dll.a \
+           -cclib /usr/lib/libgdk-x11-2.0.dll.a \
+           -cclib /usr/lib/libgtk-x11-2.0.dll.a \
+            $(WINSYSLIBS)
+        STATICLIBS+=-cclib -llablgtk2 \
+                -cclib /usr/lib/libglib-2.0.dll.a \
+                -cclib /usr/lib/libglib-2.0.dll.a \
+                -cclib /usr/lib/libgdk-x11-2.0.dll.a \
+                -cclib /usr/lib/libgtk-x11-2.0.dll.a \
+                 $(WINSYSLIBS)
+      else
+        # Win32 with GNU C, but not Cygwin
+        CLIBS+=-cclib -llablgtk2 \
            -cclib $(GUILIBDIR)/glib-1.3.lib \
            -cclib $(GUILIBDIR)/gmodule-1.3.lib \
            -cclib $(GUILIBDIR)/gdk-1.3.lib \
            -cclib $(GUILIBDIR)/gtk-1.3.lib \
            $(WINSYSLIBS)
-      STATICLIBS+=-cclib -llablgtk2 \
+        STATICLIBS+=-cclib -llablgtk2 \
                 -cclib $(GUILIBDIR)/cclibs/glib-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gmodule-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gdk-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gtk-1.3.lib \
                 $(WINSYSLIBS)
+      endif # cygwingnuc
     else
       ifeq ($(OSARCH), solaris)
         STATICLIBS+=-cclib -llablgtk2 \
@@ -450,7 +484,7 @@
            >>dot.tmp
 	echo '{ rank = same; "Tree"; "Safelist"; }'>>dot.tmp
 	echo '{ rank = same; "Uarg"; "Prefs"; }'>>dot.tmp
-	ocamldot .depend | tail +2 >> dot.tmp
+	ocamldot .depend | tail -n +2 >> dot.tmp
 	-dot -Tps -o DEPENDENCIES.ps dot.tmp
 endif
 
diff -u -aruN unison.orig/unison-2.10.2/copy.ml unison/unison-2.10.2/copy.ml
--- unison.orig/unison-2.10.2/copy.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/copy.ml	2005-08-29 20:27:41.000000000 -0700
@@ -10,14 +10,16 @@
 
 let openFileIn fspath path kind =
   match kind with
-    `DATA   -> Unix.openfile (Fspath.concatToString fspath path)
-                 [Unix.O_RDONLY] 0o444
+    `DATA   -> Unix.descr_of_in_channel
+                 (open_in_gen [Open_rdonly; Open_binary]  0o444
+                    (Fspath.concatToString fspath path))
   | `RESS _ -> Osx.openRessIn fspath path
 
 let openFileOut fspath path kind =
   match kind with
-    `DATA     -> Unix.openfile (Fspath.concatToString fspath path)
-                   [Unix.O_WRONLY;Unix.O_CREAT;Unix.O_EXCL] 0o600
+    `DATA     -> Unix.descr_of_out_channel
+                   (open_out_gen [Open_wronly; Open_creat; Open_excl; Open_binary]
+                       0o600 (Fspath.concatToString fspath path))
   | `RESS len -> Osx.openRessOut fspath path len
 
 let protect f g =
@@ -260,10 +262,9 @@
     fspathTo pathTo realPathTo `DATA update srcFileSize id file_id
     >>= (fun (outfd, infd, bi) ->
   Lwt.catch (fun () ->
-    Lwt_util.run_in_region transmitFileReg (bufferSize srcFileSize) (fun () ->
-      Uutil.showProgress id Uutil.Filesize.zero "f";
-      compressRemotely connFrom
-        (bi, fspathFrom, pathFrom, `DATA, srcFileSize, id, file_id))
+    Uutil.showProgress id Uutil.Filesize.zero "f";
+    compressRemotely connFrom
+      (bi, fspathFrom, pathFrom, `DATA, srcFileSize, id, file_id)
             >>= (fun () ->
     decompressor :=
       Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
@@ -281,16 +282,15 @@
       (`RESS ressLength) update ressLength id file_id
         >>= (fun (outfd, infd, bi) ->
     Lwt.catch (fun () ->
-      Lwt_util.run_in_region transmitFileReg (bufferSize ressLength) (fun () ->
-        Uutil.showProgress id Uutil.Filesize.zero "f";
-        compressRemotely connFrom
-          (bi, fspathFrom, pathFrom,
-           `RESS ressLength, ressLength, id, file_id))
-              >>= (fun () ->
-        decompressor :=
-          Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
-        close_all infd outfd;
-        Lwt.return ()))
+      Uutil.showProgress id Uutil.Filesize.zero "f";
+      compressRemotely connFrom
+        (bi, fspathFrom, pathFrom,
+         `RESS ressLength, ressLength, id, file_id)
+            >>= (fun () ->
+      decompressor :=
+        Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
+      close_all infd outfd;
+      Lwt.return ()))
     (fun e ->
        decompressor :=
          Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
@@ -367,9 +367,13 @@
 let transmitFile
     rootFrom pathFrom rootTo fspathTo pathTo realPathTo
     update desc fp ress id =
-  transmitFileOnRoot rootTo rootFrom
-    (snd rootFrom, pathFrom, fspathTo, pathTo, realPathTo,
-     update, desc, fp, ress, id)
+  let bufSz = bufferSize (max (Props.length desc) (Osx.ressLength ress)) in
+  (* This must be on the client: any lock on the server side may result
+     in a deadlock under windows *)
+  Lwt_util.run_in_region transmitFileReg bufSz (fun () ->
+    transmitFileOnRoot rootTo rootFrom
+      (snd rootFrom, pathFrom, fspathTo, pathTo, realPathTo,
+       update, desc, fp, ress, id))
 
 (****)
 
diff -u -aruN unison.orig/unison-2.10.2/files.ml unison/unison-2.10.2/files.ml
--- unison.orig/unison-2.10.2/files.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/files.ml	2005-08-29 20:27:41.000000000 -0700
@@ -356,18 +356,20 @@
           debug (fun() -> Util.msg "Creating directory %s/%s\n"
             (root2string rootTo) (Path.toString pTo));
           mkdir rootTo workingDir pTo) >>= (fun initialDesc ->
-        let actions =
-          Update.NameMap.fold
-            (fun name child rem ->
-               copyRec (Path.child pFrom name)
-                       (Path.child pTo name)
-                       (Path.child realPTo name)
-                       child
-               :: rem)
-            children []
-        in
+        let runningThreads = ref [] in
         Lwt.catch
-          (fun () -> Lwt_util.join actions)
+          (fun () ->
+             Update.NameMap.iter
+               (fun name child ->
+                  let thread =
+                    copyRec (Path.child pFrom name)
+                            (Path.child pTo name)
+                            (Path.child realPTo name)
+                            child
+                  in
+                  runningThreads := thread :: !runningThreads)
+               children;
+             Lwt_util.join !runningThreads)
           (fun e ->
              (* If one thread fails (in a non-fatal way), we wait for
                 all other threads to terminate before continuing *)
@@ -381,7 +383,8 @@
                             match e with
                               Util.Transient _ -> Lwt.return ()
                             | _                -> Lwt.fail e))
-                   actions
+                   !runningThreads >>= (fun () ->
+                 Lwt.fail e (* DO NOT FORGET TO RERAISE THE EXCEPTION !!!*))
              | _ ->
                  Lwt.fail e) >>= (fun () ->
         Lwt_util.run_in_region copyReg 1 (fun () ->
@@ -469,8 +472,8 @@
            Lwt_unix.run
              (Update.translatePath root2 path2 >>= (fun path2 ->
               Copy.file root2 path2 root1 workingDir tmppath realPath
-                `Copy (Props.setLength Props.fileSafe (Props.length desc1))
-                 fp1 ress1 id));
+                `Copy (Props.setLength Props.fileSafe (Props.length desc2))
+                 fp2 ress2 id));
            displayDiff
 	     (Fspath.concat workingDir realPath)
              (Fspath.concat workingDir tmppath);
@@ -487,8 +490,8 @@
              (Update.translatePath root1 path1 >>= (fun path1 ->
               (* Note that we don't need the ressource fork *)
               Copy.file root1 path1 root2 workingDir tmppath realPath
-                `Copy (Props.setLength Props.fileSafe (Props.length desc2))
-                 fp2 ress2 id));
+                `Copy (Props.setLength Props.fileSafe (Props.length desc1))
+                 fp1 ress1 id));
            displayDiff
              (Fspath.concat workingDir tmppath)
 	     (Fspath.concat workingDir realPath);
diff -u -aruN unison.orig/unison-2.10.2/fingerprint.ml unison/unison-2.10.2/fingerprint.ml
--- unison.orig/unison-2.10.2/fingerprint.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/fingerprint.ml	2005-08-29 20:27:41.000000000 -0700
@@ -22,7 +22,7 @@
   Util.convertUnixErrorsToTransient
     "digesting subfile"
     (fun () ->
-       let inch = open_in path in
+       let inch = open_in_bin path in
        LargeFile.seek_in inch offset;
        begin try
          let res = Digest.channel inch (Uutil.Filesize.toInt len) in
diff -u -aruN unison.orig/unison-2.10.2/os.ml unison/unison-2.10.2/os.ml
--- unison.orig/unison-2.10.2/os.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/os.ml	2005-08-29 20:27:41.000000000 -0700
@@ -150,10 +150,23 @@
         loop newChildren directory
       in
       let absolutePath = Fspath.concat fspath path in
-      let directory = Fspath.opendir absolutePath in
-      let result = loop [] directory in
-      Unix.closedir directory;
-      result)
+      let directory =
+        try
+          Some (Fspath.opendir absolutePath)
+        with Unix.Unix_error (Unix.ENOENT, _, _) ->
+          (* FIX (in Ocaml): under Windows, when a directory is empty
+             (not even "." and ".."), FindFirstFile fails with
+             ERROR_FILE_NOT_FOUND while ocaml expects the error
+             ERROR_NO_MORE_FILES *)
+          None
+      in
+      match directory with
+        Some directory ->
+          let result = loop [] directory in
+          Unix.closedir directory;
+          result
+      | None ->
+          [])
 
 (*****************************************************************************)
 (*                        ACTIONS ON FILESYSTEM                              *)
@@ -167,14 +180,19 @@
        let absolutePath = Fspath.concatToString fspath path in
        match (Fileinfo.get false fspath path).Fileinfo.typ with
          `DIRECTORY ->
-           Unix.chmod absolutePath 0o700;
+           begin try
+             Unix.chmod absolutePath 0o700
+           with Unix.Unix_error _ -> () end;
            Safelist.iter
              (fun child -> delete fspath (Path.child path child))
              (childrenOf fspath path);
            Unix.rmdir absolutePath
        | `FILE ->
-           if Util.osType <> `Unix then
-             Unix.chmod absolutePath 0o600;
+           if Util.osType <> `Unix then begin
+             try
+               Unix.chmod absolutePath 0o600;
+             with Unix.Unix_error _ -> ()
+           end;
            Unix.unlink absolutePath;
            if Prefs.read Osx.rsrc then begin
              let pathDouble = Osx.appleDoubleFile fspath path in
diff -u -aruN unison.orig/unison-2.10.2/osxsupport.c unison/unison-2.10.2/osxsupport.c
--- unison.orig/unison-2.10.2/osxsupport.c	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/osxsupport.c	2005-08-29 20:28:48.000000000 -0700
@@ -6,6 +6,8 @@
 #include <caml/alloc.h>
 #include <caml/memory.h>
 #ifdef __APPLE__
+#include <sys/types.h>
+#include <sys/stat.h>
 #include <sys/attr.h>
 #include <unistd.h>
 #include <stdio.h>
@@ -115,6 +117,20 @@
   retcode = setattrlist(String_val (path), &attrList, attrBuf.finderInfo,
                         sizeof attrBuf.finderInfo, options);
 
+  if (retcode == -1 && errno == EACCES) {
+    /* Unlike with normal Unix attributes, we cannot set OS X attributes 
+       if file is read-only.  Try making it writable temporarily. */
+    struct stat st;
+    int r = stat(String_val(path), &st);
+    if (r == -1) uerror("setattrlist", path);
+    r = chmod(String_val(path), st.st_mode | S_IWUSR);
+    if (r == -1) uerror("setattrlist", path);
+    /* Try again */
+    retcode = setattrlist(String_val (path), &attrList, attrBuf.finderInfo,
+                          sizeof attrBuf.finderInfo, options);
+    /* Whether or not that worked, we should try to set the mode back. */
+    chmod(String_val(path), st.st_mode);
+  }
   if (retcode == -1) uerror("setattrlist", path);
 
   CAMLreturn (Val_unit);
diff -u -aruN unison.orig/unison-2.10.2/props.ml unison/unison-2.10.2/props.ml
--- unison.orig/unison-2.10.2/props.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/props.ml	2005-08-29 20:27:41.000000000 -0700
@@ -421,7 +421,7 @@
 
 let iCanWrite p =
   try
-    Unix.access p [Unix.R_OK];
+    Unix.access p [Unix.W_OK];
     true
   with
     Unix.Unix_error _ -> false
@@ -615,9 +615,9 @@
 let set fspath path kind p =
   Uid.set fspath path kind p.uid;
   Gid.set fspath path kind p.gid;
-  Perm.set fspath path kind p.perm;
+  TypeCreator.set fspath path kind p.typeCreator;
   Time.set fspath path kind p.time;
-  TypeCreator.set fspath path kind p.typeCreator
+  Perm.set fspath path kind p.perm
 
 let init someHostIsRunningWindows =
   Perm.init someHostIsRunningWindows;
diff -u -aruN unison.orig/unison-2.10.2/recon.ml unison/unison-2.10.2/recon.ml
--- unison.orig/unison-2.10.2/recon.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/recon.ml	2005-08-29 20:27:41.000000000 -0700
@@ -30,6 +30,10 @@
             d := Replica1ToReplica2
           else
             d := Replica2ToReplica1
+        end else if s1=`Deleted && dir=`Newer then begin
+          d := Replica2ToReplica1
+        end else if s2=`Deleted && dir=`Newer then begin
+          d := Replica1ToReplica2
         end
   | _ ->
       ()
diff -u -aruN unison.orig/unison-2.10.2/transport.ml unison/unison-2.10.2/transport.ml
--- unison.orig/unison-2.10.2/transport.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/transport.ml	2005-08-29 20:27:41.000000000 -0700
@@ -15,7 +15,8 @@
   match uiFrom, uiTo with
     _, Updates (File (props, ContentsUpdated (_, _, ress)), _) ->
       (Props.length props, Osx.ressLength ress)
-  | Updates (File _, Previous (_, props, _, ress)), NoUpdates ->
+  | Updates (_, Previous (`FILE, props, _, ress)),
+    (NoUpdates | Updates (File (_, ContentsSame), _)) ->
       (Props.length props, Osx.ressLength ress)
   | _ ->
       assert false
diff -u -aruN unison.orig/unison-2.10.2/ubase/util.ml unison/unison-2.10.2/ubase/util.ml
--- unison.orig/unison-2.10.2/ubase/util.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/ubase/util.ml	2005-08-29 20:27:41.000000000 -0700
@@ -244,14 +244,18 @@
   convertUnixErrorsToTransient "time" Unix.time
 
 let time2string timef =
-  let time = localtime timef in
-  Printf.sprintf
-    "%2d:%.2d on %2d %3s, %4d"
-    time.Unix.tm_hour
-    time.Unix.tm_min
-    time.Unix.tm_mday
-    (monthname time.Unix.tm_mon)
-    (time.Unix.tm_year + 1900)
+  try
+    let time = localtime timef in
+    Printf.sprintf
+      "%2d:%.2d:%.2d on %2d %3s, %4d"
+      time.Unix.tm_hour
+      time.Unix.tm_min
+      time.Unix.tm_sec
+      time.Unix.tm_mday
+      (monthname time.Unix.tm_mon)
+      (time.Unix.tm_year + 1900)
+  with Transient _ ->
+    "(invalid date)"
 
 let percentageOfTotal current total =
   (int_of_float ((float current) *. 100.0 /. (float total)))
@@ -355,19 +359,20 @@
 (*****************************************************************************)
 
 let fileInHomeDir n =
-  match osType with
-    `Win32 ->
-      let dirString =
-        try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
-        with Not_found ->
-        try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
-        with Not_found ->
-        try Unix.getenv "UNISON" (* Use UNISON dir if none of
-                                    the above are set *)
-        with Not_found -> "c:/" (* Default *) in
-      Filename.concat dirString n
-  | `Unix ->
-      Filename.concat (safeGetenv "HOME") n
+  if osType = `Unix || isCygwin then
+    Filename.concat (safeGetenv "HOME") n
+  else if osType = `Win32 then
+    let dirString =
+      try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
+      with Not_found ->
+      try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
+      with Not_found ->
+      try Unix.getenv "UNISON" (* Use UNISON dir if none of
+                                  the above are set *)
+      with Not_found -> "c:/" (* Default *) in
+    Filename.concat dirString n
+  else
+    assert false (* osType can't be anything else *)
 
 (*****************************************************************************)
 (*           "Upcall" for building pathnames in the .unison dir              *)
diff -u -aruN unison.orig/unison-2.10.2/uicommon.ml unison/unison-2.10.2/uicommon.ml
--- unison.orig/unison-2.10.2/uicommon.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uicommon.ml	2005-08-29 20:27:41.000000000 -0700
@@ -268,26 +268,28 @@
     | c ->
         buf.[!pos] <- c; pos := !pos + 1
   done;
-  String.sub buf 0 !pos
+  "{" ^ String.sub buf 0 !pos ^ "}"
 
-let ignorePath path = "Path " ^ (quote (Path.toString path))
+let ignorePath path = "Path " ^ quote (Path.toString path)
 
 let ignoreName path =
   match Path.finalName path with
-    Some name -> "Name " ^ (quote (Name.toString name))
+    Some name -> "Name " ^ quote (Name.toString name)
   | None      -> assert false
 
 let ignoreExt path =
   match Path.finalName path with
     Some name ->
       let str = Name.toString name in
-      (try
-        let pos = String.rindex str '.' + 1 in
+      begin try
+        let pos = String.rindex str '.' in
         let ext = String.sub str pos (String.length str - pos) in
-        "Name *." ^ (quote ext)
+        "Name {,.}*" ^ quote ext
       with Not_found -> (* str does not contain '.' *)
-        "Name "^(quote str))
-  | None      -> assert false
+        "Name " ^ quote str
+      end
+  | None ->
+      assert false
 
 let addIgnorePattern theRegExp =
   if theRegExp = "Path " then
diff -u -aruN unison.orig/unison-2.10.2/uigtk.ml unison/unison-2.10.2/uigtk.ml
--- unison.orig/unison-2.10.2/uigtk.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uigtk.ml	2005-08-29 20:27:41.000000000 -0700
@@ -1606,7 +1606,7 @@
                   catch (fun () ->
                            Transport.transportItem
                              theSI.ri (Uutil.File.ofLine i)
-                             (fun title text -> Trace.status (Printf.sprintf "\n%s\n\n%s\n\n" title text))
+                             (fun title text -> Trace.status (Printf.sprintf "\n%s\n\n%s\n\n" title text); true)
                            >>= (fun () ->
                            return Util.Succeeded))
                         (fun e ->
@@ -1760,6 +1760,7 @@
   actionBar#insert_space ();
   grAdd grDiff (actionBar#insert_button ~text:"Diff" ~callback:diffCmd ());
 
+(*
   let mergeCmd () =
     match !current with
       Some i ->
@@ -1787,7 +1788,7 @@
 
   actionBar#insert_space ();
   grAdd grDiff (actionBar#insert_button ~text:"Merge" ~callback:mergeCmd ());
-
+*)
   (*********************************************************************
     Keyboard commands
    *********************************************************************)
diff -u -aruN unison.orig/unison-2.10.2/uigtk2.ml unison/unison-2.10.2/uigtk2.ml
--- unison.orig/unison-2.10.2/uigtk2.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uigtk2.ml	2005-08-29 20:27:41.000000000 -0700
@@ -745,8 +745,7 @@
     match Uicommon.sshParse s with
       Uicommon.Password account -> getPassword account
     | _ -> "" in
-  if Osx.isMacOSX or Osx.isLinux then Some handleSSH
-  else None
+  None
 
 (* ------ *)
 
diff -u -aruN unison.orig/unison-2.10.2/uitext.ml unison/unison-2.10.2/uitext.ml
--- unison.orig/unison-2.10.2/uitext.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uitext.ml	2005-08-29 20:27:41.000000000 -0700
@@ -423,6 +423,8 @@
                  (["n";"q";"x"],
                     ("Exit"),
                     fun()->
+                      alwaysDisplay "\n";
+                      restoreTerminal ();
                       Lwt_unix.run (Update.unlockArchives ());
                       exit 1)]
                 (fun()-> display  "Press return to continue.")
diff -u -aruN unison.orig/unison-2.10.2/update.ml unison/unison-2.10.2/update.ml
--- unison.orig/unison-2.10.2/update.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/update.ml	2005-08-29 20:27:41.000000000 -0700
@@ -347,13 +347,25 @@
      let fto = Fspath.toString (Os.fileInUnisonDir toname) in
      debug (fun() -> Util.msg "Copying archive %s to %s\n" ffrom fto);
      Util.convertUnixErrorsToFatal "copying archive" (fun () ->
-       let outFd = Unix.openfile fto
-         [Unix.O_RDWR;Unix.O_CREAT;Unix.O_TRUNC] 0o600 in
+       let outFd = 
+         open_out_gen [Open_wronly; Open_creat; Open_trunc; Open_binary] 
+              0o600 fto
+       in
        Unix.chmod fto 0o600; (* In case the file already existed *)
-       let inFd = Unix.openfile ffrom [Unix.O_RDONLY] 0o444 in
-       Uutil.readWrite inFd outFd (fun _ -> ());
-       Unix.close inFd;
-       Unix.close outFd;
+       let inFd = open_in_bin ffrom in
+       let bufsize = 10000 in
+       let buf = String.create bufsize in
+
+       let rec read () =
+         let n = input inFd buf 0 bufsize in
+         if n>0 then begin
+           output outFd buf 0 n;
+         read()
+         end
+       in
+       read ();
+       close_in inFd;
+       close_out outFd;
        let arcFspath = Os.fileInUnisonDir toname in
        let info = Fileinfo.get false arcFspath Path.empty in
        Hashtbl.replace archiveInfoCache thisRoot info))
@@ -1308,11 +1320,14 @@
       &&
     Props.length info.Fileinfo.desc = Props.length archDesc
       &&
+    notExcelFile path
+      &&
     match archStamp with
       Fileinfo.InodeStamp inode ->
         info.Fileinfo.inode = inode
     | Fileinfo.CtimeStamp ctime ->
-        info.Fileinfo.ctime = ctime && notExcelFile path in
+        info.Fileinfo.ctime = ctime
+  in
   let ressClearlyUnchanged =
     fastCheck
       &&
@@ -1578,7 +1593,6 @@
 let rec buildUpdate archive fspath fullpath here path =
   match Path.deconstruct path with
     None ->
-      Os.checkThatParentPathIsADir fspath here;
       showStatus path;
       let (arch, ui) =
         buildUpdateRec archive fspath here (useFastChecking()) in
@@ -1588,6 +1602,12 @@
        end,
        ui)
   | Some(name, path') ->
+      if not (isDir fspath here) then
+        (archive,
+         Error (Printf.sprintf
+                  "path %s is not valid because %s is not a directory"
+                  (Path.toString fullpath) (Path.toString here)))
+      else
       let children = getChildren fspath here in
       let (name', status) =
         try
@@ -1625,7 +1645,7 @@
              Note that we may also put NoArchive deep inside an
              archive...
           *)
-          (ArchiveDir (desc, NameMap.add name' child otherChildren),
+          (ArchiveDir (desc, NameMap.add name' arch otherChildren),
            updates)
 
 (* for the given path, find the archive and compute the list of update
diff -u -aruN unison.orig/unison-2.10.2/uutil.ml unison/unison-2.10.2/uutil.ml
--- unison.orig/unison-2.10.2/uutil.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/uutil.ml	2005-08-29 20:27:41.000000000 -0700
@@ -83,7 +83,7 @@
 (*               Copy bytes from one file_desc to another                    *)
 (*****************************************************************************)
 
-let bufsize = 10000
+let bufsize = 16384
 let bufsizeFS = Filesize.ofInt bufsize
 let buf = String.create bufsize
 
diff -u -aruN unison.orig/unison-2.13.16/Makefile.OCaml unison/unison-2.13.16/Makefile.OCaml
--- unison.orig/unison-2.13.16/Makefile.OCaml	2005-06-27 10:38:25.000000000 -0700
+++ unison/unison-2.13.16/Makefile.OCaml	2005-08-29 20:28:48.000000000 -0700
@@ -143,7 +143,7 @@
 # NOTE: the OCAMLLIBDIR is not getting passed correctly?
 macexecutable: $(NAME)-blob.o
 	(cd uimac; xcodebuild OCAMLLIBDIR="$(OCAMLLIBDIR)")
-	gcc uimac/cltool.c -o uimac/build/Unison.app/Contents/MacOS/cltool -framework Carbon
+	gcc uimac/cltool.c -o uimac/build/Unison.app/Contents/MacOS/cltool -framework Carbon || gcc uimac/cltool.c -o uimac/build/Default/Unison.app/Contents/MacOS/cltool -framework Carbon
 
 # OCaml objects for the bytecode version
 # File extensions will be substituted for the native code version
diff -u -aruN unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib
--- unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib	2005-03-18 15:33:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib	2005-08-31 16:46:32.000000000 -0700
@@ -45,7 +45,11 @@
                 preferencesController = PreferencesController; 
                 preferencesView = NSView; 
                 profileController = ProfileController; 
+                restartButton = NSButton; 
+                restartMenuItem = NSMenuItem; 
                 statusText = NSTextField; 
+                synchronizeButton = NSButton; 
+                synchronizeMenuItem = NSMenuItem; 
                 tableView = ReconTableView; 
                 updatesText = NSTextField; 
                 updatesView = NSView; 
diff -u -aruN unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib
--- unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib	2005-03-21 12:22:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib	2005-08-31 16:46:32.000000000 -0700
@@ -3,34 +3,34 @@
 <plist version="1.0">
 <dict>
 	<key>IBDocumentLocation</key>
-	<string>318 45 509 310 0 0 1280 832 </string>
+	<string>502 19 509 310 0 0 1024 746 </string>
 	<key>IBEditorPositions</key>
 	<dict>
 		<key>197</key>
-		<string>450 391 383 326 0 0 1280 832 </string>
+		<string>320 335 383 326 0 0 1024 746 </string>
 		<key>198</key>
-		<string>307 297 669 515 0 0 1280 832 </string>
+		<string>423 231 669 515 0 0 1024 746 </string>
 		<key>29</key>
-		<string>72 209 280 44 0 0 1280 832 </string>
+		<string>-23 199 294 44 0 0 1024 746 </string>
 		<key>307</key>
-		<string>392 388 499 332 0 0 1280 832 </string>
+		<string>262 332 499 332 0 0 1024 746 </string>
 		<key>423</key>
-		<string>450 391 383 326 0 0 1280 832 </string>
+		<string>320 335 383 326 0 0 1024 746 </string>
 	</dict>
 	<key>IBFramework Version</key>
-	<string>364.0</string>
+	<string>439.0</string>
 	<key>IBOpenObjects</key>
 	<array>
-		<integer>423</integer>
 		<integer>198</integer>
 		<integer>29</integer>
-		<integer>402</integer>
-		<integer>234</integer>
 		<integer>21</integer>
-		<integer>307</integer>
+		<integer>423</integer>
+		<integer>234</integer>
+		<integer>402</integer>
 		<integer>197</integer>
+		<integer>307</integer>
 	</array>
 	<key>IBSystem Version</key>
-	<string>7U16</string>
+	<string>8C46</string>
 </dict>
 </plist>
diff -u -aruN unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib
--- unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib	2005-03-21 12:22:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib	2005-08-31 16:46:32.000000000 -0700
@@ -1,49 +1,45 @@
-typedstreamè„@„„„NSIBObjectData à„„NSObject …’„„„NSCustomObject)”„@@„„„NSMutableString„„NSString”„+NSApplication†…†„if–„„„NSTableColumn)”„@fff@@cc„™™profiles†ƒC—½ƒB=èsè„„„NSTableHeaderCell„„NSTextFieldCell>„„NSActionCell„„NSCellA”„ii‚ş  „@@@@„™™Profiles†„„„NSFont”š$„[36c]      şÿ L u c i d a G r a n d e  „f„c ¦¦ ¦†……„i: …’…’…„c@@ „„„NSColor ”¦„ffƒ>ªªŸ†„¦¦„@@@„™™System†„™™headerTextColor†„¦¦ª †††„Ÿ¡‚1ş@ ¢…„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦†……§ …’…’„„„NSClassSwapper*”„@#„™™ProfileTableView†„„NSTableView=„„	NSControl)„„NSView)„„NSResponder ”’„„„
-NSClipView:²’„„„NSScrollView â²’„„„NSCustomView)²’…š „@@@@ffffffff„„„NSMutableArray „„NSArray ”š’„„„NSTextField±’¸š‚
-   µ…………# Ü#,  #,’¸’…’…’…„icc@  „Ÿ¡‚ş ‚@  ¢„™™?Welcome to Unison!
+typedstreamè„@„„„NSIBObjectData à„„NSObject …’„„„NSCustomObject)”„@@„„„NSMutableString„„NSString”„+NSApplication†…†„if–„„„NSTextField„„	NSControl)„„NSView)„„NSResponder ”’„’„„„NSBox*’„„„NSCustomView)’…š „@@@@ffffffff„„„NSMutableArray „„NSArray ”š’ ’„¡’¢š‚   ¡„¥š’„’§š ¡„¥š’„„„NSMatrix>œ’©š‚€  ¡…………'F&  F&’©’…’…’…„icc@  …„#iiii:::ffffi@@@@@„„NSActionCell„„NSCellA”  ………F‚D(  „¥š’„„„NSButtonCell?­„ii‚„ş  „@@@@„™™Remote†„„„NSFont”š$„[36c]      şÿ L u c i d a G r a n d e  „f„c ¯¯ ¯†……„i: …’…’«„	ssii@@@@@ È ‚H<Qÿ„˜™ †µ…„„„NSButtonImageSource”’„™™NSRadioButton††…†’„±ª‚ş  «„™™Local†³……°…’…’«± È ‚H<Qÿµµ…¶…††„„„NSColor ”¯„@@@„™™System†„™™controlColor†„¼¯„ffƒ?*ª«††„¼¯µ†³„±ª‚ş  «„™™Radio†³……° …’…’…±K ‚H8Qÿ…„™™ †…¶…†’…’…’°†’„›’©š‚ €  ¡…………j:%  %’©’…’…’…¥  „„„NSTextFieldCell>­ª‚ş ‚ @  «„™™User:†³……° …’…’Ä„c@@ »„¼¯´½„™™controlTextColor†„¼¯µ †††’…„:…†’„›’©š‚ €  ¡………… ”8N  N’©’…’…’…¥  „Æª‚”qşA‚ @ «Ã³……° …’…’Ë·„¼¯´½„™™textBackgroundColor†À†„¼¯´½„™™	textColor†Ê††’…¸…†’„›’©š‚ €  ¡………… ö:&  &’©’…’…’…¥  „Æª‚ş ‚ @  «„™™Host:†³……° …’…’Ñ· »È†’…¸…†’„›’©š‚€  ¡…………!8 „   „’©’…’…’…¥  „Æª‚”qşA‚ @ «Ã³……° …’…’Ô·ÍÏ†’…¸…†’„›’©š‚€  ¡…………  ’©’…’…’…¥  „Æª‚ş ‚ @  «„™™File:†³……° …’…’Ö· »È†’…¸…†’„›’©š‚€  ¡………….w  w’©’…’…’…¥  „Æª‚”qşA‚ @ «Ã³……° …’…’Ù·ÍÏ†’…¸…††………³V  ³V’§’…’…’…††………<·j  ·j’¢’…’…’…„ff@@ccc  „Æª‚ş  «„™™Second root†³……° …’…’…· Í„¼¯µ ƒ?LÌÍ††© ’…†’„„„NSButton œ’¢š‚!€  ¡…………}T   T ’¢’…’…’…¥  „±ª‚ş ‚8  «„™™Save†³……° …’…’Ş± È‚†‚@ÿ„˜™ †„˜™ †…„´š„[28c]      şÿ H e l v e t i c a®¯ ¯¯ ¯ †…††’„ß’¢š‚!€  ¡…………)T   T ’¢’…’…’…¥  „±ª‚ş ‚8  «„™™Cancel†³……° …’…’å± È‚†‚@ÿ„˜™ †„˜™ †…ä…††’„›’¢š‚€  ¡………… ıW  W’¢’…’…’…¥  „Æª‚ş ‚ @  «„™™Profile name:†³……° …’…’ê· »È†’…¸…†’„›’¢š‚
+€  ¡…………m û^  ^’¢’…’…’…¥  „Æª‚”qşA‚ @ «Ã³……° …’…’í·ÍÏ†’…¸…††………  ß"  ß"’…’…’…’…–„˜™NSView†„™™NSResponder††š‚
+   ¡„¥š’Ÿ†……… ­·G  ·G’¢’…’…’…¹  „Æª‚ş  «„™™
+First root†³……° …’…’…· Í„¼¯µ ƒ?LÌÍ††Ÿ ’…†š ¡„¥š’š’„›’Ÿš‚€  ¡………….w  w’Ÿ’…’…’…¥  „Æª‚”qşA‚ @ «Ã³……° …’…’ö·ÍÏ†’…¸…††………³3  ³3’ ’…’…’…†š‚ €  ¡…………  ’Ÿ’…’…’…¥  „Æª‚ş ‚ @  «„™™File:
+†³……° …’…’š· »È†’…¸…†Ÿ–„ß’„£’…š ¡„¥š’„›’ûš‚
+€  ¡…………# Ü#,  #,’û’…’…’…¥  „Æª‚ş ‚@  «„™™?Welcome to Unison!
 Please choose a profile or create a new one
-†¬……§ …’…’½¨ „¦¦«¨„™™controlColor†„¦¦ªƒ?*ª«††„¦¦«¨„™™controlTextColor†ª††’…„:…†’„„„NSButton ±’¸š‚!   µ…………	T   T ’¸’…’…’…¹  „„„NSButtonCell? ¡‚ş ‚8  ¢„™™Open†¬……§ …’…’Æ„	ssii@@@@@ È‚†‚@ÿ„˜™ †„˜™ †…„¤š„[28c]      şÿ H e l v e t i c a¥¦ ¦¦ ¦ †…††’„Ç’¸š µ…………‹ı÷T   T ’¸’…’…’…¹  „É¡‚ş ‚8  ¢„™™Quit†¬……§ …’…’Î½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’¶’„Ç’¸š‚!   µ………… ÆC   C ’¸’…’…’…¹  „É¡‚ş ‚8  ¢„™™New†¬……§ …’…’Ó½ È‚†‚@ÿ„˜™ †„˜™ †…Í…†††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††š‚€  µ„»š’´’„„„
-NSScroller Ó±’¶š‚ €  µ…………3 †   †’¶’…’…’…¹   …’¶„ff: ƒ?4Œ „_doScroller:¦ ¦ †’„Ü’¶š‚ €  µ…………œœq  q’¶’…’…’…¹   …’¶À ƒ?}ÙÁ¦¦ †’„µ’¶š‚ À  µ„»š’„„„NSTableHeaderView²’Şš‚ €  µ…………  2  2’Ş’…’…’…’­††……… 2  2’¶’…’à’…’à„@@ccc„¦¦«¨„™™controlBackgroundColor†Ã†…  †’„„„_NSCornerView ²’¶š‚ €  µ…………3   ’¶’…’…’…††………<C ˜  C ˜’¸’…’´’…’Û’İ’´’Ş’ä„ffffi
-
-‚„   †š‚ À  µ„»š’­†………2 †  2 †’¶’…’­’…’­Ãâ…  †š‚   µ…………  2 †  2 †’´’…’…’…¹  …„@@@ff@@f::iàä„»š’š†„¦¦ª†„¦¦«¨„™™	gridColor†„¦¦ªƒ?   ††……‚Â@  ’…’…’…†¨ èÄ† ’­†­–„Ç’„¹’…š µ„»š’„¾’íš‚
-   µ…………¯g  g’í’…’…’…¹  „Ÿ¡‚ş ‚@  ¢„™™Let's update some stuff!
-†¬……§ …’…’ï¨ ÁÄ†’…º…†’„·’íš‚€  µ„»š’„µ’òš‚ À  µ„»š’„®­„™™ReconTableView†°’ôš µ…………  P ı  P ı’ô’…’…’…¹  …Æ„á’„µ’òš‚ À  µ„»š’ø†……… P  P’ò’…’ø’…’øÃâ…  †š‚ €  µ…………  P  P’ù’…’…’…’ö†„å’òš‚ €  µ…………Q   ’ò’…’…’…†„»š’„›œ„™™left†___„¡‚ş  ¢„™™Left†£……§ …’…’…¨ „¦¦ªƒ>ªªŸ†§†„Ÿ¡‚1ş@ ¢…¬……§ …’…’ö¨ èÄ† ’ö†’„›œ„™™	direction†222„¡‚ş ‚   ¢„™™Action†£……§ …’…’…¨ §†„Ÿ¡‚1ş@‚   ¢…¬……§ …’…’ö¨ èÄ† ’ö†’„›œ„™™right†___„¡‚ş  ¢„™™Right†£……§ …’…’…¨ „¦¦«¨„™™headerColor†è†§†„Ÿ¡‚1ş@ ¢…„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦†……§ …’…’ö¨âÄ† ’ö†’„›œ„™™progress†<<<„¡‚ş ‚   ¢„™™Progress†£……§ …’…’…¨ §†„Ÿ¡‚1ş@‚   ¢………§ …’…’ö¨âÄ† ’ö†’„›œ„™™path†ƒCŠŒ) Èè„¡‚ş  ¢„™™Path†£……§ …’…’…¨ §†„Ÿ¡‚1ş@ ¢………§ …’…’ö¨âÄ† ’ö††èé……‚Z@  ’…’…’…††………P ı  P ı’ò’…’ö’…’öÃâ…  †’„Ü’òš‚ €  µ…………Q ı   ı’ò’…’…’…¹   …’òÀ ƒ?wêqÁ¦ ¦ †’„Ü’òš‚ €  µ…………P  P’ò’…’…’…¹   …’òÀ ƒ?{¿]Á¦¦ †’ù’û†………sa  a’í’…’ô’…’’’ô’ù’ûÅ
-
-‚Ä   †’ì’„·’íš‚€  µ„»š’„µ’š‚ À  µ„»š’„„„NSTextTemplateÆ„„NSViewTemplate.²’š‚   µ………„„„NSMutableSet „„NSSet ”„I’„™™Apple PDF pasteboard type†’„™™Apple PICT pasteboard type†’„™™NSStringPboardType†’„™™*NeXT Rich Text Format v1.0 pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™Apple HTML pasteboard type†’„™™NSFilenamesPboardType†’„™™NeXT TIFF v4.0 pasteboard type†’„™™NSColor pasteboard type†’„™™NeXT RTFD pasteboard type†’„™™#CorePasteboardFlavorType 0x6D6F6F76†† _-  _-’’…’…’…’„™™NSText†’…’„¦¦«¨„™™	textColor†ª†’„¤š¾      şÿ H e l v e t i c a¥¦ ¦¦ ¦ †š ’èª-ª_‚ ˜–€’…¦¦ ¦ ¦¦ ¦ ¦¦ ¦¦ ¦ ††………_- _-’’…’ ’…’ Ãè„„„NSCursor”ª’„„„NSImage.”’…¦ ¦ ¦¦ ¦ ¦ ¦ ¦ ¦¦¦ ¦ ¦ ¦ ª„s¦ ’„„„NSBitmapImageRep„„
-NSImageRep”šÂ„[1218c]MM *  ÿÿÿÿÿÿÿÿ                                                        ÿÿÿÿ   ÿÿÿÿÿ                                                    ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                                ÿÿÿÿ   ÿ   ÿ   ÿÿÿÿÿ                                            ÿÿÿÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                                        ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                                    ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                                ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                            ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                        ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ                    ÿÿÿÿ   ÿ   ÿÿÿÿÿ   ÿ   ÿÿÿÿÿ                                    ÿÿÿÿ   ÿÿÿÿÿ    ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                ÿÿÿÿÿÿÿÿ        ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                ÿÿÿÿ                ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                                ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                                    ÿÿÿÿÿÿÿÿÿÿÿÿ                                                  ª                                         ²      º       (       R                
-ü€  ' 
-ü€  '†’„¦¦ª  †’…†¦ ¦ †  †’„Ü’š‚ €  µ…………œœD  D’’…’…’…¹   …’À Á¦ ¦ †’„Ü’š‚ €  µ…………œœW  W’’…’…’…¹   …’Àƒ?rCÁ¦¦ ††………<a/  a/’í’…’’…’=’>’’…’…Å
+†³……° …’…’ı· »È†’…¸…†’„ß’ûš‚!€  ¡…………	T   T ’û’…’…’…¥  „±ª‚ş ‚8  «„™™Open†³……° …’…’ ± È‚†‚@ÿ„˜™ †„˜™ †…ä…††’ú’„„„NSScrollView â’ûš‚€  ¡„¥š’„„„
+NSClipView:’š‚ À  ¡„¥š’„„„NSClassSwapper*”„@#„™™ProfileTableView†„„NSTableView=œ’š‚€  ¡…………  2 †  2 †’’…’…’…¥  …„@@@ff@@f::i„„„NSTableHeaderView’„	’š‚ À  ¡„¥š’†……… 2  2’’…’’…’„@@ccc„¼¯´½„™™controlBackgroundColor†¿†…  †š‚ €  ¡…………  2  2’’…’…’…’†„„„_NSCornerView ’š‚ €  ¡…………3   ’’…’…’…†„¥š’„„„NSTableColumn)”„@fff@@cc„™™profiles†ƒC—½ƒB=èsè„„„NSTableHeaderCellÆª‚ş  «„™™Profiles†„´š$­      şÿ L u c i d a G r a n d e  ®¯ ¯¯ ¯†……° …’…’…· „¼¯µƒ>ªªŸ†„¼¯´½„™™headerTextColor†Ê††„Æª‚1ş@ «…³……° …’…’· ÀÈ† ’††À„¼¯´½„™™	gridColor†„¼¯µƒ?   ††……‚Â@  ’…’…’…††………2 †  2 †’’…’’…’Ã…  †’„„„
+NSScroller Óœ’š‚ €  ¡…………3 †   †’’…’…’…¥   …’„ff: ƒ?4Œ „_doScroller:¯ ¯ †’„'’š‚ €  ¡…………œœq  q’’…’…’…¥   …’É ƒ?}ÙÊ¯¯ †’’†………<C ˜  C ˜’û’…’’…’&’(’’’„ffffi
+
+‚„   †’„ß’ûš‚!€  ¡………… ÆC   C ’û’…’…’…¥  „±ª‚ş ‚8  «„™™New†³……° …’…’)± È‚†‚@ÿ„˜™ †„˜™ †…ä…†††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††š‚ €  ¡…………‹ı÷T   T ’û’…’…’…¥  „±ª‚ş ‚8  «„™™Quit†³……° …’…’ú± È‚†‚@ÿ„˜™ †„˜™ †…ä…††û–„„„
+NSMenuItemŸ”’„„„NSMenu Ì”„i@@@‚€   „™™Actions†„¥š
+’„5’6„i@@IIi@@@@:i@ „™™Propagate Left to Right†„™™>†‚   ‚ÿÿÿ …„„„NSCustomResource)”–„™™NSImage†„™™NSMenuCheckmark††…„>–?„™™NSMenuMixedState††… …’…’…†’„5’6Ï „™™Propagate Right to Left†„™™<†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’6Ï „™™Propagate Newer to Older†Ã‚   ‚ÿÿÿ …=…A… …’…’…†’„5’6Ï „™™Propagate Older to Newer†Ã‚   ‚ÿÿÿ …=…A… …’…’…†’„5’6Ï „™™Leave Alone†„™™/†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’6Ï „™™!Revert to Unison's Recommendation†Ã‚   ‚ÿÿÿ …=…A… …’…’…†’4’„5’6Ï‚@   ÃÃ‚   ‚ÿÿÿ …=…A… …’…’…†’„5’6Ï „™™Restart†„™™r†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’6Ï „™™Synchronize all†„™™g†‚   ‚ÿÿÿ …=…A… …’…’…††…†Ï „™™Merge†Ã‚   ‚ÿÿÿ …=…A… …’…’…†6–„›’„’…š ¡„¥š’W’„›’Xš‚ €  ¡………… à4   à4’X’…’…’…¥  „Æª‚„ş ‚@  «„™™XÂ© Copyright 1999-2005.
 
+This software is licensed under the GNU General Public License.†„´š$­      şÿ L u c i d a G r a n d e  ®
+¯ ¯¯ ¯†……° …’…’Z· ÍÏ†’…¸…†’„„„NSImageViewœ’Xš‚ €  ¡………„„„NSMutableSet „„NSSet ”„I’„™™Apple PDF pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™NeXT TIFF v4.0 pasteboard type†’„™™NSFilenamesPboardType†’„™™Apple PICT pasteboard type†’„™™Apple PNG pasteboard type†† ¶ à@   à@’X’…’…’…¥  „„„NSImageCell)®ª‚ ş ‚   «„>–?„™™Unison††………„iii   †¯†’„›’Xš‚ €  ¡…………e à   à’X’…’…’…¥  „Æª‚„ş@‚@ «„™™Sync you very much!†„´š$­      şÿ O p t i m a - I t a l i c®¯ ¯¯ ¯ †……° …’…’m· ÍÏ†’…¸…†’„›’Xš‚ €  ¡………… Ü   Ü’X’…’…’…¥  „Æª‚„ş@‚@ «„™™?.?.?†„´š$­      şÿ L u c i d a G r a n d e  ®¯ ¯¯ ¯ †……° …’…’q· ÍÏ†’…¸…††………	
+  
+’…’…’…’…†š‚ €  ¡………… ˜ Ü   Ü’X’…’…’…¥  „Æª‚„ş@‚@ «„™™Unison†„´š,„[44c]   $   şÿ L u c i d a G r a n d e - B o l d®¯ ¯¯ ¯ †……° …’…’W· ÍÏ†’…¸…†X–qX–„5’„7Î „™™Help†„¥š’x†…†Ï „™™Unison Online Help†„™™?†‚   ‚ÿÿÿ …=…A… …’…’…†y–„ß’„’…š ¡„¥š’„¿„™™NSSecureTextField†›’š‚ €  ¡…………< »   »’’…’…’…¥  „Æª‚”qşA‚ @ «Ã³……° …’…’ ·ÍÏ†’…¸…†’„ß’š‚ €  ¡…………sb   b ’’…’…’…¥  „±ª‚ş ‚8  «„™™Continue†³……° …’…’ „± È‚†‚@ÿ„˜™ †„˜™ †…ä…††’~’„›’š‚ €  ¡…………Z ·   ·’’…’…’…¥  „Æª‚ş ‚ @  «„™™Please enter your password
+†³……° …’…’ ‰· »È†’…¸…††………	 ã €   ã €’…’…’…’…†š‚ €  ¡…………T   T ’’…’…’…¥  „±ª‚ş ‚8  «„™™Cancel†³……° …’…’~± È‚†‚@ÿ„˜™ †„˜™ †…ä…††–„5’„7Î „™™Unison†„¥š
+’„5’ ‘Ï „™™About Unison†Ã‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï‚@   ÃÃ‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï „™™Preferences...†„™™,†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï „™™Install command-line tool†Ã‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï‚@   ÃÃ‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï „™™Hide Unison†„™™h†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï „™™Hide Others†„™™h†‚   ‚ÿÿÿ …=…A… …’…’…†’ ’„5’ ‘Ï‚@   ÃÃ‚   ‚ÿÿÿ …=…A… …’…’…†’„5’ ‘Ï „™™Quit Unison†„™™q†‚   ‚ÿÿÿ …=…A… …’…’…††„™™_NSAppleMenu††Ï „™™Show All†Ã‚   ‚ÿÿÿ …=…A… …’…’…† ‘–ê¢–„Æ„™™	direction†222„ª‚ş ‚   «„™™Action†……° …’…’…· „¼¯µƒ>ªªŸ† †„Æª‚1ş@‚  «…³……° …’…’„¿„™™ReconTableView†’„	’„’„£’…š ¡„¥š’„›’ ³š‚
+€  ¡…………¯g  g’ ³’…’…’…¥  „Æª‚ş ‚@  «„™™Let's update some stuff!
+†³……° …’…’ µ· »È†’…¸…†’ ²’„ß’ ³š‚€  ¡…………u   u ’ ³’…’…’…¥  „±ª‚$ş ‚   «„™™Synchronize†³……° …’…’ ¸± È‚†‚@ÿÃ„˜™ †…³…††’„’ ³š‚€  ¡„¥š’„	’ ¼š‚ À  ¡„¥š’„„„NSTextTemplateÆ„„NSViewTemplate.’ ¾š‚€  ¡………„aÔ’„™™Apple HTML pasteboard type†’„™™Apple PICT pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™*NeXT Rich Text Format v1.0 pasteboard type†’„™™Apple PDF pasteboard type†’„™™NSFilenamesPboardType†’„™™NSStringPboardType†’„™™NeXT TIFF v4.0 pasteboard type†’„™™NSColor pasteboard type†’„™™#CorePasteboardFlavorType 0x6D6F6F76†’„™™NeXT RTFD pasteboard type†† _-  _-’ ¾’…’…’…’„™™NSText†’…’Ï’„´š»      şÿ H e l v e t i c a®¯ ¯¯ ¯ †š ’Àµ-µ_‚ ˜–€’…¯¯ ¯ ¯¯ ¯ ¯¯ ¯¯ ¯ ††………_- _-’ ¼’…’ À’…’ ÀÃÀ„„„NSCursor”µÿ’…¯ ¯ †  †’„'’ ¼š‚ €  ¡…………œœD  D’ ¼’…’…’…¥   …’ ¼É Ê¯ ¯ †’„'’ ¼š‚ €  ¡…………œœW  W’ ¼’…’…’…¥   …’ ¼Éƒ?rCÊ¯¯ ††………<a/  a/’ ³’…’ ¾’…’ Ó’ Ô’ ¾’…’…Ë
 
 
-‚   †’„Ç’íš‚   µ…………U   U ’í’…’…’…¹  „É¡‚ş ‚8  ¢„™™Restart†¬……§ …’…’?½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’„¾’íš‚
-   µ…………™  ’í’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Status
-†£……§ …’…’D¨ ÁÄ†’…º…††………  ‰Ù  ‰Ù’…’…’…’…–„˜™NSView†„™™NSResponder††š‚   µ…………u   u ’í’…’…’…¹  „É¡‚ş ‚8  ¢„™™Synchronize†¬……§ …’…’ì½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††í–„„„
-NSMenuItemŸ”’„„„NSMenu Ì”„i@@@ „™™Unison†„»š
-’„N’O„i@@IIi@@@@:i@ „™™About Unison†„™™ †‚   ‚ÿÿÿ …„„„NSCustomResource)”–„™™NSImage†„™™NSMenuCheckmark††…„W–X„™™NSMenuMixedState††… …’…’…†’„N’OÕ‚À   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Preferences...†„™™,†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Install command-line tool†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ‚À   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Hide Unison†„™™h†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Hide Others†„™™h†‚   ‚ÿÿÿ …V…Z… …’…’…†’M’„N’OÕ‚À   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Quit Unison†„™™q†‚   ‚ÿÿÿ …V…Z… …’…’…††„™™_NSAppleMenu††Õ „™™Show All†U‚   ‚ÿÿÿ …V…Z… …’…’…†O–„––„™™MyController†…†•–„Ç’„¹’…š µ„»š’„„„NSBox*²’rš‚
-   µ„»š’„²’tš µ„»š’„¾’wš µ…………  ’w’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™File:
-†¬……§ …’…’y¨ ÁÄ†’…º…†’„¾’wš‚   µ………….w  w’w’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’|¨„¦¦«¨„™™textBackgroundColor†è†2†’…º…††………³3  ³3’t’…’…’…††……… ­·G  ·G’r’…’…’…„ff@@ccc  „Ÿ¡‚ş  ¢„™™
-First root†¬……§ …’…’…¨ ~Ä†w ’…†’„u’rš‚   µ„»š’„²’ ‚š µ„»š’„„„NSMatrix>±’ „š‚   µ…………'F&  F&’ „’…’…’…¹  …„#iiii:::ffffi@@@@@   ………F‚D(  „»š’„É¡‚„ş  ¢„™™Remote†¬……§ …’…’ †½ È ‚H<Qÿ„˜™ † ‹…„„„NSButtonImageSource”’„™™NSRadioButton††…†’„É¡‚ş  ¢„™™Local†¬……§…’…’ †½ È ‚H<Qÿ ‹ ‹… Œ…††Áè¬„É¡‚ş  ¢„™™Radio†¬……§ …’…’…½K ‚H8Qÿ…U… Œ…†’…’…’ ‰†’„¾’ „š µ…………j:%  %’ „’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™User:†¬……§ …’…’ “¨ ÁÄ†’…º…†’„¾’ „š µ………… ”8N  N’ „’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ –¨~2†’…º…†’„¾’ „š µ………… ö:&  &’ „’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Host:†¬……§ …’…’ ˜¨ ÁÄ†’…º…†’„¾’ „š‚   µ…………!8 „   „’ „’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ ›¨~2†’…º…†’„¾’ „š‚   µ…………  ’ „’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™File:†¬……§ …’…’ ¨ ÁÄ†’…º…†’„¾’ „š‚   µ………….w  w’ „’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’  ¨~2†’…º…††………³V  ³V’ ‚’…’…’…††………<·j  ·j’r’…’…’…Ø  „Ÿ¡‚ş  ¢„™™Second root†¬……§ …’…’…¨ ~Ä† „ ’…†’„Ç’rš‚!   µ…………}T   T ’r’…’…’…¹  „É¡‚ş ‚8  ¢„™™Save†¬……§ …’…’ ¤½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’q’„¾’rš‚   µ………… ıW  W’r’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Profile name:†¬……§ …’…’ ©¨ ÁÄ†’…º…†’„¾’rš‚
-   µ…………m û^  ^’r’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ ¬¨~2†’…º…††………  ß"  ß"’…’…’…’…–„˜™NSView†„™™NSResponder††š‚!   µ…………)T   T ’r’…’…’…¹  „É¡‚ş ‚8  ¢„™™Cancel†¬……§ …’…’q½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††r–ö–\O–tr–Ó¸– ¤r–„Ç’„²’…š µ„»š’„®­„™™NSSecureTextField†¾’ µš µ…………< »   »’ µ’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ ·¨~2†’…º…†’„Ç’ µš µ…………sb   b ’ µ’…’…’…¹  „É¡‚ş ‚8  ¢„™™Continue†¬……§ …’…’ º½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’ ´’„¾’ µš µ…………Z ·   ·’ µ’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Please enter your password
-†¬……§ …’…’ ¿¨ ÁÄ†’…º…††………	 ã €   ã €’…’…’…’…†š µ…………T   T ’ µ’…’…’…¹  „É¡‚ş ‚8  ¢„™™Cancel†¬……§ …’…’ ´½ È‚†‚@ÿ„˜™ †„˜™ †…Í…†† µ–„¹’…š µ„»š’„¾’ Æš µ………… ‹C  C’ Æ’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™Connecting...†„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦ †……§ …’…’ È¨ ~2†’…º…††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††•– ¬r–|w–  †–ö–öò–í•–„N’„PÔ „™™Actions†„»š
-’„N’ ÏÕ „™™Propagate Left to Right†„™™>†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Propagate Right to Left†„™™<†‚   ‚ÿÿÿ …V…Z… …’…’…†’ Î’„N’ ÏÕ „™™Propagate Older to Newer†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Leave Alone†„™™/†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™!Revert to Unison's Recommendation†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Merge†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ‚@   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Restart†„™™r†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Synchronize all†„™™g†‚   ‚ÿÿÿ …V…Z… …’…’…††…†Õ „™™Propagate Newer to Older†U‚   ‚ÿÿÿ …V…Z… …’…’…† Ï–]O–jO– † „–?í–„PÔ „™™MainMenu†„»š’„N’ éÕ QU‚   ‚ÿÿÿ …V…Z„submenuAction: …’…’O†’„N’ éÕ „™™Edit†U‚   ‚ÿÿÿ …V…ZÜ …’…’„PÔ „˜™Edit†„»š’„N’ ïÕ „™™Cut†„™™x†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™Copy†„™™c†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™Paste†„™™v†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™
-Select All†„™™a†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™Select Conflicts†U‚   ‚ÿÿÿ …V…Z… …’…’…††…††’„N’ éÕ  ĞU‚   ‚ÿÿÿ …V…ZÜ …’…’ Ï†’„N’ éÕ „™™Ignore†U‚   ‚ÿÿÿ …V…ZÜ …’…’„PÔ „»š’„N’Õ „™™Ignore Path†„™™i†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’Õ „™™Ignore Extension†„™™e†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’Õ „™™Ignore Name†„™™n†‚   ‚ÿÿÿ …V…Z… …’…’…††…††’„N’ éÕ „™™Help†U‚   ‚ÿÿÿ …V…ZÜ …’…’„PÔ „»š’„N’Õ „™™Unison Online Help†„™™?†‚   ‚ÿÿÿ …V…Z… …’…’…††…†††„™™_NSMainMenu††•–„„„NSWindowTemplateø”„iiffffi@@@@@cp 
-‚px  U„™™NSWindow†„˜™View†„²’…š µ„»š’„¾’š µ………… ˜ Ü   Ü’’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™Unison†„¤š,„[44c]   $   şÿ L u c i d a G r a n d e - B o l d¥¦ ¦¦ ¦ †……§ …’…’¨ ~2†’…º…†’„¾’š µ………… à4   à4’’…’…’…¹  „Ÿ¡‚„ş ‚@  ¢„™™XÂ© Copyright 1999-2005.
 
-This software is licensed under the GNU General Public License.†„¤š$¤      şÿ L u c i d a G r a n d e  ¥
-¦ ¦¦ ¦†……§ …’…’ ¨ ~2†’…º…†’„„„NSImageView±’š µ………„$Ë’„™™Apple PDF pasteboard type†’„™™NeXT TIFF v4.0 pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™NSFilenamesPboardType†’„™™Apple PICT pasteboard type†† ¶ à@   à@’’…’…’…¹  „„„NSImageCell)¡¡‚ ş  ¢„W–X„™™Unison††………„iii   †¦†’„¾’š µ…………e à   à’’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™Sync you very much!†„¤š$¤      şÿ O p t i m a - I t a l i c¥¦ ¦¦ ¦ †……§ …’…’0¨ ~2†’…º…†’„¾’š µ………… Ü   Ü’’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™?.?.?†„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦ †……§ …’…’4¨ ~2†’…º…††………	
-  
-’…’…’…’…†…„ffff   @¦ª Õ ’…¦ªƒÿîƒÿî†•–„²’…š µ„»š †………	àh  àh’…’…’…’…†„ŞÂàh‚px  „™™Unison†„™™NSWindow†„˜™View†8…ã   @¦ª Õ ’…¦ †–­¶–½¸–„Ş¨R ã €‚px  „™™PasswordWindow†„™™NSWindow†„˜™View† µ…ã   @¦ª Õ ’…¦ªƒÿîƒÿî†•– › „–  „– – „– Ø Ï–`O–wt–Î¸–„––„™™PreferencesController†…†•–0– º µ–ïí––– È Æ–$– ø ï–ö– ò ï– İ Ï–bO–– Ú Ï–„––„™™ProfileController†…†•– â Ï–¶¸–  é– – ©r– í é– – Ï – „ ‚–í–ıö–cO– û ï–:•–– ş ï– ¿ µ– ‰ †–yw–iO–r•–– ß Ï– ì é– Ò Ï– õ ï–òí–– µ>––   „–Dí– ˜ „–O ì– “ „–fO– á Ï–4–Æ¸– é–SO– ï í– é––¸•– Õ Ï– ‚r–ö– · µ– å ÏšD– ¤„™™NSButton†–„˜™ †–­„™™NSTableView†– ›„™™NSTextField1†–j„™™1111†–í„™™updatesView†–>„™™PasswordWindow†–š„™™NSTableColumn†–r„™™PreferencesView†– ˜„™™NSTextField21†–4„™™NSTextField3†– õ„™™NSMenuItem1†– „™™NSButtonCell1†–¸„™™chooseProfileView†– „„™™NSView†– ø„™™NSMenuItem9†–DE–„˜™1†–„™™NSTableColumn1†–„™™AboutWindow†–„™™NSTextField†– Æ„™™ConnectingView†– È„™™NSTextField†–]„™™121†– –„™™NSTextField†–w„™™NSView†– ‰„™™NSButtonCell†–|„™™NSTextField†–ò„™™NSScrollView1†– “„™™NSTextField2†– ò„™™NSMenuItem3†– ï„™™NSMenu†– û„™™NSMenuItem10†– †„™™	NSMatrix1†–¶„™™NSScrollView1†–ì„™™	NSButton1†–ö„™™NSTableView†– ¬„™™NSTextField4†–ï„™™NSTextField2†– „™™NSTextField1†– „™™NSTextField22†–:„™™Window†–„™™NSScrollView2†–t„™™NSBox†–„˜™2†–?„™™
-NSButton21†–q„™™	NSButton1†– ©„™™NSTextField23†–½„™™NSTextField2†– º„™™NSButton†– é„˜™MainMenu†–Æ„™™NSButton†– í„™™
-NSMenuItem†– ‚„™™NSBox1†–Î„™™	NSButton1†–D„™™NSTextField1†–•„˜™File's Owner†–y„™™NSTextField2†– ´„™™	NSButton1†–Ó„™™	NSButton2†– „™™
-NSTextView†–  „™™NSTextField3†–BC– ·„™™NSTextField†– ¿„™™NSTextField2†–ı„™™NSTableColumn†–0„™™NSTextField2†–op’„$Ë’:†’„»šJ’„„„NSNibControlConnector Ï„„NSNibConnector”«j•„˜™
-terminate:††’„Š«f•„™™hideOtherApplications:††’„Š«c•„™™hide:††’„Š«M•„™™unhideAllApplications:††’„Š« ò…„˜™cut:††’„Š« ø…„˜™paste:††’„Š« û…„˜™
-selectAll:††’„Š« õ…„˜™copy:††’„„„NSNibOutletConnector Ï‹«oí„™™updatesView††’„œ«o¸„™™chooseProfileView††’„Š«Óo„™™createButton:††’„Š«Æo„™™openButton:††’„Š«?o„™™restartButton:††’„œ«o:„™™
-mainWindow††’„œ«D­„™™	tableView††’„œ«­D„™™
-dataSource††’„œ«oï„™™updatesText††’„œ«oD„™™profileController††’„œ«oö„™™	tableView††’„œ«öo„™™
-dataSource††’„Š«ìo„™™syncButton:††’„Š« ºo„™™endPasswordWindow:††’„œ«o>„™™passwordWindow††’„œ«o ·„™™passwordText††’„Š« ´o„™™endPasswordWindow:††’„œ«o „™™detailsTextView††’„œ«öo„™™delegate††’„Š«…„™™ignorePath:††’„Š«…„™™
-ignoreExt:††’„Š«…„™™ignoreName:††’„Š« Ò…„™™copyLR:††’„Š« Õ…„™™copyRL:††’„Š« ş…„™™selectConflicts:††’„Š« İ…„™™revert:††’„Š« Î…„™™forceNewer:††’„Š« Ø…„™™forceOlder:††’„Š« Ú…„™™leaveAlone:††’„œ«oD„™™
-statusText††’„œ«B ¬„™™profileNameText††’„œ«Bq„™™cancelButton††’„œ«B ¤„™™
-saveButton††’„œ«oB„™™preferencesController††’„œ«or„™™preferencesView††’„œ«B|„™™firstRootText††’„œ«B –„™™secondRootUser††’„œ«B ›„™™secondRootHost††’„œ«B  „™™secondRootText††’„œ«B ‰„™™remoteButtonCell††’„œ«B „™™localButtonCell††’„œ« ¬|„™™nextKeyView††’„œ«| †ï†’„œ« † –ï†’„œ« – ›ï†’„œ« ›  ï†’„œ«   ¤ï†’„œ« ¤ ¬ï†’„Š« ‰B„™™remoteClick:††’„Š« B„™™localClick:††’„œ«¶Æï†’„œ«Æ­ï†’„Š« ¤o„™™saveProfileButton:††’„Š«qo„™™cancelProfileButton:††’„œ«o ´„™™passwordCancelButton††’„œ« ·o„™™delegate††’„œ«­o„™™myController††’„œ«o„™™aboutWindow††’„œ«o4„™™versionText††’„Š«So„™™raiseAboutWindow:††’„Š«o„™™onlineHelp:††’„Š« åo„™™syncButton:††’„Š« ß…„™™merge:††’„œ«o Æ„™™ConnectingView††’„Š«`o„™™installCommandLineTool:††’„Š« âo„™™restartButton†††’…š ±„@iç ›rç ‚Cç©çÚQç› Òçjç õç¯çÀ üç•çš Êçèxç¦ Øç º íç`¬ç ÏçÎç“ ¯ç †lçD Ùç ãç éç ©IçøƒçÎ Éç „Dçœç´ éç’çí Æç­ç• °çj ˆçÜRç ¿ ïç ç á£ç äçò àçÂç½ Çç  tç í £çBKçêyç¨ Úç şç ç “oçĞç0šç şç ıç4›çú†ç¶ ğç ¤Gççf ‘ç  úç Æ§ç ø «çŞ^çì èç ‰mç\ Äçû‡ç? ÏçyjçÄç µ ëç İçìzçª Ûç sçüˆç ï ©ç¸ ÅçÒç— ³ç ÿç¶ Ëç¸ ñç ¬Jç
-Ÿçö âç‰ ‹ç Òç Îçàfç Óçi •çoç å¤ç nçÆç –pçî{ç¬ Üçş‰ç ì8çb ç–çÔç —çº òç çâuç  ÕçwBç] çÓ ÎçÈç ´ îçÆ Èçğ|ç® İç ‹ç ßç â®çÖ2ç û ¬çqHç­ ÍçtAçñ}ç> êç ˜qç ò  ç¼ óço Ñç¥çM –çävç¢ ÖçO9çò~ç‘ç È«çÊç ’ç ß¡çóç° æçŒç$™çc †ç ˜çØLçr3ç · ìççô€ç ùç¾ ûç:ç ÚçD0ç¦çgçı áç Øç|kçæwçSçõç8ç¤ ×çÌç‘ ™ç Õ
-çï Ğç™ µç õ çö‚ç² çš°š–­¯– · ¸–ö÷’„˜™IBCocoaFramework††
\ No newline at end of file
+‚   †’„ß’ ³š‚€  ¡…………U   U ’ ³’…’…’…¥  „±ª‚ş ‚8  «„™™Restart†³……° …’…’ Õ± È‚†‚@ÿ„˜™ †„˜™ †…ä…††’„›’ ³š‚
+€  ¡…………™  ’ ³’…’…’…¥  „Æª‚ş ‚ @  «„™™Status
+†……° …’…’ Ú· »È†’…¸…††………  ‰Ù  ‰Ù’…’…’…’…–„˜™NSView†„™™NSResponder††š‚€  ¡„¥š’ ±’„'’ ²š‚ €  ¡…………Q ı   ı’ ²’…’…’…¥   …’ ²É ƒ?wêqÊ¯ ¯ †’„'’ ²š‚ €  ¡…………P  P’ ²’…’…’…¥   …’ ²É ƒ?{¿]Ê¯¯ †’„	’ ²š‚ À  ¡„¥š’„’ âš‚ €  ¡…………  P  P’ â’…’…’…’ ¯††……… P  P’ ²’…’ ä’…’ äÃ…  †’„’ ²š‚ €  ¡…………Q   ’ ²’…’…’…††………sa  a’ ³’…’ ±’…’ à’ á’ ±’ â’ åË
+
+‚Ä   †š‚ À  ¡„¥š’ ¯†………P ı  P ı’ ²’…’ ¯’…’ ¯Ã…  †š‚ €  ¡…………  P ı  P ı’ ±’…’…’…¥  …Á ä å„¥š’„Æ„™™left†___„ª‚ş  «„™™Left†……° …’…’…·  ­ †„Æª‚1ş@ «…³……° …’…’ ¯· ÀÈ† ’ ¯†’ ©’„Æ„™™right†___„ª‚ş  «„™™Right†……° …’…’…· „¼¯´½„™™headerColor†À† †„Æª‚1ş@ «…t……° …’…’ ¯·È† ’ ¯†’„Æ„™™progress†<<<„ª‚ş ‚   «„™™Progress†……° …’…’…·  ñ †„Æª‚1ş@‚  «…t……° …’…’ ¯·È† ’ ¯†’„Æ„™™path†ƒCŠŒ) Èè„ª‚ş  «„™™Path†……° …’…’…·  ñ †„Æª‚1ş@ «…t……° …’…’ ¯·È† ’ ¯††À#……‚Z@  ’…’…’…†· ÀÈ† ’ ¯† ¯–„5’„7Î „™™MainMenu†„¥š’„5’ ÿÏ  ’Ã‚   ‚ÿÿÿ …=…A„submenuAction: …’…’ ‘†’„5’ ÿÏ „™™Edit†Ã‚   ‚ÿÿÿ …=…AÛ …’…’„7Î „˜™Edit†„¥š’„5’Ï „™™Cut†„™™x†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’Ï „™™Copy†„™™c†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’Ï „™™Paste†„™™v†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’Ï „™™
+Select All†„™™a†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’Ï „™™Select Conflicts†Ã‚   ‚ÿÿÿ …=…A… …’…’…††…††’ ş’„5’ ÿÏ „™™Ignore†Ã‚   ‚ÿÿÿ …=…AÛ …’…’„7Î „¥š’„5’Ï „™™Ignore Path†„™™i†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’Ï „™™Ignore Extension†„™™e†‚   ‚ÿÿÿ …=…A… …’…’…†’„5’Ï „™™Ignore Name†„™™n†‚   ‚ÿÿÿ …=…A… …’…’…††…††’„5’ ÿÏ zÃ‚   ‚ÿÿÿ …=…AÛ …’…’y††„™™_NSMainMenu††Ï 8Ã‚   ‚ÿÿÿ …=…AÛ …’…’6† ÿ–^X– ÿ– ² ³–¹«– œ ‘–ZX––Ë©– „–«©–O6– ÿ– ³•– ÿ•–Ş¢– ‘– Õ ³– –„„„NSWindowTemplateø”„iiffffi@@@@@clàh‚px  „™™Unison†„™™NSWindow†„˜™View†„’…š ¡„¥š †………	àh  àh’…’…’…’…†…„ffff   ê¯µ Õ ’…¯ †•– ” ‘–Ô©–– ¢–– ÿ––mX–  ‘–P6–„£’…š ¡„¥š’„›’,š‚ €  ¡………… ‹C  C’,’…’…’…¥  „Æª‚„ş@‚@ «„™™Connecting...†„´š$­      şÿ L u c i d a G r a n d e  ®¯ ¯¯ ¯ †……° …’…’.· ÍÏ†’…¸…††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††•–Ù©–ıû– ô ¯–.,–– ¼ ³–„––„™™PreferencesController†…†•–6 ş–û–§¢–# ÿ–y#–   ‘–S6–:6–„&İ¨R ã €‚px  „™™PasswordWindow†„™™NSWindow†„˜™View†…Ş   ê¯µ Õ ’…¯µƒÿîƒÿî†•–„––„™™MyController†…†•–öŸ– µ ³– í ¯–å¢– ¯ ²–6––Ä©– – ‘–J6– û– £ ‘–Ÿ –)û–°«–F6– è ¯–X„&İpÊ
+‚px  Ã„™™NSWindow†„˜™View†X…Ş   ê¯µ Õ ’…¯µƒÿîƒÿî†–Ñ©–C6–– — ‘–<•–í¢–– ¤ ‘–Ö©––©§– ‰–M6–„––„™™ProfileController†…†•–*%– ¸ ³– ù ¯–H6–û•––¢•– À ¼– Ú ³– š ‘–– šD–°„™™NSButtonCell†–ú„™™	NSButton1†– Õ„™™
+NSButton21†–•„˜™File's Owner†–«„™™	NSMatrix1†– ¸„™™	NSButton1†–%„™™Window†– ¼„™™NSScrollView2†–„™™NSTableColumn†– „™™NSButton†–?@–)„™™	NSButton2†–ö„™™NSTextField†–„™™NSMenuItem3†– ©„™™NSTableColumn1†– µ„™™NSTextField2†–#„˜™1†–ı„™™NSTextField2†–š„™™NSTextField2†–:;– ²„™™NSScrollView1†–„™™
+NSMenuItem†– Ú„™™NSTextField1†– „™™NSTextField†–¢„™™PreferencesView†–W„™™NSTextField†– ¤„™™1111†–Ù„™™NSTextField3†–û„™™chooseProfileView†–„™™NSMenuItem1†–„™™NSMenu†–©„™™NSView†–Ö„™™NSTextField22†–y„˜™2†–<„™™AboutWindow†–ê„™™NSTextField23†–í„™™NSTextField4†–Ô„™™NSTextField1†– „„™™NSButton†–45–.„™™NSTextField†–Ñ„™™NSTextField21†–„™™NSMenuItem9†– —„™™121†–„™™NSScrollView1†– À„™™
+NSTextView†–6„™™PasswordWindow†–Ë„™™NSTextField†– ‰„™™NSTextField2†– è„™™NSTableColumn†– ³„™™updatesView†–Ä„™™NSTextField2†–Ÿ„™™NSView†–x„˜™ †–m„™™NSTextField2†–,„™™ConnectingView†–~„™™	NSButton1†–§„™™NSBox1†–å„™™	NSButton1†–¹„™™NSButtonCell1†–„™™NSTableView†– ÿ„˜™MainMenu†–„™™NSMenuItem10†–Z„™™NSTextField1†–Ş„™™NSButton†– ¯„™™NSTableView†– „™™NSBox†–q„™™NSTextField3†’„aÔ’%†’„¥šN’„„„NSNibControlConnector Ï„„NSNibConnector”´ ¤•„˜™
+terminate:††’„…´  •„™™hideOtherApplications:††’„…´ •„™™hide:††’„…´ •„™™unhideAllApplications:††’„…´…„˜™cut:††’„…´…„˜™paste:††’„…´…„˜™
+selectAll:††’„…´…„˜™copy:††’„„„NSNibOutletConnector Ï†´: ³„™™updatesView††’„—´:û„™™chooseProfileView††’„…´):„™™createButton:††’„…´ :„™™openButton:††’„…´ Õ:„™™restartButton:††’„—´:%„™™
+mainWindow††’„—´?„™™	tableView††’„—´?„™™
+dataSource††’„—´: µ„™™updatesText††’„—´:?„™™profileController††’„—´: ¯„™™	tableView††’„—´ ¯:„™™
+dataSource††’„…´ ¸:„™™syncButton:††’„…´ „:„™™endPasswordWindow:††’„—´:6„™™passwordWindow††’„—´: „™™passwordText††’„…´~:„™™endPasswordWindow:††’„—´: À„™™detailsTextView††’„—´ ¯:„™™delegate††’„…´…„™™ignorePath:††’„…´…„™™
+ignoreExt:††’„…´ …„™™ignoreName:††’„…´:…„™™copyLR:††’„…´C…„™™copyRL:††’„…´…„™™selectConflicts:††’„…´M…„™™revert:††’„…´F…„™™forceNewer:††’„…´H…„™™forceOlder:††’„…´J…„™™leaveAlone:††’„—´: Ú„™™
+statusText††’„—´4í„™™profileNameText††’„—´4å„™™cancelButton††’„—´4Ş„™™
+saveButton††’„—´:4„™™preferencesController††’„—´:¢„™™preferencesView††’„—´4ö„™™firstRootText††’„—´4Ë„™™secondRootUser††’„—´4Ô„™™secondRootHost††’„—´4Ù„™™secondRootText††’„—´4°„™™remoteButtonCell††’„—´4¹„™™localButtonCell††’„—´íö„™™nextKeyView††’„—´ö«ê†’„—´«Ëê†’„—´ËÔê†’„—´ÔÙê†’„—´ÙŞê†’„—´Şíê†’„…´°4„™™remoteClick:††’„…´¹4„™™localClick:††’„—´ ê†’„—´ ê†’„…´Ş:„™™saveProfileButton:††’„…´å:„™™cancelProfileButton:††’„—´:~„™™passwordCancelButton††’„—´ :„™™delegate††’„—´:„™™myController††’„—´:<„™™aboutWindow††’„—´:q„™™versionText††’„…´ ”:„™™raiseAboutWindow:††’„…´x:„™™onlineHelp:††’„…´S:„™™syncButton:††’„…´4…„™™merge:††’„—´:,„™™ConnectingView††’„…´ š:„™™installCommandLineTool:††’„…´P:„™™restartButton:††’„—´: ¸„™™synchronizeButton††’„—´: Õ„™™restartButton††’„—´:S„™™synchronizeMenuItem††’„—´:P„™™restartMenuItem†††’…š µ„@iŸâ ëâ  –âJâñ‚â ©â Íâû Åâ¹ ûâFâ AâŸBâáwâŸ ×â„ ‹âÔrâÇâ  †â” µâ ¼ ùâ4Kâ­ çâC
+â Ú0âS¤â: ÑâÕQâ– Òâ âóƒâ ıâ°â? Ùâ» üâ¢3âı Çâ âãxâ¡ Øâökâ ô õâ•â š¬âÉâåyâ.«â¯ éâ °âW–â×Râ µ Ğâ ¯ ââõ†â	¥âåHâ½âO£â ¤ ˆâËpâ«lâ£ Úâö‡â ÿâ6 êâ ‘9â Õ ÏâËâçzâêIâZ—â÷ˆâ Êâ6â – Äâ «â± ğâˆ ’â§CâÖsâ ³ Æâ©DâÙ^â¶â © ßâ¦â ”âMâŠ ˜â<’â¿â ù äâyjâX‘âíJâ¥ Ûâ  â è áâÍâ’ ³â   ‘âé{â ‰ ïâ©â8â³ ñâ,§â şâ) Îâù‰âŒ ™âÛfâ™ Óâxoâ:â í ãâ ¯âq›âÁâHâ~ îâ À úâ%â şâ§ Üâ°mâP®â ¸ èâÏâ*âœâë|â­âû‹âÑqâµ òâ œ âİuâ› Õâì}âmšââ ÿâ — â¹nâ  ÈâÃâÙtâí~â ² àâ Ëâ© İâ £â^™âÑ2âšjââîâ âıŒâ â· óâ·â ¬âßvâ Öâï€â±â¯âÿâ  ìâÅâ „ íâú Éâğâ« æâŞGâ4¡â#gâÄoâÓLâ £ •š¸š–– ¯ °–  ‚’„˜™IBCocoaFramework††
\ No newline at end of file
diff -u -aruN unison.orig/unison-2.13.16/uimac/MyController.h unison/unison-2.13.16/uimac/MyController.h
--- unison.orig/unison-2.13.16/uimac/MyController.h	2005-03-18 15:33:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/MyController.h	2005-08-31 16:46:32.000000000 -0700
@@ -12,6 +12,9 @@
 {
     IBOutlet NSWindow *mainWindow;
 
+    IBOutlet NSMenuItem *restartMenuItem;
+    IBOutlet NSMenuItem *synchronizeMenuItem;
+
     IBOutlet ProfileController *profileController;
     IBOutlet NSView *chooseProfileView;
     NSSize chooseProfileSize;
@@ -28,6 +31,8 @@
 
     IBOutlet ReconTableView *tableView;
     IBOutlet NSTextField *updatesText;
+    IBOutlet NSButton *restartButton;
+    IBOutlet NSButton *synchronizeButton;
 
     IBOutlet NSWindow *passwordWindow;
     IBOutlet NSTextField *passwordText;
diff -u -aruN unison.orig/unison-2.13.16/uimac/MyController.m unison/unison-2.13.16/uimac/MyController.m
--- unison.orig/unison-2.13.16/uimac/MyController.m	2005-03-20 19:25:50.000000000 -0800
+++ unison/unison-2.13.16/uimac/MyController.m	2005-08-31 16:46:32.000000000 -0700
@@ -74,6 +74,8 @@
         [reconItems insertObject:[ReconItem initWithRi:Field(caml_reconItems,j)]
             atIndex:j];
     }
+    [synchronizeButton setEnabled:YES];
+    [synchronizeMenuItem setEnabled:YES];
 }
 
 - (void)displayDetails:(int)i
@@ -129,6 +131,8 @@
     [mainWindow setContentView:blankView];
     [self resizeWindowToSize:updatesSize];
     [mainWindow setContentView:updatesView];
+    [synchronizeButton setEnabled:NO];
+    [synchronizeMenuItem setEnabled:NO];
 
     // reconItems table gets keyboard input
     [mainWindow makeFirstResponder:tableView];
@@ -203,6 +207,8 @@
     [[NSNotificationCenter defaultCenter] removeObserver:self
         name:NSThreadWillExitNotification
         object:nil];
+    [restartButton setEnabled:YES];
+    [restartMenuItem setEnabled:YES];
     int i;
     for (i = 0; i < [reconItems count]; i++) {
         [[reconItems objectAtIndex:i] resetProgress];
@@ -213,6 +219,10 @@
 - (IBAction)syncButton:(id)sender
 {
     [tableView setEditable:NO];
+    [restartButton setEnabled:NO];
+    [restartMenuItem setEnabled:NO];
+    [synchronizeButton setEnabled:NO];
+    [synchronizeMenuItem setEnabled:NO];
     [[NSNotificationCenter defaultCenter] addObserver:self
         selector:@selector(afterSync:)
         name:NSThreadWillExitNotification object:nil];
diff -u -aruN unison.orig/unison-2.9.1/Makefile.OCaml unison/unison-2.9.1/Makefile.OCaml
--- unison.orig/unison-2.9.1/Makefile.OCaml	2002-04-10 22:13:23.000000000 -0700
+++ unison/unison-2.9.1/Makefile.OCaml	2005-08-29 20:27:29.000000000 -0700
@@ -25,7 +25,7 @@
 
 ifeq (${OSCOMP},cygwingnuc) # Define this if compiling with Cygwin GNU C
   OSARCH=win32gnuc
-  ETAGS=c:/emacs/bin/etags
+  ETAGS=/bin/etags
   buildexecutable:: win32rc/unison.res.lib   
 else
 # Win32 system
@@ -207,18 +207,35 @@
 #-cclib user32.lib -cclib advapi32.lib -cclib wsock32.lib \
 #               -cclib gdi32.lib -cclib imm32.lib -cclib shell32.lib \
 #               -cclib ole32.lib -cclib uuid.lib
-      CLIBS+=-cclib -llablgtk \
+      ifeq ($(OSCOMP), cygwingnuc)
+        # Cygwin
+        CLIBS+=-cclib -llablgtk \
+           -cclib /usr/lib/libglib.dll.a \
+           -cclib /usr/lib/libgmodule.dll.a \
+           -cclib /usr/lib/libgdk.dll.a \
+           -cclib /usr/lib/libgtk.dll.a \
+           $(WINSYSLIBS)
+        STATICLIBS+=-cclib -llablgtk \
+                -cclib /usr/lib/libglib.a \
+                -cclib /usr/lib/libgmodule.a \
+                -cclib /usr/lib/libgdk.a \
+                -cclib /usr/lib/libgtk.a \
+                $(WINSYSLIBS)
+      else
+        # Win32 with GNU C, but not Cygwin
+        CLIBS+=-cclib -llablgtk \
            -cclib $(GUILIBDIR)/glib-1.3.lib \
            -cclib $(GUILIBDIR)/gmodule-1.3.lib \
            -cclib $(GUILIBDIR)/gdk-1.3.lib \
            -cclib $(GUILIBDIR)/gtk-1.3.lib \
            $(WINSYSLIBS)
-      STATICLIBS+=-cclib -llablgtk \
+        STATICLIBS+=-cclib -llablgtk \
                 -cclib $(GUILIBDIR)/cclibs/glib-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gmodule-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gdk-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gtk-1.3.lib \
                 $(WINSYSLIBS)
+     endif # cygwingnuc
     else
       ifeq ($(OSARCH), solaris)
         STATICLIBS+=-cclib -llablgtk \
diff -u -aruN unison.orig/unison-2.9.1/ubase/uprintf.ml unison/unison-2.9.1/ubase/uprintf.ml
--- unison.orig/unison-2.9.1/ubase/uprintf.ml	2002-04-10 22:13:23.000000000 -0700
+++ unison/unison-2.9.1/ubase/uprintf.ml	2005-08-29 20:27:29.000000000 -0700
@@ -10,8 +10,8 @@
 (*                                                                     *)
 (***********************************************************************)
 
-external format_int: string -> int -> string = "format_int"
-external format_float: string -> float -> string = "format_float"
+external format_int: string -> int -> string = "caml_format_int"
+external format_float: string -> float -> string = "caml_format_float"
 
 let fprintf outchan doafter format =
   let format = (Obj.magic format : string) in
diff -u -aruN unison.orig/unison-2.9.1/ubase/util.ml unison/unison-2.9.1/ubase/util.ml
--- unison.orig/unison-2.9.1/ubase/util.ml	2002-04-10 22:13:23.000000000 -0700
+++ unison/unison-2.9.1/ubase/util.ml	2005-08-29 20:27:29.000000000 -0700
@@ -329,19 +329,20 @@
 (*****************************************************************************)
 
 let fileInHomeDir n =
-  match osType with
-    `Win32 ->
-      let dirString =
-        try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
-        with Not_found ->
-        try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
-        with Not_found ->
-        try Unix.getenv "UNISON" (* Use UNISON dir if none of
-                                    the above are set *)
-        with Not_found -> "c:/" (* Default *) in
-      Filename.concat dirString n
-  | `Unix ->
-      Filename.concat (safeGetenv "HOME") n
+  if osType = `Unix || isCygwin then
+    Filename.concat (safeGetenv "HOME") n
+  else if osType = `Win32 then
+    let dirString =
+      try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
+      with Not_found ->
+      try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
+      with Not_found ->
+      try Unix.getenv "UNISON" (* Use UNISON dir if none of
+                                  the above are set *)
+      with Not_found -> "c:/" (* Default *) in
+    Filename.concat dirString n
+  else
+    assert false (* osType can't be anything else *)
 
 (*****************************************************************************)
 (*           "Upcall" for building pathnames in the .unison dir              *)
