Package: g77
Version: 3.4
Revision: 20030820
Source: http://mirrors.rcn.net/pub/sourceware/gcc/snapshots/%v-%r/gcc-%v-%r.tar.bz2
Source-MD5: 68f086a9b71a6ff400a5f48e14e42bc3
NoSourceDirectory: True
ConfigureParams: --enable-languages=f77 --infodir='${prefix}/share/info'
#BuildDepends: dejagnu
PatchScript: <<
 #!/bin/sh
 cd gcc-%v-%r/gcc
 mv Makefile.in Makefile.in.orig
 sed 's|$(ALL_CPPFLAGS) $(INCLUDES)|$(INCLUDES) $(ALL_CPPFLAGS)|g' < Makefile.in.orig > Makefile.in
<<
CompileScript: <<
 #!/bin/sh
 mkdir darwin 
 cd darwin
 ../gcc-%v-%r/configure %c
 make bootstrap-lean
#cd gcc; make check-g77
<<
InstallScript: <<
 #!/bin/sh
 cd darwin
 make install prefix=%i
 cd %i/bin
 /bin/rm -f gcc gccbug cpp gcov powerpc-apple*
 ln -s %p/bin/g77 f77
 darwinvers=`/usr/bin/uname -v | cut -f1 -d":" | awk '{print $4}'`
 gccvers=`%i/bin/g77 -dumpversion | head -1 | cut -f4 -d" "`
 ln -s %p/lib/gcc-lib/powerpc-apple-darwin${darwinvers}/${gccvers}/include/g2c.h %i/include/g2c.h
 /bin/rm -rf %i/share/locale %i/man
 /bin/rm -f %i/lib/charset.alias
 /bin/rm -f %i/share/info/gcc* %i/share/info/cpp*
 /bin/mv -f %i/lib/libiberty.a %i/lib/libiberty-g77.a
<<
License: GPL
DocFiles: gcc-%v-%r/gcc/f/ChangeLog gcc-%v-%r/gcc/f/README gcc-%v-%r/COPYING gcc-%v-%r/COPYING.LIB
Description: GNU Fortran compiler
DescDetail: <<
 g77 consists of several components:       

 1) The g77 command itself.
 2) The libg2c run-time library.  This library contains the 
    machine code needed to support capabilities of the Fortran
    language that are not directly provided by the machine code 
    generated by the g77 compilation phase.       
 3) The compiler itself, internally named f771.       
    f771 does not generate machine code directly -- 
    it generates assembly code, leaving the conversion to 
    actual machine code to an assembler, usually named as.

 g77 supports some fortran90 features, like automatic arrays,
 free source form, and DO WHILE.
<<
DescPort: <<
 Installs g77 from the FSF gcc distribution.

 This version does not install in /usr. It contains it's own cc1 and
 libgcc.a installed in %p.

 libiberty.a moved to libiberty-g77.a to avoid conflict with ddd.

 Depends on "as" package, since the assembler provided by Apple in
 the Dec2002 Developer Tools Update breaks g77.
<<
DescUsage: <<
 If you get unresolved symbol '_saveFP', add -lcc_dynamic when linking.

 Does not support -framework argument, to link frameworks (like vecLib)
 use Apple's cc for linking.

 No man page, use "info g77".
<<
Homepage: http://gcc.gnu.org/onlinedocs/g77/
Maintainer: Jeffrey Whitaker <jswhit@fastmail.fm>
