Package: notecase
Version: 1.9.8
Revision: 1
Description: Hierarchical note manager
DescDetail:  <<
NoteCase is a hierarchical note manager (aka. outliner). It helps you organize
your everyday text notes into a single document, with individual notes placed 
in the tree-like structure (each note can have its sub-notes, ...).
To ensure your privacy, encrypted document format is supported, along with 
standard unencrypted format. 
<<
License: BSD
Homepage: http://notecase.sourceforge.net/index1.html
Maintainer: Alexander Hansen <alexkhansen@users.sourceforge.net>
#
Source: mirror:sourceforge:%n/%n-%v_src.tar.gz
Source-MD5: 9fe7d2db959d4c457d53313bb8faac35
SourceDirectory: %n-%v
#
PatchFile: %n.patch
PatchFile-MD5: de520b111d9215ad17a33eec74110123
PatchScript: <<
	#!/bin/sh -ev
	osversion=`uname -r | cut -d. -f1`
	sed -e 's,@FINKPREFIX@,%p,g' \
		-e 's,@OSVERSION@,$osversion,g' \
			%{PatchFile} | patch -p1 
<<
#
Depends: <<
atk1-shlibs, 
cairo-shlibs, 
fontconfig2-shlibs,
freetype219-shlibs,
gconf2-shlibs, 
glib2-shlibs, 
gnome-vfs2-unified-shlibs, 
gtk+2-shlibs, 
libgettext8-shlibs, 
libiconv, 
orbit2-shlibs, 
pango1-xft2-ft219-shlibs, 
x11, 
x11-shlibs
<<
BuildDepends: <<
atk1,
cairo,
fink (>= 0.24.12),
fontconfig2-dev,
freetype219,
gconf2-dev,
glib2-dev,
glitz,
gnome-vfs2-unified-dev,
gtk+2-dev,
libgettext8-dev,
libiconv-dev,
orbit2-dev,
pango1-xft2-ft219-dev,
pkgconfig, 
x11-dev
<<
#
GCC: 4.0
# 
CompileScript: <<
#!/bin/sh -ev
export PKG_CONFIG_PATH=%p/lib/fontconfig2/lib/pkgconfig:%p/lib/glib-2.0/pkgconfig-strict
make
<<
InstallScript: <<
#!/bin/sh -ev
export PKG_CONFIG_PATH=%p/lib/fontconfig2/lib/pkgconfig:%p/lib/glib-2.0/pkgconfig-strict
make install DESTDIR=%d
make poinstall DESTDIR=%d
<<
DescPort: <<
Upstream apparently never actually used Fink, since they used dpkg, if installed, to 
check whether the build is on a PowerPC, but looked for "ppc-darwin" as the return 
value.  Unless, of course someone else is using dpkg....
Patch that test in %b/Makefile to look for the proper return value.

Upstream apparently thought that ".x11app" was a necessary or convenient extension
on OS X.  That was only true back in the days of OroborOSX, so patch that out in 
%b/Makefile.

Upstream thought OSX came with "gmd5sum", so patch that to "md5sum" in %b/Makefile 
so that coreutils isn't in the BDeps.

Ditch -bind_at_load, and add -dead_strip_dylibs to LDFLAGS in %b/Makefile

As of 1.9.3-4, hardcode in the X11 library location, since it was apparently using
indirect means to find them.
<<
DescUsage:  << 
The help file isn't accessible via the GUI menu for some reason, but you can 
open it manually in the application.  It's in

%p/share/doc/%n/help.ncd
<<