Package: netcdf-gfortran
Version: 3.6.3
Revision: 2
BuildDepends: gcc43
BuildDependsOnly: True
Maintainer: None <fink-devel@lists.sourceforge.net>
Depends: %n-shlibs (= %v-%r)
Conflicts: netcdf (<= 3.6.1-1003), netcdf-absoft
Replaces: netcdf (<= 3.6.1-1003), netcdf-absoft, netcdf-g95
Source: ftp://ftp.unidata.ucar.edu/pub/netcdf/netcdf-%v.tar.gz
Source-MD5: e03ca6eb3a0d9126162b9fe1725cfed3
SourceDirectory: netcdf-%v
NoSetCPPFlags: true
#Patch: netcdf.patch
PatchScript: <<
  perl -pi.bak -e 's|\$rpath|%p/lib/netcdf-gfortran/lib|g' configure
<<
ConfigureParams: <<
  --prefix=%i/lib/netcdf-gfortran \
  --enable-shared CFLAGS=-O2 FFLAGS=-O2 FCFLAGS=-O2 FC=gfortran F77=gfortran F90=gfortran \
  --mandir='${prefix}/share/man' --enable-docs-install --docdir='${prefix}/share/doc/netcdf' \
  --disable-dependency-tracking --disable-fortran-compiler-check --disable-c --with-netcdf-c-lib=%p/lib \
  --disable-cxx --disable-utilities
<<
InstallScript: <<
  #!/bin/sh -ev
  make install prefix=%i/lib/netcdf-gfortran
  #make install DESTDIR=%d/lib/netcdf-gfortran
  mkdir -p %i/share
  mv %i/lib/netcdf-gfortran/share/man %i/share
  mv %i/lib/netcdf-gfortran/share/doc %i/share
  mv %i/lib/netcdf-gfortran/share/info %i/share
  /bin/rm -rf %i/lib/netcdf-gfortran/share
  # Add examples for F77 and F90
  mkdir -p %i/share/doc/netcdf/examples
  cp -r examples/F* %i/share/doc/netcdf/examples
  # Remove duplicate and C and CXX documentation
  rm -f %i/share/doc/netcdf/*.{ps,txt,info}
  rm -f %i/share/doc/netcdf/netcdf{,-[a-eg-z]*}.*
  rm -f %i/share/doc/netcdf/nc*-man-*.*
  rm -f %i/share/info/netcdf{-[a-eg-z]*,}.*
  perl -pi -e "s,%i,%p," %i/lib/%n/lib/libnetcdff.la
<<
SplitOff: <<
  Package: %N-shlibs
  Depends: netcdf-shlibs (= %v-1), gcc43-shlibs
  Files: lib/netcdf-gfortran/lib/libnetcdff.*.dylib
  Shlibs: %p/lib/netcdf-gfortran/lib/libnetcdff.4.dylib 5.0.0 %n (>= 3.6.2-1001)
  DocFiles: COPYRIGHT README RELEASE_NOTES
<<
InfoDocs: netcdf-f77.info netcdf-f90.info
DocFiles: COPYRIGHT README RELEASE_NOTES
Description: Interface & lib for array-based data access
DescDetail: <<
The netCDF (network Common Data Form) library defines a machine-independent
format for representing scientific data. Together, the interface, library,
and format support the creation, access, and sharing of scientific data.

This package provides libraries, documentation and examples for interfacing
with Fortran 77 and Fortran 90 code using the gfortran compiler.

Installs library and include files in %p/lib/netcdf-g95 to avoid 
conflicting with the netcdf-g95 package.
<<
DescPackaging: <<
This Fortran interface is created as a different package so that users
do not have to install a Fortran compiler to just get the C/C++ interface.
<<
DescPort: <<
CFLAGS=-O2 FFLAGS=-O2 FCFLAGS=-O2 is essential to avoid debugging mode flags (-g).
All docs are moved into the directory /sw/share/doc/netcdf.
Removed non-essential duplicate documentation (.ps and .txt).
<<
Homepage: http://www.unidata.ucar.edu/software/netcdf/
License: OSI-Approved
