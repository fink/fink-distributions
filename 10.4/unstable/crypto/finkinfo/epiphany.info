Package: epiphany

Version: 2.26.2
Revision: 3

Depends: <<
	atk1-shlibs (>= 1.26.0-1),
	audiofile-shlibs (>= 0.2-10),
	cairo-shlibs (>= 1.8-1),
	dbus-shlibs (>= 1.2.1-1),
	default-icon-theme,
	esound-shlibs (>= 0.2.38-1),
	expat1-shlibs,
	firefox2-shlibs (>= 2.0.0.20-4),
	fontconfig2-shlibs (>= 2.4.1-1),
	freetype219-shlibs (>= 2.3.8-2),
	gconf2 (>= 2.26.0-1),
	gconf2-shlibs (>= 2.26.0-1),
	glib2-shlibs (>= 2.20.0-1),
	glitz-shlibs,
	gnome-desktop2.11-shlibs,
	gnome-icon-theme (>= 2.26.0-1),
	gnome-keyring-shlibs (>= 2.26.0-1),
	gnome-mime-data (>= 2.18.0-1),
	gnome-vfs2-unified-shlibs (>= 1:2.24.1-1),
	gtk+2 (>= 2.16.0-1),
	gtk+2-shlibs (>= 2.16.0-1),
	iso-codes,
	libart2-shlibs (>= 2.3.16-2),
	libavahi-glib1-shlibs,
	libbonobo2-shlibs (>= 2.24.1-1),
	libbonoboui2-shlibs (>= 2.24.1-1),
	libcanberra-gtk0-shlibs (>= 0.12-1),
	libcanberra0-shlibs (>= 0.12-1),
	libgettext3-shlibs (>= 0.14.2-13),
	libglade2-shlibs (>= 2.6.4-1),
	libgnome2-shlibs (>= 2.26.0-1),
	libgnomecanvas2-shlibs (>= 2.26.0-1),
	libgnomeui2-shlibs (>= 2.24.1-1),
	libiconv,
	libogg-shlibs,
	libpng3-shlibs,
	libtool2-shlibs,
	libvorbis0-shlibs,
	libxml2-shlibs (>= 2.6.30-1),
	libxslt-shlibs (>= 1.1.22-1),
	orbit2-shlibs (>= 2.14.17-1),
	pango1-xft2-ft219-shlibs (>= 1.24.0-1),
	pixman-shlibs (>= 0.14.0-1),
	popt-shlibs,
	rarian-compat,
	shared-mime-info (>= 0.51-1),
	startup-notification-shlibs (>= 0.8-1),
	x11
<<
BuildDepends: <<
	atk1 (>= 1.26.0-1),
	audiofile (>= 0.2-10),
	avahi-dev,
	cairo (>= 1.8-1),
	dbus-dev (>= 1.2.1-1),
	esound (>= 0.2.38-1),
	expat1,
	fink (>= 0.24.12-1),
	firefox2-dev (>= 2.0.0.20-4),
	fontconfig2-dev (>= 2.4.1-1),
	freetype219 (>= 2.3.8-2),
	gconf2-dev (>= 2.26.0-1),
	gettext-bin (>= 0.14.2-13),
	gettext-tools (>= 0.14.2-13),
	glib2-dev (>= 2.20.0-1),
	glitz,
	gnome-desktop2.11-dev,
	gnome-doc-utils (>= 0.16.0-1),
	gnome-keyring-dev (>= 2.26.0-1),
	gnome-vfs2-unified-dev (>= 1:2.24.1-1),
	gtk+2-dev (>= 2.16.0-1),
	gtk-doc (>= 1.9-1),
	intltool40,
	libart2 (>= 2.3.16-2),
	libavahi-glib1-dev,
	libbonobo2-dev (>= 2.24.1-1),
	libbonoboui2-dev (>= 2.24.1-1),
	libcanberra-gtk0 (>= 0.12-1),
	libcanberra0 (>= 0.12-1),
	libgettext3-dev (>= 0.14.2-13),
	libglade2 (>= 2.6.4-1),
	libgnome2 (>= 2.26.0-1),
	libgnome2-dev (>= 2.26.0-1),
	libgnomecanvas2-dev (>= 2.26.0-1),
	libgnomeui2-dev (>= 2.24.1-1),
	libiconv-dev,
	libogg,
	libpng3,
	libtool2,
	libvorbis0,
	libxml2 (>= 2.6.30-1),
	libxslt (>= 1.1.22-1),
	orbit2-dev (>= 2.14.17-1),
	pango1-xft2-ft219-dev (>= 1.24.0-1),
	pixman (>= 0.14.0-1),
	pkgconfig (>= 0.23),
	popt,
	startup-notification-dev (>= 0.8-1),
	x11-dev,
	xft2-dev
<<
Recommends: yelp, gedit
Conflicts: %N2.24-dev
Replaces: %N2.24-dev
Source: mirror:gnome:sources/%n/2.26/%n-%v.tar.bz2
Source-MD5: 29c23cfb0a5713b53255a9ca652192c1

PatchScript: <<
	perl -pi -e 's/-Wl,--rpath=\$_GECKO_HOME//' configure
	perl -pi -e 's/(AVAHI_REQUIRED\s*=).*/${1}99999.FORCE.NONDETECT/' configure
<<

GCC: 4.0
ConfigureParams: --mandir=%p/share/man --disable-dependency-tracking --disable-scrollkeeper --disable-schemas-install --disable-static --with-gecko=firefox --disable-python PKG_CONFIG_PATH="%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH" --enable-gtk-doc
SetCFLAGS: -Os
CompileScript: <<
	./configure %c
	make CCLD=g++
<<
InstallScript: make -j1 install CCLD=g++ DESTDIR="%d"
DocFiles: AUTHORS COPYING* ChangeLog HACKING MAINTAINERS NEWS README TODO

PostInstScript: <<
	. %p/bin/init.sh
	if [ configure = "$1" ]; then
		scrollkeeper-update
		export GCONF_CONFIG_SOURCE=`gconftool-2 --get-default-source`
		gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/epiphany.schemas >/dev/null
		gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/epiphany-fonts.schemas >/dev/null
		gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/epiphany-lockdown.schemas >/dev/null
		gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/epiphany-pango.schemas >/dev/null
	 fi
	gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
<<
PostRmScript: <<
	. %p/bin/init.sh
	if [ update != "$1" ]; then
		scrollkeeper-update
	fi
	gtk-update-icon-cache -f -t %p/share/icons/hicolor || :
<<

ConfFiles: <<
	%p/etc/gconf/schemas/epiphany.schemas
	%p/etc/gconf/schemas/epiphany-fonts.schemas
	%p/etc/gconf/schemas/epiphany-lockdown.schemas
	%p/etc/gconf/schemas/epiphany-pango.schemas
<<

Splitoff: <<
	Package: %N2.26-dev
	Depends: %N (= %v-%r)
	BuildDependsOnly: true
	Files: include lib/pkgconfig
	DocFiles: AUTHORS COPYING* ChangeLog HACKING MAINTAINERS NEWS README TODO
	Description: Files for writing extensions for epiphany
<<

Description: GNOME light-weight web browser
DescDetail: <<
Epiphany is a GNOME web browser based on the gecko rendering engine.
The name meaning:
"An intuitive grasp of reality through something (as an event) usually
simple and striking"
<<
DescUsage: <<
	You may want to install yelp to view the documentation.

	It is recommended to install gedit to view source code.

	If the fonts appear to be very small, just open the preferences pane 
	and close it, alternatively you may want to change the default fonts 
	(Luxi Sans 12 and Courrier 10 work quite well).
	Unfortunately printing does not work currently.
<<
DescPort: <<
	Uses C++ in some low-level libs, so need g++ when linking against them

	Remove linux-specific linker flag from configure gecko tests.
	See: http://bugzilla.gnome.org/show_bug.cgi?id=387185
<<
DescPackaging: <<
	Made a dev split-off for potential epiphany-extensions
	API and extensions- and other dirs changes with each
	major-version, so version the -dev pkg in order for external
	extensions and other packages to build deterministically.
	The actual -dev files are named for the major.minor and
	generate extensions that can only be used with that
	major.minor. Updating %N version 2.24->2.26 makes 2.24-dev
	nonviable even though they are not filename collisions, so
	it's the %N that Conflicts/Replaces older -dev.

	Ignore avahi-gobject that isn't yet in fink so build is
	consistent if/when we do get it.
<< 
License: GPL
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
Homepage: http://www.gnome.org/
