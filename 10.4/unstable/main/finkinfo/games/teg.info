Package: teg
Version: 0.11.1
Revision: 1014
Description: Strategy game similar to Risk
License: GPL
Maintainer: Dave Vasilevsky <vasi@users.sourceforge.net>

Depends: <<
	expat1-shlibs,
	atk1-shlibs (>= 1.12.3-1),
	audiofile-shlibs,
	esound-bin,
	esound-shlibs,
	gconf2 (>= 2.16.0-1),
	gconf2-shlibs (>= 2.16.0-1),
	glib2-shlibs (>= 2.12.0-1),
	gnome-keyring-shlibs,
	gnome-vfs2-unified-shlibs (>= 1:2.16.0-1),
	gtk+2-shlibs (>= 2.10.0-1),
	libart2-shlibs,
	libbonobo2-shlibs (>= 2.16.0-1),
	libbonoboui2-shlibs (>= 2.16.0-1),
	libgnome2-shlibs (>= 2.16.0-1),
	libgnomeui2-shlibs (>= 2.16.0-1),
	libgnomecanvas2-shlibs (>= 2.14.0-1),
	libiconv,
	libjpeg-shlibs,
	libxml2-shlibs,
	orbit2-shlibs,
	pango1-xft2-ft219-shlibs (>= 1.14.9-1),
	popt-shlibs,
	readline5-shlibs (>= 5.0-1004),
	x11,
	libgettext3-shlibs,
	scrollkeeper,
	
	ggz-client-libs,
	ggz-server-shlibs
<<

BuildDepends: <<
	atk1 (>= 1.12.3-1),
	audiofile,
	cairo (>= 1.2-1),
	esound,
	expat1,
	fontconfig2-dev (>= 2.3.2-13),
	freetype219,
	gconf2-dev (>= 2.16.0-1),
	libgettext3-dev,
	glib2-dev (>= 2.12.0-1),
	gnome-keyring-dev (>= 0.4.3-1),
	dbus-dev (>= 1.0-1), libhowl-dev, gnome-vfs2-unified-dev (>= 1:2.16.0-1),
	gtk+2-dev (>= 2.10.0-1),
	intltool,
	libart2,
	libbonobo2-dev (>= 2.16.0-1),
	libbonoboui2-dev (>= 2.16.0-1),
	libgnome2-dev (>= 2.16.0-1),
	libgnomeui2-dev (>= 2.16.0-1),
	libgnomecanvas2-dev (>= 2.14.0-1),
	libiconv-dev,
	libjpeg,
	libxml2,
	orbit2-dev,
	pango1-xft2-ft219-dev (>= 1.14.9-1),
	pkgconfig (>= 0.21-1),
	popt,
	readline5 (>= 5.0-1004),
	x11-dev,
	xft2-dev,
	
	libggz (>= 0.0.11-1) | libggz-crypto (>= 0.0.11-1),
	ggz-client-libs-dev	(>= 0.0.11-1),
	ggz-server-dev		(>= 0.0.11-1),
	ggz-server			(>= 0.0.11-1)
<<

Source: mirror:sourceforge:%n/%n-%v.tar.gz
Source-MD5: 85db29710452c3c4829e506481deaca0

SetCPPFLAGS: -DMACOSX
ConfigureParams: --with-readline --enable-ggz=yes --with-ggzdmod-dir=%p --with-ggzmod-dir=%p -with-ggzconfig=%p/bin --with-ggzd-confdir=%p/etc/ggzd --disable-dependency-tracking PKG_CONFIG_PATH="%p/lib/pango-ft219/lib/pkgconfig:%p/lib/fontconfig2/lib/pkgconfig:%p/lib/freetype219/lib/pkgconfig:$PKG_CONFIG_PATH"

# Patch includes
#	* Header inclusion fixes
#	* Fixes from the GGZ folks
#	* Fixes from Ubuntu, including:
#		- Man pages
#		- Extra translations
#	* Fix for sgmldocs.make, to prevent warnings that confuse buildfink
Patch: %n.patch

CompileScript: <<
	#!/bin/sh -ev
	intltoolize -c -f
	./configure %c
	make
<<

InstallScript: <<
	#!/bin/sh -ev
	install -d -m 755 %i/etc/ggzd/games
	install -d -m 755 %i/etc/ggzd/rooms
	GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=1 make install DESTDIR=%d GGZ_CONFIG="%p/share/ggz/ggz-config-fake %p %n" ggzdconfdir=%i/etc/ggzd
	install -d -m 755 %i/share/man/man6
	install -m 644 *.6 %i/share/man/man6/
	# Don't install omf, it's invalid
<<

PostInstScript: <<
	GCONF_CONFIG_SOURCE=xml::%p/etc/gconf/gconf.xml.defaults %p/bin/gconftool-2 --makefile-install-rule %p/etc/gconf/schemas/teg.schemas > /dev/null
	for mod in %p/share/ggz/modules/%n/*.dsc; do
		%p/bin/ggz-config --install --modfile=$mod --force
	done
<<

PreRmScript: <<
	GCONF_CONFIG_SOURCE=xml::%p/etc/gconf/gconf.xml.defaults %p/bin/gconftool-2 --makefile-uninstall-rule %p/etc/gconf/schemas/teg.schemas > /dev/null
	for mod in %p/share/ggz/modules/%n/*.dsc; do
		%p/bin/ggz-config --remove --modfile=$mod
	done
<<

DocFiles: COPYING HACKING PEOPLE README* TODO
Homepage: http://teg.sourceforge.net
DescDetail: <<
	Tenes Empanadas Graciela is a clone of Plan Tactico y Estrategico
	de la Guerra, a turn based strategy game, based on Risk. It's a
	multiplayer game (it can be played across the internet), it has a
	server, a GNOME client, and an AI.
	
	If you have GGZ installed, the Teg client and server functionality will
	be available.
<<
DescPort: <<
	- Help feature doesn't seem to work at all! Damn gnome...
<<
