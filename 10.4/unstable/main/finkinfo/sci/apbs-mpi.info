Info2: <<
Package: apbs-mpi-%type_pkg[handler]
Version: 1.1.0
Revision: 1
Type: handler (lammpi openmpi)
Conflicts: apbs, apbs-mpi-lammpi, apbs-mpi-openmpi
Replaces: apbs, apbs-mpi-lammpi, apbs-mpi-openmpi
Source: http://switch.dl.sourceforge.net/sourceforge/apbs/apbs-%v-source.tar.gz
Source-MD5: 8b844ba848cf853da712bbbf9f2e1553
SourceDirectory: apbs-%v-source
Depends: (%type_pkg[handler] = lammpi) lammpi (>= 7.1.2-1000), (%type_pkg[handler] = openmpi) openmpi (>= 1.2.5-1000), readline-shlibs (>= 4.3-1028), gnuplot (>=4.2.0) | gnuplot-nox | gnuplot-nogtk, (%m != x86_64) gcc43-shlibs, (%m = x86_64) gcc44-shlibs
BuildDepends: (%m != x86_64) gcc43, (%m = x86_64) gcc44, (%type_pkg[handler] = lammpi) lammpi-dev (>= 7.1.2-1000), (%type_pkg[handler] = openmpi) openmpi-dev (>= 1.2.5-1000)
Description: Adaptive Poisson-Boltzmann Solver
SetCC: %p/bin/mpicc
SetCXX: %p/bin/mpic++
SetCFLAGS: -O3
ConfigureParams: --build=%m-apple-darwin`uname -r|cut -f1 -d.` --host=%m-apple-darwin`uname -r|cut -f1 -d.`
CompileScript: <<
#!/bin/zsh -efv
PATH=/usr/bin:$PATH                                
BLAS_DIR='/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A' py_path=/usr/bin/python
F77=%p/bin/mpif77 ./configure %c  --disable-blas  --with-blas="-L${BLAS_DIR} -lblas -Wl,-framework -Wl,vecLib -Wl,-undefined -Wl,dynamic_lookup" FFLAGS="-O3"
perl -pi -e 's|cp -Rf tools \${prefix}||g' Makefile
perl -pi -e 's|cp -Rf examples \${prefix}||g' Makefile
perl -pi -e 's|cp -Rf doc \${prefix}||g' Makefile
perl -pi -e 's|\$\(DESTDIR\)\$\(libdir\)|share/apbs/lib|g'  contrib/blas/Makefile
make
<<
InstallScript: <<
#!/bin/zsh -efv
make install DESTDIR=%d
rm -Rf **/CVS     # fink validate complains if this junk is left behind.
# rm -Rf **/.svn  # fink validate complains if this junk is left behind.
mkdir -p %i/share/%n
mkdir -p %i/lib
perl -pi -e 's|/usr/bin/env python|/usr/bin/python|g' examples/**/*.py
perl -pi -e 's|/usr/bin/env python|/usr/bin/python|g' tools/**/*.py
mv examples %i/share/%n
mv tools %i/share/%n
mv doc %i/share/%n
rm -Rf %i/src
rm -f **/*.o
<<
PostInstScript: <<
# per request of software's author
echo ""
echo "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
echo "Please issue \"open http://agave.wustl.edu/apbs/download/\","
echo "to register your use of this software to help the author" 
echo "maintain funding for apbs.  apbs is released under the GPL and this is"
echo "not required, but would be very helpful."
echo "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++"
echo ""
sleep 5
<<
################################################################################
SplitOff: <<
        Package: %N-dev
        BuildDependsOnly: true
        Description: apbs headers, static libraries and libtool files
        Files:<<
                include/apbs
                lib/libapbs.a
                lib/libapbsmainroutines.a
                lib/libapbs.la
                lib/libapbsmainroutines.la
        <<
<<
################################################################################
Homepage: http://apbs.sourceforge.net/
RunTimeVars: <<
  APBS_PSIZE:%p/share/apbs/tools/manip
<<
DescDetail: <<
APBS is a software package for the numerical solution of the 
Poisson-Boltzmann equation, a popular continuum model for describing 
electrostatic interactions between molecular solutes over a wide range 
of length scales. The Fink pymol package is pre-configured to permit
apbs to be used as a plug-in.
.
The software is released under the GPL, but the author requests that you
register your use with him to aid him in obtaining funding to continue to
develop the code.  Most electrostatics software is payware, so please help
him continue to support this free software. You can do so at this URL:
http://agave.wustl.edu/apbs/download/
<<
License: GPL          
Maintainer: W. G. Scott <wgscott@users.sourceforge.net>
<<
