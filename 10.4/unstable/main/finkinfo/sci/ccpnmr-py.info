Info2: <<
Package: ccpnmr-py%type_pkg[python]
Version: 1.0.13
Revision: 1
Distribution: (%type_pkg[python] = 23) 10.4

Type: python (2.3 2.4 2.5)

Maintainer: Murali Vadivelu <murali1080@users.sf.net>

Depends: python%type_pkg[python], python%type_pkg[python]-socket, x11, tcltk, freeglut-shlibs, python%type_pkg[python]-socket-ssl | python%type_pkg[python]-socket 
BuildDepends: x11-dev, tcltk-dev, freeglut
Recommends: ccpnmr-py%type_pkg[python]-bin
Conflicts: ccpnmr-opengl-py%type_pkg[python], ccpnmr-mesa-py%type_pkg[python]
Replaces: ccpnmr-opengl-py%type_pkg[python], ccpnmr-mesa-py%type_pkg[python]

Description: NMR Software Suite (using OpenGL)
Homepage: http://www.ccpn.ac.uk/ccpn_suite/ccpn_suite.html
License: LGPL

Source: ftp://www.bio.cam.ac.uk/pub/ccpnmr/analysis%v.tar.gz
SourceDirectory: ccpnmr
Source-MD5: a5e2d0ca2b8b079f59cbe7458db6e01c

PatchScript: sed 's,@PREFIX@,%p,g' < %a/ccpnmr-py.patch | sed 's,python2.X,python%type_raw[python],g' | patch -p1

CompileScript: <<
#!/bin/sh -ev

export CCPNMR_TOP_DIR=%b

cd $CCPNMR_TOP_DIR/ccpnmr1.0/c

cp environment-opengl.txt environment.txt

if [ %m = "i386" ]; then 
perl -pi -e 's,-mtune=970\s-maltivec,,g' environment.txt
fi

make
make links
<<
InstallScript: <<
mkdir -p %i/bin
cp %b/bin/analysis %i/bin/analysis-py%type_pkg[python]
cp %b/bin/formatConverter %i/bin/formatConverter-py%type_pkg[python]
cp %b/bin/ccpnmr-postupdate %i/bin/ccpnmr-postupdate-py%type_pkg[python]
cp %b/bin/ccpnmr-bytecompile %i/bin/ccpnmr-bytecompile-py%type_pkg[python]

chmod 755 %i/bin/analysis-py%type_pkg[python]
chmod 755 %i/bin/formatConverter-py%type_pkg[python]
chmod 755 %i/bin/ccpnmr-postupdate-py%type_pkg[python]
chmod 755 %i/bin/ccpnmr-bytecompile-py%type_pkg[python]

ln -s %p/bin/analysis-py%type_pkg[python] %i/bin/analysis
ln -s %p/bin/formatConverter-py%type_pkg[python] %i/bin/formatConverter
ln -s %p/bin/ccpnmr-postupdate-py%type_pkg[python] %i/bin/ccpnmr-postupdate
ln -s %p/bin/ccpnmr-bytecompile-py%type_pkg[python] %i/bin/ccpnmr-bytecompile

mkdir -p %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0
cp -r %b/ccpnmr1.0/c %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/
cp -r %b/ccpnmr1.0/python %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/
echo 'ccpnmr/ccpnmr1.0/python' > %i/lib/python%type_raw[python]/site-packages/ccpnmr.pth

cp -r %b/ccpnmr1.0/data %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/
cp -r %b/ccpnmr1.0/model %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/

cp -r %b/ccpnmr1.0/doc %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/
cp -r %b/doc %i/lib/python%type_raw[python]/site-packages/ccpnmr/

mkdir -p %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/python/
cp -r %b/ccpnmr1.0/python/doc %i/lib/python%type_raw[python]/site-packages/ccpnmr/ccpnmr1.0/python/

cd %i/lib/python%type_raw[python]/site-packages; %p/bin/python%type_raw[python] -O %p/lib/python%type_raw[python]/compileall.py ccpnmr/ccpnmr1.0
<<

SplitOff: <<
    Package: ccpnmr-py%type_pkg[python]-bin
    Depends: ccpnmr-py%type_pkg[python]
    Conflicts: ccpnmr-py23-bin, ccpnmr-py24-bin, ccpnmr-py25-bin
    Replaces: ccpnmr-py23-bin, ccpnmr-py24-bin, ccpnmr-py25-bin 
    Files: bin/analysis bin/formatConverter bin/ccpnmr-postupdate bin/ccpnmr-bytecompile
    DocFiles: ccpnmr1.0/license/CCPN.license ccpnmr1.0/license/LGPL.license
<<

DocFiles: ccpnmr1.0/license/CCPN.license ccpnmr1.0/license/LGPL.license

PostInstScript: <<
echo "PLEASE READ THIS CAREFULLY.\
You can look at this information\ 
again by typing the following\ 
in a terminal - \
fink info ccpnmr-py%type_pkg[python]";\
 fink info ccpnmr-py%type_pkg[python]
<<

PostRmScript: <<
if [ "$1" != "upgrade" ]; then
    if [ -d  %p/lib/python%type_raw[python]/site-packages/ccpnmr ]; 
        then rm -r %p/lib/python%type_raw[python]/site-packages/ccpnmr; 
    fi
fi
<<

DescDetail: <<
The CcpNmr software suite is a series of programs for 
macromolecular NMR spectroscopy integrated with the 
CCP data model. The CCP Data Model for macromolecular 
NMR is intended to cover all data needed for macromolecular 
NMR spectroscopy from the initial experimental data to 
the final validation. It serves for exchange of data 
between programs, for storage, data harvesting, and 
database deposition. 
<<
DescUsage: <<
If Fink is properly installed and your environment 
variables, such as PATH, etc. are set properly, you
should be able to run CcpNmr software, after installation,
by calling the command analysis or formatConverter in an 
xterm or terminal window.

After installation, you can't use the same window to run
analysis or formatConverter. You need to use a new xterm
window or terminal window for the path to the commands to
be sourced.

IMPORTANT:
If the upgrade server updates your .c C source file(s),
please run 'ccpnmr-postupdate' in a terminal (from the
command line), to activate your
updates!

You may also be better advised to run 'ccpnmr-bytecompile'
after every update.
<<
<<

 	  	 
