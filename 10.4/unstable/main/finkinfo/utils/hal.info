Package: hal
Version: 0.5.8.1
Revision: 1
Description: Hardware Abstraction Layer
DescDetail: <<
A hardware abstraction layer.
<<
DescPort: <<
Hacked to hell!
<<
Homepage: http://www.freedesktop.org/wiki/Software/hal
License: OSI-Approved
Maintainer: The Gnome Core Team <fink-gnome-core@lists.sourceforge.net>
Depends: <<
	%N-shlibs (= %v-%r),
	daemonic,
	passwd (>= 20070109-11),
	pci-ids,
	python24
<<
BuildDepends: <<
	dbus-dev (>= 1.0-1),
	expat1,
	gettext-tools,
	glib2-dev (>= 2.12.0-1),
	gtk-doc,
	libgettext3-dev,
	libiconv-dev,
	passwd (>= 20070109-11),
	pci-ids,
	pkgconfig (>= 0.21-1),
	python24,
	x11-dev
<<
SetCPPFLAGS: -D__FreeBSD__=5
Source: http://people.freedesktop.org/~david/dist/%n-%v.tar.gz
Source-MD5: 568d7ce9831c18a5e6e502abd6781257
Patch: %n.patch
ConfigureParams: --disable-policy-kit --with-hwdata=%p/share/pci-ids --with-backend=dummy --libexecdir=%p/sbin
CompileScript: <<
	PYTHON=%p/bin/python2.4 ./configure %c
	make
<<
InstallScript: <<
	PYTHON=%p/bin/python2.4 make -j1 install DESTDIR="%d"
	mv %i/share/doc/%N-%v %i/share/doc/%N
<<
SplitOff: <<
	Package: %N-shlibs
	Description: Shared libraries for HAL
	Depends: dbus-shlibs (>= 1.0-1)
	Files: <<
		lib/libhal-storage.*.dylib
		lib/libhal.*.dylib
		share/locale
	<<
	Shlibs: <<
		%p/lib/libhal-storage.1.dylib 2.0.0 %n (>= 0.5-1)
		%p/lib/libhal.1.dylib         2.0.0 %n (>= 0.5-1)
	<<
<<
SplitOff2: <<
	Package: %N-dev
	BuildDependsOnly: true
	Description: Development headers and libraries for HAL
	Depends: %N (= %v-%r)
	Files: include lib/*.dylib lib/*.a lib/*.la lib/pkgconfig share/gtk-doc
<<
DocFiles: AUTHORS COPYING ChangeLog HACKING INSTALL NEWS README
DaemonicFile: <<
	<service>
		<description>HAL Daemon</description>
		<message>HAL Daemon</message>
		<daemon name="%N">
			<executable background="no">%p/sbin/hald</executable>
		</daemon>
	</service>
<<
PostInstScript: <<
	if [ -x "%p/bin/daemonic" ]; then
		%p/bin/daemonic install %N >/dev/null 2>&1 || :
		%p/bin/daemonic enable  %N >/dev/null 2>&1 || :
	fi
<<
PreRmScript: <<
	if [ -x "%p/bin/daemonic" ]; then
		%p/bin/daemonic disable %N >/dev/null 2>&1 || :
		%p/bin/daemonic remove  %N >/dev/null 2>&1 || :
	fi
<<
