Info2: <<
Package: xml-twig-pm%type_pkg[perl]
Version: 3.37
Revision: 1
Architecture: (%type_pkg[perl] = 581) powerpc
Distribution: (%type_pkg[perl] = 581) 10.4, (%type_pkg[perl] = 586) 10.4, (%type_pkg[perl] = 586) 10.5, (%type_pkg[perl] = 5100) 10.5, (%type_pkg[perl] = 5100) 10.6
Replaces: xml-twig-pm (<= 3.14-10), xml-twig-pm560, xml-twig-pm580, xml-twig-pm581, xml-twig-pm586
Depends: <<
	perl%type_pkg[perl]-core,
	encode-pm%type_pkg[perl],
	html-entities-numbered-pm,
	html-parser-pm%type_pkg[perl],
	html-tree-pm%type_pkg[perl] (>= 4.0-1),
	html-tidy-pm%type_pkg[perl],
	libwww-pm%type_pkg[perl],
	scalar-list-utils-pm%type_pkg[perl],
	text-iconv-pm%type_pkg[perl] (>= 1.2-3),
	tie-ixhash-pm,
	xml-parser-pm%type_pkg[perl] (>= 2.31-6),
	xml-xpathengine-pm
<<
BuildDepends: fink (>= 0.20.1-1)
Source: mirror:cpan:authors/id/M/MI/MIROD/XML-Twig-%v.tar.gz
# There is a bug in fink's perl packages which sets perlpath to %p/bin/perl
# instead of %p/bin/perlx.y.z so the tests fail if perlxyz isn't installed
# in addition to perlxyz-core. This patch works around the bug.
PatchScript: <<
  perl -pi -e 's/\$Config{perlpath}/"perl%type_raw[perl]"/g' t/*.t

  # hardcode the desired option
  perl -pi -e 's/\$ARGV\[0\]/"-y"/g' Makefile.PL

  # perl tests aren't getting propagated perl interp flags even if
  # perl's perlpath var is set correctly
  perl -pi -e 's/\$\^X/\$ENV{FULLPERL}/' t/test_autoencoding_conversion.t t/test_errors.t t/test_xml_split.t t/test_xml_split_g.t
  perl -pi -e 's/\$\^X/"\$ENV{FULLPERL}"/' t/tools.pm
  # ...and because it could be a multi-shellword thing, gotta quote
  # it when passed as a command parameter
  perl -pi -e 's/(\$perl.*)(\$perl)/\1"\2"/' t/test_errors.t
<<
InfoTest: <<
  TestDepends: <<
  	unicode-map8-pm%type_pkg[perl],
  	unicode-string-pm%type_pkg[perl],
  	xml-filter-buffertext-pm%type_pkg[perl],
  	xml-sax-writer-pm%type_pkg[perl],
  	xml-simple-pm%type_pkg[perl]
  <<
  TestScript: <<
  #!/bin/sh -ev
    perlversion=%type_raw[perl]
    if dpkg --compare-versions "$perlversion" ">=" "5.10.0" && [ "%m" != "powerpc" ]; then
      export FULLPERL="/usr/bin/arch -%m perl$perlversion"
    else
      export FULLPERL="\$^X"
    fi
    %{default_script}
  <<
<<
InstallScript: <<
#!/bin/sh -ev
  %{default_script}
  mkdir -p %i/lib/perl5/%type_raw[perl]/man
  mv %i/share/man/man3 %i/lib/perl5/%type_raw[perl]/man
  for file in xml_merge xml_split xml_grep xml_pp xml_spellcheck; do
    mv %i/bin/$file %i/bin/$file-%type_pkg[perl]
    mv %i/share/man/man1/$file.1 %i/share/man/man1/$file.1-%type_pkg[perl]
  done
<<
PostInstScript: <<
  update-alternatives \
  --install %p/bin/xml_grep                    xml_grep         %p/bin/xml_grep-%type_pkg[perl] %type_pkg[perl] \
  --slave   %p/bin/xml_pp                      xml_pp           %p/bin/xml_pp-%type_pkg[perl] \
  --slave   %p/bin/xml_spellcheck              xml_spellcheck   %p/bin/xml_spellcheck-%type_pkg[perl] \
  --slave   %p/bin/xml_merge                   xml_merge           %p/bin/xml_merge-%type_pkg[perl] \
  --slave   %p/bin/xml_split                   xml_split           %p/bin/xml_split-%type_pkg[perl] \
  --slave   %p/share/man/man1/xml_grep.1       xml_grep.1       %p/share/man/man1/xml_grep.1-%type_pkg[perl] \
  --slave   %p/share/man/man1/xml_pp.1         xml_pp.1         %p/share/man/man1/xml_pp.1-%type_pkg[perl] \
  --slave   %p/share/man/man1/xml_spellcheck.1 xml_spellcheck.1 %p/share/man/man1/xml_spellcheck.1-%type_pkg[perl] \
  --slave   %p/share/man/man1/xml_merge.1      xml_merge.1       %p/share/man/man1/xml_merge.1-%type_pkg[perl] \
  --slave   %p/share/man/man1/xml_split.1      xml_split.1       %p/share/man/man1/xml_split.1-%type_pkg[perl]
<<
PreRmScript: <<
  update-alternatives --remove xml_grep %p/bin/xml_grep-%type_pkg[perl]
<<
Type: perl (5.8.1 5.8.6 5.8.8 5.10.0)
UpdatePOD: True
Source-MD5: 48cf8942c0e150dbd2d171c93db7a0a1
DocFiles: README Changes
Description: Process huge XML documents in tree mode
DescDetail: <<
A perl module for processing huge XML documents in tree mode.
<<
DescPort: <<
  Justin Hallett - removed make test as it faild do to a perl bug with <DATA>
                   usage and clean up, xml-twig-pm works fine.
  dmacks - fixed -pmXXX orthogonality
  dmacks - more fixes for perl interp used during self-test
<<
License: Artistic/GPL
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
Homepage: http://search.cpan.org/dist/XML-Twig
<<
