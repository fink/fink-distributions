Package: webkit-1.0.2
Version: 1.1.10
Revision: 3

Source: http://webkitgtk.org/webkit-%v.tar.gz
Source-MD5: b852753b3e21f010f565312132f88311

BuildDepends: <<
	atk1 (>= 1.26.0-1),
	cairo (>= 1.8-1),
	enchant1-dev (>= 1.4.2-1),
	expat1,
	fink (>= 0.24.12),
	fontconfig2-dev (>= 2.4.1-1),
	flex-devel,
	freetype219 (>= 2.3.8-2),
	gettext-bin,
	gettext-tools,
	gperf,
	glib2-dev (>= 2.20.0-1),
	glitz,
	gtk-doc (>= 1.11-1),
	gnutls26 (>= 2.8.0-1),
	gtk+2-dev (>= 2.16.0-1),
	intltool40,
	libgcrypt (>= 1.4.3-2),
	libgettext3-dev,
	libgpg-error,
	libiconv-dev,
	libicu32-dev | libicu36-dev,
	libjpeg,
	libpng3,
	libsoup2.4.1-ssl (>= 2.26.0-1),
	libtasn1-3,
	libxml2 (>= 2.6.30-1),
	libxslt,
	pango1-xft2-ft219-dev (>= 1.24.0-1),
	pixman (>= 0.14.0-1),
	pkgconfig (>= 0.23),
	sqlite3-dev,
	x11-dev
<<
Depends: %n-shlibs (= %v-%r)
Conflicts: webkit-1.0.1
Replaces: webkit-1.0.1
BuildDependsOnly: true
GCC: 4.0

PatchFile: %n.patch
PatchFile-MD5: 4bad707429fffc5cfb104be4174daa33
PatchScript: <<
	%{default_script}
	echo "WebKit is open source software with portions licensed under the LGPL, BSD, and APSL licenses. Complete license and copyright information can be found within the code and in the other LICENSE* files." > LICENSE
<<

ConfigureParams: <<
	--disable-dependency-tracking \
	--enable-gtk-doc \
	--disable-video \
	--disable-jit \
	PKG_CONFIG_PATH="%p/lib/fontconfig2/lib/pkgconfig:$PKG_CONFIG_PATH" \
	XT_CFLAGS=" " XT_LIBS=-lXt
<<
NoSetMAKEFLAGS: true
SetMAKEFLAGS: -j1

CompileScript: <<
	#!/bin/sh -ev

	# for new version of flex
	export PATH="%p/lib/flex/bin:$PATH"

	./configure %c
	mkdir DerivedSources
	make
	make -C WebKit/gtk/docs
<<

InstallScript: <<
	make install DESTDIR=%d
	make -C WebKit/gtk/docs install DESTDIR=%d
<<
DocFiles: <<
	ChangeLog
	JavaScriptCore/ChangeLog:ChangeLog.JavaScriptCore
	WebCore/ChangeLog:ChangeLog.WebCore
	WebKit/gtk/ChangeLog:ChangeLog.WebKit.gtk
	WebKit/gtk/po/ChangeLog:ChangeLog.WebKit.gtk.po
	LICENSE
	JavaScriptCore/icu/LICENSE:LICENSE.JavaScriptCore.icu
	WebCore/icu/LICENSE:LICENSE.WebCore.icu
	WebCore/LICENSE-APPLE:LICENSE-LGPL-APPLE.WebCore
	WebCore/LICENSE-LGPL-2:LICENSE-LGPL-2.WebCore
	WebCore/LICENSE-LGPL-2.1:LICENSE-LGPL-2.1.WebCore
	WebKit/LICENSE:LICENSE.WebKit
<<

SplitOff: <<
	Package: %N-shlibs
	Files: lib/libwebkit-1.0.2.dylib
	Depends: <<
		atk1-shlibs (>= 1.26.0-1),
		cairo-shlibs (>= 1.8-1),
		enchant1-shlibs (>= 1.4.2-1),
		expat1-shlibs,
		fontconfig2-shlibs (>= 2.4.1-1),
		freetype219-shlibs (>= 2.3.8-2),
		glib2-shlibs (>= 2.20.0-1),
		glitz-shlibs,
		gnutls26-shlibs (>= 2.8.0-1),
		gtk+2-shlibs (>= 2.16.0-1),
		libgcrypt-shlibs (>= 1.4.3-2),
		libgettext3-shlibs,
		libgpg-error-shlibs,
		libiconv,
		libjpeg-shlibs,
		libpng3-shlibs,
		libsoup2.4.1-ssl-shlibs (>= 2.26.0-1),
		libtasn1-3-shlibs,
		libxml2-shlibs (>= 2.6.30-1),
		libxslt-shlibs,
		pango1-xft2-ft219-shlibs (>= 1.24.0-1),
		pixman-shlibs (>= 0.14.0-1),
		sqlite3-shlibs,
		x11
	<<
	Shlibs: %p/lib/libwebkit-1.0.2.dylib 10.0.0 %n (>= 1.1.10-1)
	DocFiles: <<
		ChangeLog
		JavaScriptCore/ChangeLog:ChangeLog.JavaScriptCore
		WebCore/ChangeLog:ChangeLog.WebCore
		WebKit/gtk/ChangeLog:ChangeLog.WebKit.gtk
		WebKit/gtk/po/ChangeLog:ChangeLog.WebKit.gtk.po
		LICENSE
		JavaScriptCore/icu/LICENSE:LICENSE.JavaScriptCore.icu
		WebCore/icu/LICENSE:LICENSE.WebCore.icu
		WebCore/LICENSE-APPLE:LICENSE-APPLE.WebCore
		WebCore/LICENSE-LGPL-2:LICENSE-LGPL-2.WebCore
		WebCore/LICENSE-LGPL-2.1:LICENSE-LGPL-2.1.WebCore
		WebKit/LICENSE:LICENSE.WebKit
	<<
<<

DescPackaging: <<
	Use webkitgtk upstream so we get stable release versioning and
	a complete source distro with autotools, etc.

	Disable video to avoid gst* dep-chain.

	Force use of libtool instead of dolt (would only use dolt on
	intel anyway, better to have consistent build on all platforms
	for packaging).

	Make gettext domain match versioned lib.

	webkit_web_view_open() can break on local paths (workaround in
	devhelp-0.23-2). See:
	https://bugs.webkit.org/show_bug.cgi?id=26588
<<
DescPort: <<
	fink's libicuXX-dev are just headers and lib-links for apple's
	libicu library and only the "correct" one is available for
	each OS X version, so libversion-alternatives will "work
	correctly" on the local machine at build-time (and we assume
	that apple's libs are backward-compatible). But hack configure
	to use system icu instead of onboard lib.

	If --disable-dependency-tracking, DerivedSources/Lexer.lut.h
	is used as target of STDOUT redirect of create_hash_table
	script before DerivedSources/ exists (it can be created by
	that script, but that's too late!). If dependency-tracking
	enabled, dir is created during depfiles or similar mechanism
	prior to trying to create a file in it. See:
	http://bugs.gentoo.org/show_bug.cgi?format=multiple&id=269765

	Need XP_UNIX so that npapi.h doesn't load QuickDraw (we're
	doing x11, not native Mac). See:
	https://bugs.webkit.org/show_bug.cgi?id=17001

	JIT is automatically disabled on some fink platforms (ppc?)
	and automatically enabled but fails to compile (unimplemented
	internal code) on others (x86_64?), so just scrap it
	altogether for simplicity.
<<

DescDetail: <<
	Various parts are licensed under LGPL, BSD, and APSL
<<
Description: Web browser engine based on khtml/kjs
License: OSI-Approved
Homepage: http://webkitgtk.org
Maintainer: Daniel Macks <dmacks@netspace.org>
