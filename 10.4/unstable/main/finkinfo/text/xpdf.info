Package: xpdf
Version: 3.02
Revision: 1001
GCC: 4.0
Source: ftp://www.foolabs.com/pub/%n/%n-%v.tar.gz
Source-MD5: 599dc4cc65a07ee868cf92a667a913d2
Depends: x11, ghostscript-fonts, t1lib5-shlibs, openmotif3-shlibs, libpaper1-shlibs
BuildDepends: t1lib5, openmotif3, x11-dev, libpaper1-dev
Conflicts: poppler-bin
Replaces: poppler-bin
PatchScript: <<
	sed 's|@PREFIX@|%p|g' < %a/%n.patch | patch -p1

	perl -pi -e 's/(CXXFLAGS =)( \@CXXFLAGS\@)(.*)/\1\3\2/' */Makefile.in

	perl -pi -e 's/-L(\$\(GOOLIBDIR\)) -l(Goo)/\1\/lib\2.a/' */Makefile.in
	perl -pi -e 's/-L(\$\(FOFILIBDIR\)) -l(fofi)/\1\/lib\2.a/' */Makefile.in
	perl -pi -e 's/-L(\$\(SPLASHLIBDIR\)) -l(splash)/\1\/lib\2.a/' */Makefile.in

	perl -pi -e 's/\$\(CXXFLAGS\)// if /LDFLAGS/' xpdf/Makefile.in
<<
SetCXXFLAGS: -I%p/include
SetCPPFLAGS: -I/usr/X11R6/include
SetLDFLAGS: -L/usr/X11R6/lib
ConfigureParams: <<
	--mandir=%p/share/man \
	--with-freetype2-includes=/usr/X11R6/include/freetype2 --with-freetype2-library=/usr/X11R6/lib \
	--enable-a4-paper
<<
InstallScript: make install DESTDIR=%d
DescPort: <<
	Put global -I after local ones.

	Use paths to convenience libs instead of using -L and -l to
	search for them.

	Don't bother passing compiler flags to the linker.
<<
Description: Portable Document Format (PDF) file viewer
License: GPL
DocFiles: README ANNOUNCE CHANGES COPYING
Maintainer: None <fink-devel@lists.sourceforge.net>
Homepage:  http://www.foolabs.com/xpdf
