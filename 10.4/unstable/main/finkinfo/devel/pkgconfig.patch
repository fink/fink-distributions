diff -Nurd -x'*~' pkg-config-0.23.orig/check/Makefile.in pkg-config-0.23/check/Makefile.in
--- pkg-config-0.23.orig/check/Makefile.in	2008-01-16 17:52:30.000000000 -0500
+++ pkg-config-0.23/check/Makefile.in	2008-09-25 01:25:18.000000000 -0400
@@ -149,7 +149,7 @@
 target_alias = @target_alias@
 
 TESTS = check-cflags check-libs check-define-variable	\
-	check-libs-private check-requires-private check-includedir
+	check-libs-private check-includedir
 
 
 EXTRA_DIST = $(TESTS) common simple.pc requires-test.pc public-dep.pc	\
diff -Nurd -x'*~' pkg-config-0.23.orig/configure pkg-config-0.23/configure
--- pkg-config-0.23.orig/configure	2008-01-16 17:52:31.000000000 -0500
+++ pkg-config-0.23/configure	2008-09-25 01:25:18.000000000 -0400
@@ -20225,7 +20225,11 @@
 # Check whether --with-installed-glib was given.
 if test "${with_installed_glib+set}" = set; then
   withval=$with_installed_glib;
-    if test x$withval = xyes; then
+    if test x$withval = xglib1; then
+	GLIB_CFLAGS='`${bindir}/glib-config --cflags`'
+	GLIB_LIBS='`${bindir}/glib-config --libs`'
+	use_installed_glib=yes
+    elif test x$withval = xglib2; then
       # Not on Win32, but the user requested to use the installed Glib-2.x,
       # therefore we may assume that (some older version of) pkg-config can
       # be found in the users PATH (otherwise we simply ignore the request).
diff -Nurd -x'*~' pkg-config-0.23.orig/pc-resort pkg-config-0.23/pc-resort
--- pkg-config-0.23.orig/pc-resort	1969-12-31 19:00:00.000000000 -0500
+++ pkg-config-0.23/pc-resort	2008-09-25 01:25:18.000000000 -0400
@@ -0,0 +1,51 @@
+#!/usr/bin/perl
+
+use warnings;
+use strict;
+
+use constant FINK_PREFIX => '@PREFIX@';
+use constant PKG_CONFIG => '@PREFIX@/bin/pkg-config.real';
+
+open my $pc_program, '-|', PKG_CONFIG, @ARGV
+    or die "$0: failed to open actual pkg-config process (".PKG_CONFIG."): $!\n";
+while (defined ($_=<$pc_program>) ) {
+    print &resort($_);
+}
+close $pc_program;
+my $rc = $? >> 8;
+exit $rc;
+
+sub resort {
+    my $line = shift;
+
+    # skip obvious pkg-config diagnostics (iff --errors-to-stdout)
+    return $line if /^\s/;
+
+    # if no flags, then nothing to resort
+    return $line unless /(\a|\s)-/;
+
+    chomp $line;
+
+    # for teasing apart the -I nd -L flag lists
+    my @flags_special;		# unusual places that mask fink
+    my @flags_fink;		# %p (masks apple and x11)
+    my @flags_system;		# apple and x11
+    my @flags_other;		# flags other than -I or -L
+
+    #for now, don't try to handle quotes/embedded-whitespace paths
+    foreach (split /\s+/, $line) {
+	# figure out the priority of each -I or -L flag
+	if (/^-[IL]FINK_PREFIX/) {
+	    push @flags_fink, $_;
+	} elsif (/^-[IL](\/usr\/lib|\/usr\/include|\/usr\/X11)/) {
+	    push @flags_system, $_;
+	} elsif (/^-[IL]/) {
+	    push @flags_special, $_;
+	} else {
+	    push @flags_other, $_;
+	}
+    }
+ 
+    my $sane_line = join ' ', @flags_special, @flags_fink, @flags_system, @flags_other;
+    return $sane_line . "\n";
+}
