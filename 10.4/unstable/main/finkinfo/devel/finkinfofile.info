Package: finkinfofile
Version: 1.4
Revision: 1
Description: Spotlight importer for Fink .info files
DescDetail: <<
	Run the command "sudo finkinfofile install" to install the importer
	into /Library/Spotlight and begin indexing your .info files.
	
	"sudo finkinfofile remove" will uninstall the importer.
	
	The following metadata are currently indexed (in addition to
	the plain text content, but searching metadata is faster than content):
	
	Title = Package
	Authors = Maintainer
	Email addresses = Maintainer
	Description = Description
	Instructions = DescDetail
	Version = Epoch:Version-Revision
	
	1.4: Now recognizes new InfoTest field.
<<
License: GPL
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
Homepage: http://homepage.mac.com/danielj7/index.html

Source: http://homepage.mac.com/danielj7/%n-%v.tar.bz2
Source-MD5: e435e576ba5d08bd00650849e5bc7386

CompileScript: <<
	#!/bin/bash -ev
	
	xcodeversion=`defaults read /Developer/Applications/Xcode.app/Contents/Info CFBundleShortVersionString`
	if [ $xcodeversion = '2.0' ]; then
		echo 'This package requires Xcode 2.1 or later.'
		exit 1
	fi
	
	xcodebuild -target FinkInfoFile-%m -configuration Deployment
<<

InstallScript: <<
	#!/bin/bash -ev
	
	/bin/mkdir -p %i/lib/%n
	/bin/cp -R build/Deployment/FinkInfoFile.mdimporter %i/lib/%n/FinkInfoFile.mdimporter
	/bin/mkdir -p %i/bin
	sed -e 's,@PREFIX@,%p,g' finkinfofile.in >%i/bin/finkinfofile
	/bin/chmod +x %i/bin/finkinfofile
<<

DocFiles: README.txt LICENSE

PreRmScript: <<
	if [ $1 != "upgrade" ]; then
		finkinfofile remove
	fi
<<
