Package: pkgconfig
Version: 0.20
Revision: 1
#Source: mirror:gnome:sources/%n/0.18/%n-%v.tar.bz2
Source: http://pkgconfig.freedesktop.org/releases/pkg-config-%v.tar.gz
Source-MD5: fb42402593e4198bc252ab248dd4158b
SourceDirectory: pkg-config-%v
Depends: glib-shlibs (>= 1.2.8)
BuildDepends: glib (>= 1.2.8)
Patch: %n.patch
PatchScript: <<
  mv glib-1.2.8 glib-1.2.8_UNUSED
<<
SetCPPFLAGS: -no-cpp-precomp
SetCFLAGS: -O3 -fstrict-aliasing -funroll-loops
ConfigureParams: --mandir=%p/share/man --with-pc-path=/usr/X11R6/lib/pkgconfig:%p/lib/pkgconfig --disable-dependency-tracking
# --enable-indirect-deps
CompileScript: <<
  ./configure %c
  make
  make check || true
<<
InstallScript: make install DESTDIR=%d
DocFiles: AUTHORS COPYING ChangeLog NEWS README
Description: Manager for library compile/link flags
DescDetail: <<
pkg-config is a script to make putting together all the build
flags when compiling/linking a lot easier.
<<
DescPort: <<
  X11 provides some .pc files in /usr/X11R6/lib/pkgconfig, so this
  directory was added to default search path.

  Default search is now (0.17.2) %p/lib/pkgconfig:%p/share/pkgconfig,
  however, the previous version of this package (0.15.0) used lib/ not
  share/. We adjust the search paths to maintain the old behavior for
  drop-in compatibility.

  Starting with 0.17.2, Link to Fink's glib pkg instead of static-link
  to included glib-1.2.8 since we have newer and better-OSX-tweaked
  glib than that now.

  The *.private fields don't appear to be handled correctly, so we
  can't go to >= 0.18. Nobody seems to even know how they *should* be
  handled when one uses --enable-indirect-deps, and the current
  implementation and test suite aren't even self-consistent. Upstream
  seems rather disinterested in solving this mess. See:
  https://bugs.freedesktop.org/show_bug.cgi?id=3809

  According to parse.c, .private should be included for this case:
    Private libraries are libraries which are needed [...] on
    platforms not supporting inter-library dependencies.
  so patch check-libs to include Libs.private from simple.pc

  Omitting --enable-indirect-deps gives a binary that gives identical
  results for --libs and --cflags for the fink-supplied pkgconfig/*.pc
  collection as 0.17.2-2 (with --enable-indirect-deps), including ones
  that have Requires and ones that have .private fields. The binary
  still fails some tests (appears to do depth- first recursing through
  Requires but expects breadth-first).
<<
License: GPL
Maintainer: Daniel Macks <dmacks@netspace.org>
DescPackaging: <<
  Originally packaged by Masanori Sekino (until 0.15.0).
<<
Homepage: http://pkgconfig.freedesktop.org/wiki
