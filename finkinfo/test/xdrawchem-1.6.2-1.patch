diff -ruN xdrawchem-1.6.2.orig/xdrawchem/Makefile.in xdrawchem-1.6.2/xdrawchem/Makefile.in
--- xdrawchem-1.6.2.orig/xdrawchem/Makefile.in	2002-12-15 13:53:51.000000000 -0700
+++ xdrawchem-1.6.2/xdrawchem/Makefile.in	2002-12-20 23:06:15.000000000 -0700
@@ -85,10 +85,10 @@
 
 bin_PROGRAMS = xdrawchem
 xdrawchem_SOURCES = application.cpp application_ring.cpp arrow.cpp bond.cpp bondedit.cpp bracket.cpp cdx2cdxml.cpp cdxml_reader.cpp chemdata.cpp chemdata_cdx.cpp chemdata_cdxml.cpp chemdata_cml.cpp chemdata_edit.cpp chemdata_mdl.cpp chemdata_rw.cpp chemdata_rxn.cpp chemdata_tools.cpp chemdata_xdc.cpp chemdata_xml.cpp crings_dialog.cpp curvearrow.cpp drawable.cpp fixeddialog.cpp graphdialog.cpp graphwidget.cpp helpwindow.cpp main.cpp molecule.cpp molecule_1h_nmr.cpp molecule_smiles.cpp molecule_tools.cpp molinfodialog.cpp myfiledialog.cpp namer.cpp netaccess.cpp netchoosedialog.cpp netdialog.cpp pagesetupdialog.cpp peptidebuilder.cpp previewwidget.cpp render2d.cpp render2d_draw.cpp render2d_event.cpp render2d_print.cpp render2d_select.cpp render2d_text.cpp ringdialog.cpp sdg.cpp smilesdialog.cpp symbol.cpp text.cpp xdc_toolbutton.cpp xml_cml.cpp xml_reader.cpp ioiface.cpp application_ob.cpp chemdata_event.cpp
-xdrawchem_LDADD = -L$(QTDIR)/lib -L/usr/X11R6/lib/qt -L/usr/lib/qt -l$(qtlibname) -L../openbabel -lopenbabel 
+xdrawchem_LDADD = $(QTDIR)/lib/libopenbabel.a -L$(QTDIR)/lib -l$(qtlibname) 
 EXTRA_DIST = . aa_xpm.h application.h arrow.h arrows.h atom.h bond.h bondedit.h boshcp.h bracket.h brackets.h ccw180.xpm ccw270.xpm ccw90.xpm cdxml_reader.h chemdata.h clipboard.h cml.h crings_dialog.h curvearrow.h cw180.xpm cw270.xpm cw90.xpm defs.h dpoint.h drawable.h fixeddialog.h graphdata.h graphdialog.h graphwidget.h http.h lines.h moldata.h molecule.h molecule_sssr.h molinfodialog.h myfiledialog.h na_xpm.h namer.h netaccess.h netchoosedialog.h netdialog.h pagesetupdialog.h paintable.h peptidebuilder.h prefs.h previewwidget.h render2d.h ring.h ring_xpm.h ringdialog.h rotatecursor.xpm sdg.h setofrings.h skullcursor.xpm smilesdialog.h sugar_xpm.h symbol.h symbol_xpm.h text.h xdc_toolbutton.h xml_cml.h xml_reader.h
 xdrawchem_METASOURCES =  application.moc.cpp arrow.moc.cpp bondedit.moc.cpp bond.moc.cpp bracket.moc.cpp chemdata.moc.cpp crings_dialog.moc.cpp curvearrow.moc.cpp drawable.moc.cpp fixeddialog.moc.cpp graphdialog.moc.cpp graphwidget.moc.cpp helpwindow.moc.cpp http.moc.cpp molecule.moc.cpp molinfodialog.moc.cpp myfiledialog.moc.cpp netaccess.moc.cpp netchoosedialog.moc.cpp netdialog.moc.cpp pagesetupdialog.moc.cpp peptidebuilder.moc.cpp previewwidget.moc.cpp render2d.moc.cpp ringdialog.moc.cpp smilesdialog.moc.cpp symbol.moc.cpp text.moc.cpp xdc_toolbutton.moc.cpp 
-CPPFLAGS = -I/usr/X11R6/include -I$(QTDIR)/include -I/usr/X11R6/include/qt -I../openbabel -DUNIX -DRINGHOME="\"$(pkgdatadir)/\"" -DXDC_SERVER=\"herger.ibb.gatech.edu\"
+CPPFLAGS = -I/usr/X11R6/include -I$(QTDIR)/include/qt -I$(QTDIR)/include -I/usr/X11R6/include/qt -I../openbabel -DUNIX -DRINGHOME="\"$(pkgdatadir)/\"" -DXDC_SERVER=\"herger.ibb.gatech.edu\"
 CXXFLAGS = -g
 MOC = moc
 subdir = xdrawchem
diff -ruN xdrawchem-1.6.2.orig/xdrawchem/application_ob.cpp xdrawchem-1.6.2/xdrawchem/application_ob.cpp
--- xdrawchem-1.6.2.orig/xdrawchem/application_ob.cpp	2002-12-06 14:17:01.000000000 -0700
+++ xdrawchem-1.6.2/xdrawchem/application_ob.cpp	2002-12-20 16:07:12.000000000 -0700
@@ -8,7 +8,9 @@
 #include <iostream>
 #include <fstream>
 #include <string.h>
-#include <malloc.h>
+#ifndef __APPLE__ && __GNUC__
+# include <malloc.h>
+#endif
 
 using std::cout;
 using std::endl;
