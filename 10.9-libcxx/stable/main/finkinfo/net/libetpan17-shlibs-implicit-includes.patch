diff -Nurd libetpan-1.7.orig/configure.ac libetpan-1.7/configure.ac
--- libetpan-1.7.orig/configure.ac	2016-04-25 22:28:46
+++ libetpan-1.7/configure.ac	2025-12-04 01:07:46
@@ -594,7 +594,7 @@
   AC_CHECK_HEADER(curl/curl.h, [libcurl=yes])
   if test "x$libcurl" = "xyes"; then
       AC_MSG_CHECKING([whether with-curl compiles and links fine])
-      AC_TRY_LINK([], [curl_easy_init();], [libcurl=yes], [libcurl=no])
+      AC_TRY_LINK([#include <curl/curl.h>], [curl_easy_init();], [libcurl=yes], [libcurl=no])
       AC_MSG_RESULT([$libcurl])
   fi
    if test "x$libcurl" = "xno"; then
@@ -610,7 +610,7 @@
           AC_MSG_CHECKING([whether curl-config hints compiles and links fine])
           OLDFLAGS="$LDFLAGS"
           LDFLAGS="$LDFLAGS `$libcurlconfig --libs 2>/dev/null`"
-          AC_TRY_LINK([], [curl_easy_init();], [libcurl=yes], [libcurl=no])
+          AC_TRY_LINK([#include <curl/curl.h>], [curl_easy_init();], [libcurl=yes], [libcurl=no])
           AC_MSG_RESULT([$libcurl])
           if test "x$libcurl" = "xno"; then
               LDFLAGS="$OLDFLAGS"
@@ -652,7 +652,7 @@
   AC_CHECK_HEADER(expat.h, [libexpat=yes])
   if test "x$libexpat" = "xyes"; then
       AC_MSG_CHECKING([whether with-expat compiles and links fine])
-      AC_TRY_LINK([], [XML_SetElementHandler();], [libexpat=yes], [libexpat=no])
+      AC_TRY_LINK([#include <expat.h>], [XML_SetElementHandler(0,0,0);], [libexpat=yes], [libexpat=no])
       AC_MSG_RESULT([$libexpat])
   fi
    if test "x$libexpat" = "xno"; then
@@ -665,7 +665,7 @@
     AC_MSG_CHECKING([whether libexpat compiles and links fine])
     OLDFLAGS="$LDFLAGS"
     LDFLAGS="$LDFLAGS -lexpat"
-    AC_TRY_LINK([], [XML_SetElementHandler();], [libexpat=yes], [libexpat=no])
+    AC_TRY_LINK([#include <expat.h>], [XML_SetElementHandler(0,0,0);], [libexpat=yes], [libexpat=no])
     AC_MSG_RESULT([$libexpat])
     if test "x$libexpat" = "xno"; then
       LDFLAGS="$OLDFLAGS"
