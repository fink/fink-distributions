diff -Nurd mongodb-src-r2.4.14-orig/SConstruct mongodb-src-r2.4.14/SConstruct
--- mongodb-src-r2.4.14-orig/SConstruct	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/SConstruct	2018-05-06 23:32:40.000000000 -0400
@@ -512,20 +512,8 @@
     darwin = True
     platform = "osx" # prettier than darwin
 
-    if env["CXX"] is None:
-        if os.path.exists( "/usr/bin/g++-4.2" ):
-            env["CXX"] = "g++-4.2"
-
     nix = True
-
-    if force64:
-       env.Append( EXTRACPPPATH=["/usr/64/include"] )
-       env.Append( EXTRALIBPATH=["/usr/64/lib"] )
-       if installDir == DEFAULT_INSTALL_DIR:
-           installDir = "/usr/64/"
-    else:
-       env.Append( EXTRACPPPATH=filterExists(["/sw/include" , "/opt/local/include"]) )
-       env.Append( EXTRALIBPATH=filterExists(["/sw/lib/", "/opt/local/lib"]) )
+    env.MergeFlags( [ os.getenv("CPPFLAGS"), os.getenv("LDFLAGS") ] )
 
 elif os.sys.platform.startswith("linux"):
     linux = True
@@ -710,6 +698,8 @@
                          "-Wall",
                          "-Wsign-compare",
                          "-Wno-unknown-pragmas",
+                         "-Wno-unused-private-field",
+                         "-Wno-unused-local-typedef",
                          "-Winvalid-pch"] )
     # env.Append( " -Wconversion" ) TODO: this doesn't really work yet
     if linux:
@@ -886,7 +876,7 @@
     elif get_option('allocator') == 'system':
         pass
     else:
-        print "Invalid --allocator parameter: \"%s\"" % get_option('allocator')
+        print( "Invalid --allocator parameter: \"%s\"" % get_option('allocator') )
         Exit(1)
 
     if has_option("heapcheck"):
@@ -1156,7 +1146,7 @@
     filenames = [x for x in filenames if x.startswith(prefix)]
     to_keep = [x for x in filenames if x.endswith(".tgz") or x.endswith(".zip")][-2:]
     for filename in [x for x in filenames if x not in to_keep]:
-        print "removing %s" % filename
+        print( "removing %s" % filename )
         try:
             shutil.rmtree(filename)
         except:
diff -Nurd mongodb-src-r2.4.14-orig/distsrc/client/SConstruct mongodb-src-r2.4.14/distsrc/client/SConstruct
--- mongodb-src-r2.4.14-orig/distsrc/client/SConstruct	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/distsrc/client/SConstruct	2018-05-06 17:00:34.000000000 -0400
@@ -62,7 +62,7 @@
 darwin = False
 
 if "darwin" == sys.platform:
-    addExtraLibs( "/opt/local/" )
+    addExtraLibs( "@FINK_PREFIX@/" )
     nix = True
     darwin = True
 elif sys.platform in ("linux2", "linux3"):
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/SConscript mongodb-src-r2.4.14/src/mongo/SConscript
--- mongodb-src-r2.4.14-orig/src/mongo/SConscript	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/SConscript	2018-05-06 17:10:16.000000000 -0400
@@ -814,7 +814,7 @@
 module_banner_filenames = set([f.name for f in env['MODULE_BANNERS']])
 if not len(module_banner_filenames) == len(env['MODULE_BANNERS']):
     # TODO: Be nice and identify conflicts in error.
-    print "ERROR: Filename conflicts exist in module banners."
+    print( "ERROR: Filename conflicts exist in module banners." )
     Exit(-1)
 
 # Build a set of directories containing module banners, and use that
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/client/connpool.h mongodb-src-r2.4.14/src/mongo/client/connpool.h
--- mongodb-src-r2.4.14-orig/src/mongo/client/connpool.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/client/connpool.h	2018-05-06 17:22:25.000000000 -0400
@@ -301,7 +301,7 @@
             return _conn;
         }
 
-        bool ok() const { return _conn > 0; }
+        bool ok() const { return _conn != 0; }
 
         string getHost() const { return _host; }
 
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/db/client.h mongodb-src-r2.4.14/src/mongo/db/client.h
--- mongodb-src-r2.4.14-orig/src/mongo/db/client.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/db/client.h	2018-05-06 23:22:47.000000000 -0400
@@ -243,6 +243,6 @@
     inline Client::GodScope::~GodScope() { cc()._god = _prev; }
 
 
-    inline bool haveClient() { return currentClient.get() > 0; }
+    inline bool haveClient() { return currentClient.get() != 0; }
 
 };
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/db/fts/fts_matcher.cpp mongodb-src-r2.4.14/src/mongo/db/fts/fts_matcher.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/db/fts/fts_matcher.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/db/fts/fts_matcher.cpp	2018-05-06 23:56:13.000000000 -0400
@@ -117,7 +117,7 @@
                 if ( t.type != Token::TEXT )
                     continue;
                 string word = tolowerString( _stemmer.stem( t.data ) );
-                if ( _query.getNegatedTerms().count( word ) > 0 )
+                if ( _query.getNegatedTerms().count( word ) != 0 )
                     return true;
             }
             return false;
@@ -230,7 +230,7 @@
          * @param haystack, raw string to be parsed
          */
         bool FTSMatcher::_phraseMatches( const string& phrase, const string& haystack ) const {
-            return strcasestr( haystack.c_str(), phrase.c_str() ) > 0;
+            return strcasestr( haystack.c_str(), phrase.c_str() ) != 0;
         }
 
 
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/db/fts/stemmer.cpp mongodb-src-r2.4.14/src/mongo/db/fts/stemmer.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/db/fts/stemmer.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/db/fts/stemmer.cpp	2018-05-06 17:00:34.000000000 -0400
@@ -17,6 +17,7 @@
 */
 
 #include <string>
+#include <cstdlib>
 
 #include "mongo/db/fts/stemmer.h"
 
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/db/namespace.h mongodb-src-r2.4.14/src/mongo/db/namespace.h
--- mongodb-src-r2.4.14-orig/src/mongo/db/namespace.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/db/namespace.h	2018-05-06 22:44:12.000000000 -0400
@@ -31,7 +31,7 @@
         Namespace(const StringData& ns) { *this = ns; }
         Namespace& operator=(const StringData& ns);
 
-        bool hasDollarSign() const { return strchr( buf , '$' ) > 0;  }
+        bool hasDollarSign() const { return strchr( buf , '$' ) != 0;  }
         void kill() { buf[0] = 0x7f; }
         bool operator==(const char *r) const { return strcmp(buf, r) == 0; }
         bool operator==(const Namespace& r) const { return strcmp(buf, r.buf) == 0; }
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/db/ops/update_internal.cpp mongodb-src-r2.4.14/src/mongo/db/ops/update_internal.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/db/ops/update_internal.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/db/ops/update_internal.cpp	2018-05-06 23:13:05.000000000 -0400
@@ -1425,7 +1425,7 @@
                     continue;
                 }
 
-                _hasDynamicArray = _hasDynamicArray || strstr( fieldName , ".$" ) > 0;
+                _hasDynamicArray = _hasDynamicArray || strstr( fieldName , ".$" ) != 0;
 
                 Mod m;
                 m.init( op , f , forReplication );
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/db/pdfile.cpp mongodb-src-r2.4.14/src/mongo/db/pdfile.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/db/pdfile.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/db/pdfile.cpp	2018-05-07 11:29:51.000000000 -0400
@@ -30,6 +30,7 @@
 #include <algorithm>
 #include <boost/filesystem/operations.hpp>
 #include <boost/optional/optional.hpp>
+#include <boost/utility/in_place_factory.hpp>
 #include <list>
 
 #include "mongo/base/counter.h"
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/dbtests/documentsourcetests.cpp mongodb-src-r2.4.14/src/mongo/dbtests/documentsourcetests.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/dbtests/documentsourcetests.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/dbtests/documentsourcetests.cpp	2018-05-06 17:00:34.000000000 -0400
@@ -583,7 +583,7 @@
         };
 
         struct ValueCmp {
-            bool operator()(const Value& a, const Value& b) {
+            bool operator()(const Value& a, const Value& b) const {
                 return Value::compare( a, b ) < 0;
             }
         };
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/dbtests/jsobjtests.cpp mongodb-src-r2.4.14/src/mongo/dbtests/jsobjtests.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/dbtests/jsobjtests.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/dbtests/jsobjtests.cpp	2018-05-07 00:37:16.000000000 -0400
@@ -1894,7 +1894,7 @@
                 }
                 catch ( std::exception& e ) {
                     state = 2;
-                    ASSERT( strstr( e.what() , "_id: 5" ) > 0 );
+                    ASSERT( strstr( e.what() , "_id: 5" ) != 0 );
                 }
                 free( crap );
                 ASSERT_EQUALS( 2 , state );
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/platform/unordered_map.h mongodb-src-r2.4.14/src/mongo/platform/unordered_map.h
--- mongodb-src-r2.4.14-orig/src/mongo/platform/unordered_map.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/platform/unordered_map.h	2018-05-06 17:00:34.000000000 -0400
@@ -18,7 +18,8 @@
 // NOTE(acm): Before gcc-4.7, __cplusplus is always defined to be 1,
 // so we can't reliably detect C++11 support by exclusively checking
 // the value of __cplusplus.
-#if __cplusplus >= 201103L || defined(__GXX_EXPERIMENTAL_CXX0X__)
+//#if __cplusplus >= 201103L || defined(__GXX_EXPERIMENTAL_CXX0X__)
+#if 1
 
 #include <unordered_map>
 
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/platform/unordered_set.h mongodb-src-r2.4.14/src/mongo/platform/unordered_set.h
--- mongodb-src-r2.4.14-orig/src/mongo/platform/unordered_set.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/platform/unordered_set.h	2018-05-06 17:00:34.000000000 -0400
@@ -18,7 +18,8 @@
 // NOTE(acm): Before gcc-4.7, __cplusplus is always defined to be 1,
 // so we can't reliably detect C++11 support by exclusively checking
 // the value of __cplusplus.
-#if __cplusplus >= 201103L || defined(__GXX_EXPERIMENTAL_CXX0X__)
+//#if __cplusplus >= 201103L || defined(__GXX_EXPERIMENTAL_CXX0X__)
+#if 1
 
 #include <unordered_set>
 
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/s/d_state.cpp mongodb-src-r2.4.14/src/mongo/s/d_state.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/s/d_state.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/s/d_state.cpp	2018-05-06 23:14:41.000000000 -0400
@@ -418,7 +418,7 @@
         if ( ! shardingState.hasVersion( ns ) )
             return false;
 
-        return ShardedConnectionInfo::get(false) > 0;
+        return ShardedConnectionInfo::get(false) != 0;
     }
 
     class UnsetShardingCommand : public MongodShardCommand {
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/s/shard.h mongodb-src-r2.4.14/src/mongo/s/shard.h
--- mongodb-src-r2.4.14-orig/src/mongo/s/shard.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/s/shard.h	2018-05-06 17:22:50.000000000 -0400
@@ -283,7 +283,7 @@
             _finishedInit = true;
         }
         
-        bool ok() const { return _conn > 0; }
+        bool ok() const { return _conn != 0; }
 
         /**
            this just passes through excpet it checks for stale configs
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/shell/linenoise_utf8.h mongodb-src-r2.4.14/src/mongo/shell/linenoise_utf8.h
--- mongodb-src-r2.4.14-orig/src/mongo/shell/linenoise_utf8.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/shell/linenoise_utf8.h	2018-05-07 11:00:14.000000000 -0400
@@ -17,6 +17,7 @@
 
 #include <boost/smart_ptr/scoped_array.hpp>
 #include <string.h>
+#include <algorithm>
 
 namespace linenoise_utf8 {
 
diff -Nurd mongodb-src-r2.4.14-orig/src/mongo/util/compress.cpp mongodb-src-r2.4.14/src/mongo/util/compress.cpp
--- mongodb-src-r2.4.14-orig/src/mongo/util/compress.cpp	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/mongo/util/compress.cpp	2018-05-06 17:00:34.000000000 -0400
@@ -18,7 +18,7 @@
 
 #include "mongo/util/compress.h"
 
-#include "third_party/snappy/snappy.h"
+#include <snappy.h>
 
 namespace mongo {
 
diff -Nurd mongodb-src-r2.4.14-orig/src/third_party/s2/hash.h mongodb-src-r2.4.14/src/third_party/s2/hash.h
--- mongodb-src-r2.4.14-orig/src/third_party/s2/hash.h	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/third_party/s2/hash.h	2018-05-06 17:00:34.000000000 -0400
@@ -7,13 +7,8 @@
 #include "mongo/platform/unordered_set.h"
 #define hash_set mongo::unordered_set
 
-#if defined OS_LINUX || defined OS_MACOSX || defined __sunos__ || defined __freebsd__
-#define HASH_NAMESPACE_START namespace std { namespace tr1 {
-#define HASH_NAMESPACE_END }}
-#elif defined OS_WINDOWS
 #define HASH_NAMESPACE_START namespace std {
 #define HASH_NAMESPACE_END }
-#endif
 
 // Places that hash-related functions are defined:
 // end of s2cellid.h for hashing on S2CellId
diff -Nurd mongodb-src-r2.4.14-orig/src/third_party/v8/SConscript mongodb-src-r2.4.14/src/third_party/v8/SConscript
--- mongodb-src-r2.4.14-orig/src/third_party/v8/SConscript	2015-04-27 12:18:57.000000000 -0400
+++ mongodb-src-r2.4.14/src/third_party/v8/SConscript	2018-05-06 17:00:34.000000000 -0400
@@ -47,9 +47,9 @@
   'gcc': {
     'all': {
       'CCFLAGS':      ['-Wall',
-                       '-Werror',
                        '-W',
                        '-Wno-unused-parameter',
+                       '-Wno-unused-private-field',
                        '-Woverloaded-virtual',
                        '-Wnon-virtual-dtor']
     },
