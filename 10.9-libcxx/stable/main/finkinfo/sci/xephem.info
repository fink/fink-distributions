# -*- coding: ascii; tab-width: 4; x-counterpart: xephem.patch -*-
Info2: <<
Package: xephem
Version: 4.2.0
Revision: 1
BuildDepends: <<
	fink-buildenv-modules,
	fink-package-precedence,
	groff,
	libpng16,
	libxt,
	openmotif4-2level,
	openssl300-dev,
	x11-dev
<<
Depends: <<
	libpng16-shlibs,
	libxt-shlibs,
	openmotif4-2level-shlibs,
	openssl300-shlibs,
	x11-shlibs
<<
Source: https://github.com/XEphem/XEphem/archive/refs/tags/%v.tar.gz
SourceRename: XEphem-%v.tar.gz
Source-Checksum: SHA256(4d67b923e342e56b2a4a49f574e576fc183f1747edb693bab3709e83c8ad9c1b)

PatchFile: %n.patch
PatchFile-MD5: 95d5e5aa72afec7a1fcb73e1598e28f2
PatchScript: <<
#!/bin/sh -ev
. %p/sbin/fink-buildenv-helper.sh
sed 's|@FINK_PREFIX@|%p|g' <%{PatchFile} | patch -p1
find . -name Makefile | xargs perl -pi -e "s|/usr/X11R6|$X11_BASE_DIR|g"
<<
UseMaxBuildJobs: False
SetCPPFLAGS: -MD
CompileScript: <<
#!/bin/sh -ev
. %p/sbin/fink-buildenv-helper.sh
make -w -C GUI/xephem MOTIFI=%p/include MOTIFL=%p/lib
fink-package-precedence --depfile-ext='\.d' .
<<

InstallScript: <<
#!/bin/sh -ev
# need -f to pass --build-as-nobody
cd GUI/xephem
mkdir %i/bin
install -c -m 755 xephem %i/bin/xephem

mkdir -p %i/lib/xephem/tools
cp -R auxil catalogs fifos fits gallery help lo %i/lib/xephem
install -c -m 755 tools/*.{awk,pl} %i/lib/xephem/tools

mkdir -p %i/share/man/man1
install -c -m 644 xephem.1 %i/share/man/man1
<<

DocFiles: INSTALL README.md
Description: Astronomical Software Ephemeris
DescDetail: <<
The brainchild of programmer Elwood Downey, XEphem is a star-charting,
sky-simulating, ephemeris-generating celestial virtuoso that can do just about
everything ...
The package comes with basic datasets of the bright stars, constellations,
major solar system objects and extragalactic sources, but provides download
capabilities for the any stars from the Hubble Guide Star Catalogue (GSC) 4.2;
additional catalogue files for millions of astronomical objects including
excerpts of the GSC are available for download as CD images from
http://www.clearskyinstitute.com/xephem/download.html
These data are by default installed outside of the Fink space, so to be able
to use them XEphem should be started as
xephem -env TELHOME=/data_install_path
<<
DescPackaging: <<
Builds and uses its own versions of many support libraries.

Hardcoded data directory %p/lib/xephem; additional catalogue and other data
files installable in ~/Library/XEphem at the user level; in a location given
by TELHOME at the system level (should also be possible to set with
XEphem.ShareDir: /path/to/xephem in the settings, but this does not appear to
be recognised).
Includes patches for new GSC format, minorplanets.net download locations.

Previous maintainer: Kevin Horton <khorton02@gmail.com>

	XQuartz-2.8.0 dropped libXp compile-time files (only retained
	the runtime dylib); disable detection in order to get
	deterministic results.
<<

License: BSD
Maintainer: None <fink-devel@lists.sourceforge.net>
Homepage: https://xephem.github.io/XEphem/Site/xephem.html
# Info2
<<
