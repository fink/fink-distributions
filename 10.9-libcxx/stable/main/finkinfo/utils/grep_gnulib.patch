diff -Nurd grep-3.12.orig/configure grep-3.12/configure
--- grep-3.12.orig/configure	2025-04-10 12:02:07
+++ grep-3.12/configure	2025-11-26 07:46:12
@@ -42939,10 +42939,11 @@
 
 printf '%s\n' "#define FUNC_NL_LANGINFO_YESEXPR_WORKS $FUNC_NL_LANGINFO_YESEXPR_WORKS" >>confdefs.h
 
-    # On Solaris 10 and Solaris 11.3, nl_langinfo is not multithread-safe.
+    # On macOS 26, Solaris 10, and Solaris 11.3, nl_langinfo is not
+    # multithread-safe.
     case "$host_os" in
-      solaris*) NL_LANGINFO_MTSAFE=0 ;;
-      *)        NL_LANGINFO_MTSAFE=1 ;;
+      darwin* | solaris*) NL_LANGINFO_MTSAFE=0 ;;
+      *)                  NL_LANGINFO_MTSAFE=1 ;;
     esac
 
 printf '%s\n' "#define NL_LANGINFO_MTSAFE $NL_LANGINFO_MTSAFE" >>confdefs.h
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32isalnum.c grep-3.12/gnulib-tests/test-c32isalnum.c
--- grep-3.12.orig/gnulib-tests/test-c32isalnum.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32isalnum.c	2025-11-26 07:40:12
@@ -222,7 +222,7 @@
           /* U+00D7 MULTIPLICATION SIGN */
           is = for_character ("\241\301", 2);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */
           is = for_character ("\201\060\211\061", 4);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32isalpha.c grep-3.12/gnulib-tests/test-c32isalpha.c
--- grep-3.12.orig/gnulib-tests/test-c32isalpha.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32isalpha.c	2025-11-26 07:40:12
@@ -220,7 +220,7 @@
           /* U+00D7 MULTIPLICATION SIGN */
           is = for_character ("\241\301", 2);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */
           is = for_character ("\201\060\211\061", 4);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32isgraph.c grep-3.12/gnulib-tests/test-c32isgraph.c
--- grep-3.12.orig/gnulib-tests/test-c32isgraph.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32isgraph.c	2025-11-26 07:40:12
@@ -124,7 +124,7 @@
           is = for_character ("\240", 1);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+00B8 CEDILLA */
           is = for_character ("\270", 1);
           ASSERT (is != 0);
@@ -209,7 +209,7 @@
           is = for_character ("\201\060\204\062", 4);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00B8 CEDILLA */
           is = for_character ("\201\060\206\060", 4);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32islower.c grep-3.12/gnulib-tests/test-c32islower.c
--- grep-3.12.orig/gnulib-tests/test-c32islower.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32islower.c	2025-11-26 07:40:12
@@ -285,7 +285,7 @@
           /* U+00C9 LATIN CAPITAL LETTER E WITH ACUTE */
           is = for_character ("\201\060\207\067", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00DF LATIN SMALL LETTER SHARP S */
           is = for_character ("\201\060\211\070", 4);
           ASSERT (is != 0);
@@ -295,7 +295,7 @@
           is = for_character ("\250\246", 2);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS */
           is = for_character ("\201\060\213\067", 4);
           ASSERT (is != 0);
@@ -303,7 +303,7 @@
           /* U+0141 LATIN CAPITAL LETTER L WITH STROKE */
           is = for_character ("\201\060\221\071", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+0142 LATIN SMALL LETTER L WITH STROKE */
           is = for_character ("\201\060\222\060", 4);
           ASSERT (is != 0);
@@ -311,7 +311,7 @@
           /* U+0429 CYRILLIC CAPITAL LETTER SHCHA */
           is = for_character ("\247\273", 2);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+0449 CYRILLIC SMALL LETTER SHCHA */
           is = for_character ("\247\353", 2);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32isprint.c grep-3.12/gnulib-tests/test-c32isprint.c
--- grep-3.12.orig/gnulib-tests/test-c32isprint.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32isprint.c	2025-11-26 07:40:12
@@ -118,12 +118,12 @@
           /* U+007F <control> */
           is = for_character ("\177", 1);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sgi || (defined _WIN32 && !defined __CYGWIN__))
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sgi || (defined _WIN32 && !defined __CYGWIN__))
           /* U+00A0 NO-BREAK SPACE */
           is = for_character ("\240", 1);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+00B8 CEDILLA */
           is = for_character ("\270", 1);
           ASSERT (is != 0);
@@ -207,7 +207,7 @@
           /* U+007F <control> */
           is = for_character ("\177", 1);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00A0 NO-BREAK SPACE */
           is = for_character ("\201\060\204\062", 4);
           ASSERT (is != 0);
@@ -223,7 +223,7 @@
           is = for_character ("\201\066\247\061", 4);
           ASSERT (is == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+3000 IDEOGRAPHIC SPACE */
           is = for_character ("\241\241", 2);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32ispunct.c grep-3.12/gnulib-tests/test-c32ispunct.c
--- grep-3.12.orig/gnulib-tests/test-c32ispunct.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32ispunct.c	2025-11-26 07:40:12
@@ -150,12 +150,12 @@
       case '1':
         /* Locale encoding is ISO-8859-1 or ISO-8859-15.  */
         {
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+00BF INVERTED QUESTION MARK */
           is = for_character ("\277", 1);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00D7 MULTIPLICATION SIGN */
           is = for_character ("\327", 1);
           ASSERT (is != 0);
@@ -177,7 +177,7 @@
           is = for_character ("\217\242\304", 3);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+00D7 MULTIPLICATION SIGN */
           is = for_character ("\241\337", 2);
           ASSERT (is != 0);
@@ -216,7 +216,7 @@
           /* U+00BF INVERTED QUESTION MARK */
           is = for_character ("\302\277", 2);
           ASSERT (is != 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00D7 MULTIPLICATION SIGN */
           is = for_character ("\303\227", 2);
           ASSERT (is != 0);
@@ -233,7 +233,7 @@
           /* U+05F3 HEBREW PUNCTUATION GERESH */
           is = for_character ("\327\263", 2);
           ASSERT (is != 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun || (defined _WIN32 && !defined __CYGWIN__))
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun || (defined _WIN32 && !defined __CYGWIN__))
           /* U+2192 RIGHTWARDS ARROW */
           is = for_character ("\342\206\222", 3);
           ASSERT (is != 0);
@@ -250,7 +250,7 @@
           /* U+10330 GOTHIC LETTER AHSA */
           is = for_character ("\360\220\214\260", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+1D100 MUSICAL SYMBOL SINGLE BARLINE */
           is = for_character ("\360\235\204\200", 4);
           ASSERT (is != 0);
@@ -272,12 +272,12 @@
         return 77;
         #endif
         {
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00BF INVERTED QUESTION MARK */
           is = for_character ("\201\060\206\067", 4);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00D7 MULTIPLICATION SIGN */
           is = for_character ("\241\301", 2);
           ASSERT (is != 0);
@@ -291,12 +291,12 @@
           /* U+0141 LATIN CAPITAL LETTER L WITH STROKE */
           is = for_character ("\201\060\221\071", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+05F3 HEBREW PUNCTUATION GERESH */
           is = for_character ("\201\060\374\067", 4);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+2192 RIGHTWARDS ARROW */
           is = for_character ("\241\372", 2);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32isspace.c grep-3.12/gnulib-tests/test-c32isspace.c
--- grep-3.12.orig/gnulib-tests/test-c32isspace.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32isspace.c	2025-11-26 07:40:12
@@ -175,12 +175,12 @@
           /* U+00B7 MIDDLE DOT */
           is = for_character ("\241\244", 2);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+2002 EN SPACE */
           is = for_character ("\201\066\243\070", 4);
           ASSERT (is != 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+3000 IDEOGRAPHIC SPACE */
           is = for_character ("\241\241", 2);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32isupper.c grep-3.12/gnulib-tests/test-c32isupper.c
--- grep-3.12.orig/gnulib-tests/test-c32isupper.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32isupper.c	2025-11-26 07:40:12
@@ -272,7 +272,7 @@
           /* U+00B5 MICRO SIGN */
           is = for_character ("\201\060\205\070", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00C9 LATIN CAPITAL LETTER E WITH ACUTE */
           is = for_character ("\201\060\207\067", 4);
           ASSERT (is != 0);
@@ -286,7 +286,7 @@
           /* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS */
           is = for_character ("\201\060\213\067", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+0141 LATIN CAPITAL LETTER L WITH STROKE */
           is = for_character ("\201\060\221\071", 4);
           ASSERT (is != 0);
@@ -294,7 +294,7 @@
           /* U+0142 LATIN SMALL LETTER L WITH STROKE */
           is = for_character ("\201\060\222\060", 4);
           ASSERT (is == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+0429 CYRILLIC CAPITAL LETTER SHCHA */
           is = for_character ("\247\273", 2);
           ASSERT (is != 0);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32tolower.c grep-3.12/gnulib-tests/test-c32tolower.c
--- grep-3.12.orig/gnulib-tests/test-c32tolower.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32tolower.c	2025-11-26 07:40:12
@@ -349,7 +349,7 @@
           mb = for_character ("\201\060\205\070", 4);
           ASSERT (mb.nbytes == 4);
           ASSERT (memcmp (mb.buf, "\201\060\205\070", 4) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00C9 LATIN CAPITAL LETTER E WITH ACUTE */
           mb = for_character ("\201\060\207\067", 4);
           ASSERT (mb.nbytes == 2);
@@ -367,7 +367,7 @@
           mb = for_character ("\201\060\213\067", 4);
           ASSERT (mb.nbytes == 4);
           ASSERT (memcmp (mb.buf, "\201\060\213\067", 4) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+0141 LATIN CAPITAL LETTER L WITH STROKE */
           mb = for_character ("\201\060\221\071", 4);
           ASSERT (mb.nbytes == 4);
@@ -377,7 +377,7 @@
           mb = for_character ("\201\060\222\060", 4);
           ASSERT (mb.nbytes == 4);
           ASSERT (memcmp (mb.buf, "\201\060\222\060", 4) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+0429 CYRILLIC CAPITAL LETTER SHCHA */
           mb = for_character ("\247\273", 2);
           ASSERT (mb.nbytes == 2);
diff -Nurd grep-3.12.orig/gnulib-tests/test-c32toupper.c grep-3.12/gnulib-tests/test-c32toupper.c
--- grep-3.12.orig/gnulib-tests/test-c32toupper.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-c32toupper.c	2025-11-26 07:40:12
@@ -371,7 +371,7 @@
           mb = for_character ("\201\060\211\070", 4);
           ASSERT (mb.nbytes == 4);
           ASSERT (memcmp (mb.buf, "\201\060\211\070", 4) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+00E9 LATIN SMALL LETTER E WITH ACUTE */
           mb = for_character ("\250\246", 2);
           ASSERT (mb.nbytes == 4);
@@ -385,7 +385,7 @@
           mb = for_character ("\201\060\221\071", 4);
           ASSERT (mb.nbytes == 4);
           ASSERT (memcmp (mb.buf, "\201\060\221\071", 4) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
           /* U+0142 LATIN SMALL LETTER L WITH STROKE */
           mb = for_character ("\201\060\222\060", 4);
           ASSERT (mb.nbytes == 4);
@@ -395,7 +395,7 @@
           mb = for_character ("\247\273", 2);
           ASSERT (mb.nbytes == 2);
           ASSERT (memcmp (mb.buf, "\247\273", 2) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
           /* U+0449 CYRILLIC SMALL LETTER SHCHA */
           mb = for_character ("\247\353", 2);
           ASSERT (mb.nbytes == 2);
diff -Nurd grep-3.12.orig/gnulib-tests/test-fnmatch.c grep-3.12/gnulib-tests/test-fnmatch.c
--- grep-3.12.orig/gnulib-tests/test-fnmatch.c	2025-01-01 21:33:12
+++ grep-3.12/gnulib-tests/test-fnmatch.c	2025-11-26 07:40:14
@@ -626,17 +626,17 @@
         ASSERT (fnmatch ("x[[:alnum:]]y", "x\330y", 0) == 0);
         /* U+00D8 LATIN CAPITAL LETTER O WITH STROKE */
         ASSERT (fnmatch ("x[[:alpha:]]y", "x\330y", 0) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
         /* U+00B8 CEDILLA */
         ASSERT (fnmatch ("x[[:graph:]]y", "x\270y", 0) == 0);
         #endif
         /* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS */
         ASSERT (fnmatch ("x[[:lower:]]y", "x\377y", 0) == 0);
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
         /* U+00B8 CEDILLA */
         ASSERT (fnmatch ("x[[:print:]]y", "x\270y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
         /* U+00BF INVERTED QUESTION MARK */
         ASSERT (fnmatch ("x[[:punct:]]y", "x\277y", 0) == 0);
         #endif
@@ -794,7 +794,7 @@
         /* U+00B8 CEDILLA */
         ASSERT (fnmatch ("x[[:print:]]y", "x\217\242\261y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
         /* U+00D7 MULTIPLICATION SIGN */
         ASSERT (fnmatch ("x[[:punct:]]y", "x\241\337y", 0) == 0);
         #endif
@@ -863,15 +863,15 @@
         ASSERT (fnmatch ("x?y", "x\250\271y", 0) == 0); /* "xÃ¼y" */
         ASSERT (fnmatch ("x?y", "x\201\060\211\070y", 0) == 0); /* "xÃŸy" */
         ASSERT (fnmatch ("x?y", "x\224\071\375\067y", 0) == 0); /* "xðŸ˜‹y" */
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
         /* U+0141 LATIN CAPITAL LETTER L WITH STROKE */
         ASSERT (fnmatch ("x[[:alnum:]]y", "x\201\060\221\071y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
         /* U+0141 LATIN CAPITAL LETTER L WITH STROKE */
         ASSERT (fnmatch ("x[[:alpha:]]y", "x\201\060\221\071y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
         /* U+00B8 CEDILLA */
         ASSERT (fnmatch ("x[[:graph:]]y", "x\201\060\206\060y", 0) == 0);
         #endif
@@ -879,7 +879,7 @@
         /* U+20000 <CJK Ideograph> */
         ASSERT (fnmatch ("x[[:graph:]]y", "x\225\062\202\066y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
         /* U+00FF LATIN SMALL LETTER Y WITH DIAERESIS */
         ASSERT (fnmatch ("x[[:lower:]]y", "x\201\060\213\067y", 0) == 0);
         #endif
@@ -887,7 +887,7 @@
         /* U+10441 DESERET SMALL LETTER EF */
         ASSERT (fnmatch ("x[[:lower:]]y", "x\220\060\355\071y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __sun)
         /* U+00B8 CEDILLA */
         ASSERT (fnmatch ("x[[:print:]]y", "x\201\060\206\060y", 0) == 0);
         #endif
@@ -895,7 +895,7 @@
         /* U+20000 <CJK Ideograph> */
         ASSERT (fnmatch ("x[[:print:]]y", "x\225\062\202\066y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__ || defined __illumos__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__ || defined __illumos__)
         /* U+00D7 MULTIPLICATION SIGN */
         ASSERT (fnmatch ("x[[:punct:]]y", "x\241\301y", 0) == 0);
         #endif
@@ -903,11 +903,11 @@
         /* U+1D100 MUSICAL SYMBOL SINGLE BARLINE */
         ASSERT (fnmatch ("x[[:punct:]]y", "x\224\062\273\064y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
         /* U+3000 IDEOGRAPHIC SPACE */
         ASSERT (fnmatch ("x[[:space:]]y", "x\241\241y", 0) == 0);
         #endif
-        #if !(defined __FreeBSD__ || defined __DragonFly__)
+        #if !((defined __APPLE__ && defined __MACH__) || defined __FreeBSD__ || defined __DragonFly__)
         /* U+0429 CYRILLIC CAPITAL LETTER SHCHA */
         ASSERT (fnmatch ("x[[:upper:]]y", "x\247\273y", 0) == 0);
         #endif
diff -Nurd grep-3.12.orig/lib/nl_langinfo.c grep-3.12/lib/nl_langinfo.c
--- grep-3.12.orig/lib/nl_langinfo.c	2025-03-09 13:45:32
+++ grep-3.12/lib/nl_langinfo.c	2025-11-26 07:40:48
@@ -154,11 +154,15 @@
    "thread5 disturbed by threadN!", even when threadN invokes only
       nl_langinfo (CODESET);
       nl_langinfo (CRNCYSTR);
-   Similarly on Solaris 10.  */
+   Similarly on Solaris 10 and macOS 26.  */
 
-# if !NL_LANGINFO_MTSAFE /* Solaris */
+# if !NL_LANGINFO_MTSAFE /* macOS, Solaris */
 
-#  define ITEMS (MAXSTRMSG + 1)
+#  ifdef __sun /* Solaris */
+#   define ITEMS (MAXSTRMSG + 1)
+#  else /* macOS */
+#   define ITEMS (CRNCYSTR + 20)
+#  endif
 #  define MAX_RESULT_LEN 80
 
 static char *
