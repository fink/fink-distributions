Package: libxar1-shlibs
# OPENSSL110 FTBFS
Version: 1.5.2
Revision: 3
Source: http://xar.googlecode.com/files/xar-%v.tar.gz
Source-Checksum: SHA256(4c5d5682803cdfab16d72365cf51fc4075d597c5eeaa8c7d1990fea98cdae3e6)
BuildDepends: <<
	bzip2-dev,
	libxml2,
	openssl100-dev
<<
Depends: <<
	bzip2-shlibs,
	libxml2-shlibs,
	openssl100-shlibs
<<
Replaces: xar (<< 1.4-3)
ConfigureParams: --disable-static --mandir=%p/share/man
CompileScript: <<
	%{default_script}
<<
InfoTest: <<
	TestScript: <<
	#!/bin/sh -ev
		PATH=%b/src:$PATH
		cd test

		./attr       || echo "./attr failure due to missing setfattr expected"
		./checksums  || echo "./checksums failure is known to happen"
		./compression
		./data
		./hardlink
		./heap
	<<
<<
InstallScript: <<
	make install DESTDIR=%d
#	make install BINDIR="%i/bin" DATADIR="%i/share" LIBDIR="%i/lib" INCLUDEDIR="%i/include" MANDIR="%i/share/man"
<<
DocFiles: LICENSE TODO
Shlibs: %p/lib/libxar.1.dylib 1.0.0 %n (>= 1.4-3)
SplitOff: <<
	Package: xar
	Depends: <<
		%N (>= %v-%r),
		bzip2-shlibs,
		libxml2-shlibs,
		openssl100-shlibs
	<<
	Files: <<
		bin
		share/man
	<<
	DocFiles: LICENSE TODO
<<
SplitOff2: <<
	Package: libxar1-dev
	Depends: %N (= %v-%r)
	Conflicts: <<
		libxar1-dev,
		libxar-apple1-dev
	<<
	Replaces: <<
		xar (<< 1.4-3),
		libxar1-dev,
		libxar-apple1-dev
	<<
	BuildDependsOnly: true
	Files: <<
		include
		lib/libxar.{dylib,la}
	<<
	DocFiles: LICENSE TODO
<<
License: BSD
Description: The eXtensible ARchiver
DescDetail: <<
xar is an archiver meant to handle the archival tasks of the 21st 
century.  It handles Extended Attributes, ACLs, Resource Forks, can
extract archives to match up the usernames/groupnames of files it
has archived (as opposed to just matching up uids/gids), and can
make you coffee.
<<
DescPackaging: <<
	The build creates two shared libs--one with install_name in %p
	the other in %b. It also creates two runtime binaries--one
	linked against each shared lib. Doesn't use libtool, so this
	game allows test-run everything during building.

	Manually run the tests, but don't abort for the known fails.
<<
Maintainer: None <fink-devel@lists.sourceforge.net>
Homepage: http://xar.googlecode.com
