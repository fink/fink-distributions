Package: detox
Version: 2.0.3
Revision: 1
Description: Replace problematic characters in filenames
License: BSD
# Free to update, modify, and take over
Maintainer: Hanspeter Niederstrasser <nieder@users.sourceforge.net>
BuildDepends: <<
	pkgconfig
<<
Source: https://github.com/dharple/%n/releases/download/v%v/%n-%v.tar.bz2
Source-Checksum: SHA256(d8e2f9142a947a549ef247fca8982f67d2e4e1311d618b1753881c3aaf8077de)
# add CHECK_{CFLAGS|LIBS} because the pkgconfig search test is borked, so just manually add what it would output
ConfigureParams: <<
	--disable-silent-rules \
	CHECK_CFLAGS="-I%p/include -D_THREAD_SAFE" \
	CHECK_LIBS="-L%p/lib -lcheck"
<<
# --with-check added after 1.4.2, so keep here for when 2.0.0 is released
InfoTest: <<
	# coretutils needed for readlink -f (remove after macOS12 is the lowest supported dist)
	TestDepends: <<
		bash (>= 5),
		check,
		coreutils
	<<
	TestConfigureParams: --with-check
	TestScript: <<
		PATH=%p/lib/coreutils/bin:$PATH make -j1 check || exit 2
	<<
<<
InstallScript: <<
	make install DESTDIR=%d
<<
DocFiles: README.md
Homepage: https://github.com/dharple/detox
DescDetail: <<
Detox is a program that renames files to make them easier to work with
under Unix and related operating systems. Spaces and various other
unsafe characters (such as "$") get replaced with "_". ISO 8859-1
(Latin-1) characters can be transliterated to ASCII, as can UTF-8
characters. More details are contained in the detox.1 man page.
<<
