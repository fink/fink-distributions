Package: lbdb
Version: 0.56
Revision: 1
Description: The Little Brother's Database
License: GPL
Source: https://www.spinnaker.de/lbdb/download//%n-%v.tar.gz
Source-Checksum: SHA256(baa6a23b61394d792b7b221e1961d9ba5710614c9324e8f59b35c126c2b4e74e)
DocFiles: CHANGELOG.md COPYING README.md TODO
ConfFiles: %p/etc/lbdb.rc %p/etc/lbdb_ldap.rc
BuildDepends: <<
	fink-package-precedence,
	libiconv-dev
<<
Depends: <<
	libiconv
<<
Suggests: abook, evolution, gnupg2

ConfigureParams: <<
	--libdir=%p/lib/lbdb \
	--mandir=%p/share/man \
	--sysconfdir=%p/etc \
	--libexecdir=%p/lib/%n/lib \
	PATH=/bin:/usr/bin:$PATH \
	--with-abook=%p/bin/abook \
	--with-gpg=%p/bin/gpg \
	--with-evolution-addressbook-export=%p/bin/evolution-addressbook-export
<<

CompileScript: <<
#!/bin/sh -ev
# Remove any non-Apple dependencies configure may have found

cfgoverride () {
  sed -e "/s,@$1@,/c\\
s,@$1@,|#_!!_#|$2,g" -i.bak config.status
}

./configure CFLAGS="-MD -I%p/include" %c

cfgoverride AWK /usr/bin/awk
cfgoverride TACTARGET tac
cfgoverride TAC '${exec_prefix}/lib/tac'
cfgoverride DOTLOCK_TARGET lbdb_dotlock
cfgoverride DOTLOCK '${exec_prefix}/bin/lbdb_dotlock'
cfgoverride DOTLOCKBASE lbdb_dotlock

diff -u config.status.bak config.status

./config.status
make
fink-package-precedence --depfile-ext='\.d' .
<<
InstallScript: make install install_prefix=%d

DescDetail: <<
 This package was inspired by the Big Brother Database package available for
 various Emacs mailers. It provides a command-line interface to various
 address books, and is designed to work with mutt's external query feature.
<<
DescUsage: <<
 lbdb depends on a number of external tools for some of the more obscure
 plugins. You'll have to install them separately if you want to use them.
<<
Homepage: https://www.spinnaker.de/lbdb/
Maintainer: None <fink-devel@lists.sourceforge.net>
