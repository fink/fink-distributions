Package: lazarus-lcl-cocoa-32bit
Version: 2.0.12
Revision: 1
License: GPL/LGPL
Distribution: 10.9 10.10 10.11 10.12 10.13 10.14

Depends: <<
  lazarus-aqua (>= 2.0) | lazarus-cocoa (>= 2.0) | lazarus-gtk2 (>= 2.0) | 
  lazarus-qt4 (>= 2.0) | lazarus-qt5 (>= 2.0),
  fpc-cross-i386-darwin (>= 3.2.2)
<<

Recommends: fpc-doc, lazarus-doc

Source: mirror:sourceforge:lazarus/lazarus-%v.tar.gz
Source-MD5: 309eb59f83bbcb3976b835d4363b2968

SourceDirectory: lazarus

UseMaxBuildJobs: false

CompileScript: <<
#!/bin/sh -ev

# Yosemite fix
  if [ "$(uname -r | cut -d. -f1)" -ge 14 ]; then export MACOSX_DEPLOYMENT_TARGET=10.9 ; fi

  debug_options="-gl"

# ** Start compiling the lazarus component libraries

  AllUnits="registration lazutils codetools lcl basecomponents bigidecomponents"

  make $AllUnits LCL_PLATFORM=cocoa OPT="$debug_options" OS_TARGET=darwin PP=ppc386 CPU_TARGET=i386

<<

InstallScript: <<
#!/bin/sh -ev
# ** install the lcl and other libraries/units **

  for path in $(find . -name cocoa | cut -f 2- -d '/' | grep i386-darwin) ; do
    install -d  $(echo %i/share/lazarus/$(dirname $path))
    mv -v $path $(echo %i/share/lazarus/$(dirname $path))
  done

  chmod -R a+rw %i/share/lazarus

<<

Description: The 32bit cocoa version of the lcl

DescUsage: This is the 32bit cocoa version of the lazarus component library

DescPort: <<
  Notes regarding the InstallScript:
  - find gives the list of directories
  - cut removes the './' from the beginning of the paths
  - grep removes the directories, which do not contain unit files 
<<

Homepage: https://wiki.freepascal.org/Main_Page

Maintainer: Karl-Michael Schindler <karl-michael.schindler@web.de>
