Info3: <<
Package: doxygen-doc
# Don't forget to keep doxygen synced at the same version.
Version: 1.14.0
Revision: 1
Distribution: 10.14, 10.14.5, 10.15, 11.0, 11.3, 12.0, 13.0, 14.0, 14.4, 15.0, 26.0
Source: mirror:sourceforge:doxygen/doxygen-%v.src.tar.gz
SourceDirectory: doxygen-%v
Source-Checksum: SHA256(d4536d11ab13037327d8d026b75f5a86b7ccb2093e2f546235faf61fd86e6b5d)
BuildDepends: <<
	bison (>= 2.7),
	cmake,
	doxygen (>= %v),
	fink-buildenv-modules,
	flex (>= 2.5.37),
	ghostscript (>= 10.02.0-1) | ghostscript-nox (>= 10.02.0-1),
	graphviz,
	libiconv-dev,
	tetex3-base
<<
# changes to the patchfile need to be mirrored in doxygen
PatchFile: doxygen.patch
PatchFile-MD5: b05a7940276209cbc441f9184b75aa36
CompileScript: <<
	#!/bin/sh -ev
	. %p/sbin/fink-buildenv-cmake.sh
	# the binary needs to be in tree during the doc build
	install -m 0755 -d finkbuild/bin
	ln -s %p/bin/doxygen ./finkbuild/bin/doxygen
	# These 2 are needed to avoid "no rule to make target ..."
	ln -s %p/bin/doxygen ./doc/doxygen
	ln -s %p/bin/doxygen ./examples/doxygen
	export PATH=%b/finkbuild/bin:$PATH
	if [ -x /usr/bin/python ]; then
		export PYTHON=/usr/bin/python
	else
		export PYTHON=/usr/bin/python3
	fi
	pushd finkbuild
	cmake $FINK_CMAKE_ARGS \
		-DBISON_EXECUTABLE:FILEPATH=%p/bin/bison \
		-DDOT:FILEPATH=%p/bin/dot \
		-DFLEX_EXECUTABLE:FILEPATH=%p/bin/flex \
		-DICONV_INCLUDE_DIR:PATH=%p/include \
		-DICONV_LIBRARY:FILEPATH=%p/lib/libiconv.dylib \
		-DPYTHON_EXECUTABLE:FILEPATH=${PYTHON} \
		-Dbuild_doc=ON \
		-DDOC_INSTALL_DIR:STRING=share/doc/doxygen \
		-Ddoxygen_BINARY_DIR=%b/finkbuild \
		-DJAVACC_EXECUTABLE=NOT_FOUND \
		-Dbuild_search=OFF \
		-Dbuild_parse=OFF \
		-Duse_sys_spdlog=OFF \
		-Duse_sys_fmt=OFF \
		-Duse_sys_sqlite3=OFF \
		-LAH ..
	make -w -j1 docs
	popd
<<
InstallScript: <<
	#!/bin/sh -ev
	pushd finkbuild/doc
		make install DESTDIR=%d
	popd
	# doxygen.1 already exists in the main doxygen package
	rm %i/share/man/man1/doxygen.1
<<
DocFiles: LANGUAGE.HOWTO LICENSE README.md VERSION
Description: Doxygen documentation
DescDetail: <<
	This package contains the documentation for the Doxygen software. It was
	split up to reduce the build dependencies of the main doxygen package.
<<
License: GPL
Maintainer: None <fink-devel@lists.sourceforge.net>
Homepage: http://www.doxygen.org

<<
