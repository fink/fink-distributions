Package: ninja
Version: 1.11.0
Revision: 1
Maintainer: None <fink-devel@lists.sourceforge.net>

Source: https://github.com/ninja-build/%n/archive/v%v.tar.gz
Source-Checksum: SHA256(3c6ba2e66400fe3f1ae83deb4b235faf3137ec20bd5b08c29bfc368db143e4c6)
SourceRename: %n-%v.tar.gz
# re2c >= 0.15.3 for its --no-version flag
BuildDepends: re2c (>= 0.15.3)
CompileScript: <<
  #!/bin/sh -ex
  # can pass `--with-python=FOO` to ./configure to hardcode a specific runtime python
  if [ -x /usr/bin/python ]; then
    ./configure.py --bootstrap --verbose
  else
    /usr/bin/python3 configure.py --bootstrap --verbose
  fi
<<
InstallScript: <<
  #!/bin/sh -ex
  mkdir -p %i/bin
  install -m 755 ninja %i/bin

  mkdir -p %i/etc/bash_completion.d
  install -m 755 misc/bash-completion %i/etc/bash_completion.d/
<<

# ninja tests requires build with cmake (builds a larger executable in build-cmake)
InfoTest: <<
  TestDepends: cmake
  TestScript: <<
    cmake -Bbuild-cmake -H.
    cmake --build build-cmake -v
    ./build-cmake/ninja_test || exit 2
  <<
<<

DocFiles: CONTRIBUTING.md COPYING README.md doc/manual.asciidoc

Description: Small build system with a focus on speed
DescDetail: <<
Ninja is a small build system with a focus on speed. It differs from
other build systems in two major respects: it is designed to have its
input files generated by a higher-level build system, and it is designed
to run builds as fast as possible.
<<

# Apache Software License 2.0 is DFSG and OSI approved. According to our
# packaging manual, it also qualifies as "BSD", but that sounds plain
# wrong. 
License: DFSG-Approved
Homepage: https://ninja-build.org/
