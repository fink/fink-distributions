Info3: <<
Package: doxygen
# Don't forget to keep doxygen-doc synced at the same version.
# upgrading will require patching a few packages. See:
# https://lists.debian.org/debian-devel/2019/10/msg00260.html
Version: 1.14.0
Revision: 1
Distribution: 10.14, 10.14.5, 10.15, 11.0, 11.3, 12.0, 13.0, 14.0, 14.4, 15.0, 26.0
Source: mirror:sourceforge:%n/%n-%v.src.tar.gz
SourceDirectory: %n-%v
Source-Checksum: SHA256(d4536d11ab13037327d8d026b75f5a86b7ccb2093e2f546235faf61fd86e6b5d)
Depends: <<
	libiconv
<<
BuildDepends: <<
	bison (>= 2.7),
	cmake,
	fink-buildenv-modules,
	fink-package-precedence,
	flex (>= 2.5.37),
	libiconv-dev
<<
# too hard to patch to avoid pulling in sys-fmt headers
BuildConflicts: <<
	libfmt9-dev,
	libfmt10-dev,
	libfmt12-dev
<<
# changes to the patchfile need to be mirrored in doxygen-doc
PatchFile: %n.patch
PatchFile-MD5: b05a7940276209cbc441f9184b75aa36
PatchScript: <<
	%{default_script}
	# don't try to grab our sqlite3 headers. The iconv -I flag is put at the very front during configure
	perl -pi -e 's|\<sqlite3.h\>|\"../deps/sqlite3/sqlite3.h\"|g' src/doxygen.cpp src/sqlite3gen.cpp
<<
GCC: 4.0
CompileScript: <<
	#!/bin/sh -ev
	if [ -x /usr/bin/python ]; then
		export PYTHON=/usr/bin/python
	else
		export PYTHON=/usr/bin/python3
	fi
	. %p/sbin/fink-buildenv-cmake.sh
	mkdir finkbuild
	pushd finkbuild
		cmake $FINK_CMAKE_ARGS \
			-DBISON_EXECUTABLE:FILEPATH=%p/bin/bison \
			-DDOT:FILEPATH=%p/bin/dot \
			-DFLEX_EXECUTABLE:FILEPATH=%p/bin/flex \
			-DIconv_INCLUDE_DIR:PATH=%p/include \
			-DIconv_LIBRARY:FILEPATH=%p/lib/libiconv.dylib \
			-DPYTHON_EXECUTABLE:FILEPATH=${PYTHON} \
			-DCMAKE_CXX_FLAGS:STRING=-MD \
			-DJAVACC_EXECUTABLE=NOT_FOUND \
			-Dbuild_search=OFF \
			-Dbuild_parse=OFF \
			-Duse_sys_spdlog=OFF \
			-Duse_sys_fmt=OFF \
			-Duse_sys_sqlite3=OFF \
			-Dbuild_doc=OFF \
			-LAH ..
		make -w
	popd
	fink-package-precedence --depfile-ext='\.d' .
<<
InstallScript: <<
	#!/bin/sh -ev
	pushd finkbuild
		make install DESTDIR=%d MAN1DIR=share/man/man1
	popd
	install -d -m 755 %i/share/man/man1
	install -m 644 doc/doxygen.1 %i/share/man/man1
<<
DocFiles: LANGUAGE.HOWTO LICENSE README.md VERSION
Description: Documentation system for C++, Java, IDL and C
DescDetail: <<
	Doxygen is a documentation system for C++, Java, IDL and C

	1.  It can generate an on-line documentation browser (in HTML) and/or 
	an off-line reference manual (in  ) from a set of documented source 
	files. There is also support for generating output in RTF (MS-Word), 
	PostScript, hyperlinked PDF, compressed HTML, and Unix man pages. The 
	documentation is extracted directly from the sources, which makes it 
	much easier to keep the documentation consistent with the source code.

	2. Doxygen can be configured to extract the code structure from 
	undocumented source files. This can be very useful to quickly find 
	your way in large source distributions. The relations between the 
	various elements are be visualized by means of include dependency 
	graphs, inheritance diagrams, and collaboration diagrams, which are 
	all generated automatically.

	Docs are now built and installed by the package doxygen-doc
<<
License: GPL
DescPort: <<
* Bumped to 1.14.1 by Hanspeter
	* Making cmake find iconv.h pushes -I%p/include to the front of the
	compile command, which can mask headers from bundled deps.
* Bumped to 1.9.8 by Hanspeter to deal with texlive-2021 and ghostscript-10 in docs.
	* Main build needs bison >= 2.7 (system is 2.3) and flex >= 2.5.37.
* Bumped to 1.8.14 by Hanspeter to deal with newer macOS (13+).
* Bumped to 1.8.9.1 by Hanspeter for 10.9-libcxx tree.
* Bumped by Matthias Neeracher <neeracher@mac.com>, upgraded for 10.7 tree.
* Modified by Michele Garoche <michele.garoche@easyconnect.fr>
<<
DescPackaging: <<
* doxygen.1 normally installed as part of docs, but we want it in the main package.
<<
Maintainer: None <fink-devel@lists.sourceforge.net>
Homepage: http://www.doxygen.org

<<
