Package: libncurses6-shlibs
Version: 6.1
Revision: 1

GCC: 4.0
Source: ftp://ftp.gnu.org/pub/gnu/ncurses/ncurses-%v.tar.gz
Source-MD5: 98c889aaf8d23910d2b92d65be2e737a
SourceDirectory: ncurses-%v
BuildDepends: fink (>= 0.13.0)
Depends: base-files
Essential: true
PatchScript: <<
#!/bin/sh -ex
	# Fix warnings in clang by removing some useless compiler
	# switches (they are not useful for gcc either).
	perl -pi -e "s/-no-cpp-precomp//" configure

	#Need to remove these entries to avoid failure on case sensitive file systems
	perl -pi -e "s/hp70092a\|//; s/hp2621a\|//; s/2621a\|//" misc/terminfo.src
<<
ConfigureParams: <<
	--libdir=%p/lib/ncurses \
	--mandir=%p/share/man \
	--without-ada \
	--with-pkg-config-libdir=%p/lib/pkgconfig \
	--enable-pc-files \
	--disable-mixed-case \
	--with-shared \
	--with-debug \
	--disable-lib-suffixes \
	--with-terminfo-dirs="%p/share/terminfo:/usr/share/terminfo" \
	--with-default-terminfo-dir="%p/share/terminfo" \
	--enable-overwrite \
	--enable-termcap \
	--enable-widec \
	--enable-no-padding \
	--enable-sigwinch \
	--enable-tcap-names \
	--enable-hard-tabs \
	cf_cv_typeof_chtype=long \
	PKG_CONFIG=%p/bin/pkg-config \
	PKG_CONFIG_LIBDIR=%p/lib/pkgconfig
<<
NoSetCFLAGS: true
NoSetLDFLAGS: true
NoSetCPPFLAGS: true
UseMaxBuildJobs: false
InstallScript: <<
#!/bin/sh -ev
  make install DESTDIR=%d DYLD_LIBRARY_PATH=`pwd`/lib:`pwd`/lib/ncurses
# add extra symlinks in the main lib directory
  ln -s ncurses/libform.6.dylib %i/lib/libform.dylib
  ln -s ncurses/libmenu.6.dylib %i/lib/libmenu.dylib
  ln -s ncurses/libncurses.6.dylib %i/lib/libcurses.dylib
  ln -s ncurses/libncurses.6.dylib %i/lib/libncurses.dylib
  ln -s ncurses/libncurses.6.dylib %i/lib/libtermcap.dylib
  ln -s ncurses/libpanel.6.dylib %i/lib/libpanel.dylib
# remove the static libraries
  rm  %i/lib/ncurses/lib*.a
<<
SplitOff: <<
 Package: libncurses6
 Depends: libncurses6-shlibs (= %v-%r)
 BuildDependsOnly: true
 Conflicts: <<
  ncurses-dev,
  libncurses5-64bit,
  libncurses5,
  libncurses6
 <<
 Replaces: <<
  ncurses (<= 5.3-20031018-2),
  ncurses (<= 5.7-20100227-1),
  ncurses-dev,
  libncurses5-64bit,
  libncurses5,
  libncurses6
 <<
 Provides: libncurses6-dev
 Files: <<
    bin/ncurses6-config
    include
    lib/libcurses.dylib
    lib/libform.dylib
    lib/libmenu.dylib
    lib/libncurses.dylib
    lib/libpanel.dylib
    lib/libtermcap.dylib
    lib/ncurses/libcurses.dylib
    lib/ncurses/libform.dylib
    lib/ncurses/libmenu.dylib
    lib/ncurses/libncurses.dylib
    lib/ncurses/libpanel.dylib
    lib/pkgconfig
<<
 DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
 Description: Full-screen ascii drawing library
<<
SplitOff2: <<
 Package: ncurses
 Depends: libncurses6-shlibs (>= %v-%r)
 Essential: true
 Files: <<
    bin
    lib/terminfo
    share/man
    share/terminfo
 <<
 DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
 Description: Executable files for libncurses6
<<
Shlibs: <<
 %p/lib/ncurses/libform.6.dylib 6.0.0 %n (>= 6.0-1)
 %p/lib/ncurses/libmenu.6.dylib 6.0.0 %n (>= 6.0-1)
 %p/lib/ncurses/libncurses.6.dylib 6.0.0 %n (>= 6.0-1)
 %p/lib/ncurses/libpanel.6.dylib 6.0.0 %n (>= 6.0-1)
<<
DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
Description: Shared libraries for libncurses6 package
DescPort: <<
More changes by Chris Zubrzycki to be more compatable with apple's lib
-udates to the (sometimes) monthly releases of ncurses (in patch form)

The --enable-overwrite flag creates the libcurses.dylib symlink.

Added patchscript to avoid failure on case sensitive file systems.
<<
DescPackaging: <<
First revision by David Ross.
Previous versions by Christoph Pfisterer.
All the hard work in this version done by Chris Zubrzycki.
Updated to 5.7 by Daniel Johnson.

	Fink needs to mirror Essential packages on its own server).

	Disable pkg-config so we don't need to make it Essential:true
	(as dependency of Essential:true ncurses). gen-pkgconfig says
	the *-config scripts are the recommended way anyway.
<<
License: OSI-Approved
Maintainer: Fink Core Group <fink-core@lists.sourceforge.net>
Homepage: http://www.gnu.org/software/ncurses/ncurses.html
