Package: libncurses6-shlibs
Version: 6.2
Revision: 1

GCC: 4.0
Source: ftp://ftp.gnu.org/pub/gnu/ncurses/ncurses-%v.tar.gz
Source-Checksum: SHA256(30306e0c76e0f9f1f0de987cf1c82a5c21e1ce6568b9227f7da5b71cbea86c9d)
SourceDirectory: ncurses-%v
BuildDepends: fink (>= 0.13.0)
Depends: base-files
Essential: true
PatchScript: <<
#!/bin/sh -ex
	# Fix warnings in clang by removing some useless compiler
	# switches (they are not useful for gcc either).
	perl -pi -e "s/-no-cpp-precomp//" configure

	#Need to remove these entries to avoid failure on case sensitive file systems
	perl -pi -e "s/hp70092a\|//; s/hp2621a\|//; s/2621a\|//" misc/terminfo.src
<<
ConfigureParams: <<
	--mandir=%p/share/man \
	--without-ada \
	--with-pkg-config-libdir=%p/lib/pkgconfig \
	--enable-pc-files \
	--disable-mixed-case \
	--with-shared \
	--with-debug \
	--disable-lib-suffixes \
	--with-terminfo-dirs="%p/share/terminfo:/usr/share/terminfo" \
	--with-default-terminfo-dir="%p/share/terminfo" \
	--enable-overwrite \
	--enable-termcap \
	--enable-widec \
	--enable-no-padding \
	--enable-sigwinch \
	--enable-tcap-names \
	--enable-hard-tabs \
	cf_cv_typeof_chtype=long \
	PKG_CONFIG=%p/bin/pkg-config \
	PKG_CONFIG_LIBDIR=%p/lib/pkgconfig
<<
NoSetCFLAGS: true
NoSetLDFLAGS: true
NoSetCPPFLAGS: true
UseMaxBuildJobs: false
InstallScript: <<
#!/bin/sh -ev
  make install DESTDIR=%d DYLD_LIBRARY_PATH=`pwd`/lib:`pwd`/lib/ncurses
# add extra symlinks in the main lib directory
  ln -s libncurses.6.dylib %i/lib/libtermcap.dylib
# remove the static libraries
  rm  %i/lib/lib*.a
<<
SplitOff: <<
 Package: libncurses6
 Depends: libncurses6-shlibs (= %v-%r)
 BuildDependsOnly: true
 Conflicts: <<
  ncurses-dev,
  libncurses5-64bit,
  libncurses5,
  libncurses6
 <<
 Replaces: <<
  ncurses (<= 5.3-20031018-2),
  ncurses (<= 5.7-20100227-1),
  ncurses (<= 5.9-20110507-1),
  ncurses-dev,
  libncurses5-64bit,
  libncurses5,
  libncurses6
 <<
 Provides: libncurses6-dev
 Files: <<
    bin/ncurses6-config
    include
    lib/libcurses.dylib
    lib/libform.dylib
    lib/libmenu.dylib
    lib/libncurses.dylib
    lib/libpanel.dylib
    lib/libtermcap.dylib
    lib/pkgconfig
    share/man/man3
<<
 DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
 Description: Full-screen ascii drawing library
<<
SplitOff2: <<
 Package: ncurses
 Depends: libncurses6-shlibs (>= %v-%r)
 Essential: true
 Files: <<
    bin
    lib/terminfo
    share/man
    share/tabset
    share/terminfo
 <<
 DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
 Description: Executable files for libncurses6
<<
Shlibs: <<
 %p/lib/libform.6.dylib 6.0.0 %n (>= 6.0-1)
 %p/lib/libmenu.6.dylib 6.0.0 %n (>= 6.0-1)
 %p/lib/libncurses.6.dylib 6.0.0 %n (>= 6.0-1)
 %p/lib/libpanel.6.dylib 6.0.0 %n (>= 6.0-1)
<<
DocFiles: README ANNOUNCE NEWS INSTALL TO-DO MANIFEST
Description: Shared libraries for libncurses6 package
DescPort: <<
More changes by Chris Zubrzycki to be more compatable with apple's lib
-udates to the (sometimes) monthly releases of ncurses (in patch form)

The --enable-overwrite flag creates the libcurses.dylib symlink.

Added patchscript to avoid failure on case sensitive file systems.
<<
DescPackaging: <<
First revision by David Ross.
Previous versions by Christoph Pfisterer.
All the hard work in this version done by Chris Zubrzycki.
Updated to 5.7 by Daniel Johnson.

	Fink needs to mirror Essential packages on its own server).

Fix generation of .pc files so that the build doesn't need the presence
of pkg-config (and avoid making that Essential:true). gen-pkgconfig says
the *-config scripts are the recommended way anyway.
<<
License: OSI-Approved
Maintainer: Fink Core Group <fink-core@lists.sourceforge.net>
Homepage: http://www.gnu.org/software/ncurses/ncurses.html
