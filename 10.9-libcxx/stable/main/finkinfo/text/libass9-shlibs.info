Package: libass9-shlibs
Version: 0.17.4
Revision: 1
Description: Portable ASS/SSA subtitle renderer library
License: BSD
Maintainer: Hanspeter Niederstrasser <nieder@users.sourceforge.net>
Depends: <<
	fontconfig2-shlibs (>= 2.10.92),
	freetype219-shlibs,
	fribidi-shlibs (>= 0.19.2),
	libharfbuzz0-shlibs (>= 1.2.3),
	libiconv
<<
BuildDepends: <<
	automake1.15,
	autoconf2.6,
	fink (>= 0.34),
	fink-package-precedence,
	fontconfig2-dev (>= 2.10.92),
	freetype219,
	fribidi-dev (>= 0.19.2),
	libharfbuzz0-dev (>= 1.2.3),
	libiconv-dev,
	libtool2,
	nasm,
	pkgconfig
<<
Source: https://github.com/libass/libass/archive/%v.tar.gz
Source-Checksum: SHA256(c287d180d93dc9c9021872574b618ac49027e84cc90e1289318b1ee68bb42251)
SourceRename: libass-%v.tar.gz
# --disable-libunibreak until we have that in Fink
ConfigureParams: <<
	--disable-static \
	--disable-silent-rules \
	--disable-libunibreak
<<
CompileScript: <<
	./autogen.sh
	%{default_script}
	fink-package-precedence --prohibit-bdep=libass4-dev,libass5-dev,libass9-dev .
<<
InfoTest: <<
	TestConfigureParams: --enable-test
	TestDepends: libpng16
	TestScript: <<
		make check || exit 2
		fink-package-precedence --prohibit-bdep=libass4-dev,libass5-dev,libass9-dev .
	<<
<<
InstallScript: <<
	make install DESTDIR=%d
	# Stop downstream packages from inheriting our Depends
	perl -ni -e 'print unless /Requires.private:/' %i/lib/pkgconfig/libass.pc
	# satisfy validator
	perl -pi -e 's|-framework ApplicationServices -framework CoreFoundation|-Wl,-framework,ApplicationServices -Wl,-framework,CoreFoundation|g' %i/lib/libass.la %i/lib/pkgconfig/libass.pc
	# static is built if we run tests
	rm -f %i/lib/*.a
<<
DocFiles: COPYING Changelog
Shlibs: <<
	%p/lib/libass.9.dylib 14.0.0 %n (>= 0.17.4-1)
<<
SplitOff: <<
	Package: libass9-dev
	Description: Portable ASS/SSA subtitle renderer (dev pkg)
	Files: include lib/pkgconfig lib/libass.dylib lib/libass.la
	Depends: %N (= %v-%r)
	Conflicts: <<
		libass4-dev,
		libass5-dev,
		libass9-dev
	<<
	Replaces: <<
		libass4-dev,
		libass5-dev,
		libass9-dev
	<<
	BuildDependsOnly: true
<<
Homepage: https://github.com/libass/libass
DescDetail: <<
Portable subtitle renderer for the ASS/SSA (Advanced 
Substation Alpha/Substation Alpha) subtitle format. It 
is mostly compatible with VSFilter.
<<
