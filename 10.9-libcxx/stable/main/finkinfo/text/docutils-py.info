# -*- coding: ascii; tab-width: 4 -*-
Info2: <<
Package: docutils-py%type_pkg[python]
Type: python (3.9 3.10)
Version: 0.21.2
Revision: 1

Source: https://files.pythonhosted.org/packages/source/d/docutils/docutils-%v.tar.gz
Source-Checksum: SHA256(3a6b18732edf182daa3cd12775bbb338cf5691468f91eeeb109deff6ebfa986f)

Conflicts: docutils (<= 0.18)
Replaces: docutils (<= 0.18)
Provides: docutils

Depends: <<
	python%type_pkg[python]
<<
BuildDepends: <<
    bootstrap-modules-py%type_pkg[python]
<<

CompileScript: <<
    PYTHONPATH=%p/share/bootstrap-modules-python%type_pkg[python] %p/bin/python%type_raw[python] -m build --wheel --no-isolation --skip-dependency-check
<<

InfoTest: <<
    TestDepends: <<
        pytest-py%type_pkg[python] (>= 4.3.0)
    <<
    TestScript: <<
PYTHONPATH=%b/src %p/bin/python%type_raw[python] -m pytest -vv || exit 2
    <<
<<

InstallScript: <<
#!/bin/sh -ev
PYTHONPATH=%p/share/bootstrap-modules-python%type_pkg[python] %p/bin/python%type_raw[python] -m installer --destdir %d dist/*.whl
	for i in *.txt ; do
		htmldoc=${i%%txt}html
		echo "Making $htmldoc"
		PYTHONPATH=%i/lib/python3.10/site-packages %p/bin/python%type_raw[python] tools/rst2html.py $i $htmldoc
	done

	cd docs
	for i in `find . -name '*.txt'` ; do
		destdir="%i/share/doc/%n/html/"${i%%/*}
		htmldoc=${i%%txt}html
		echo "Making $htmldoc"
		PYTHONPATH=%i/lib/python3.10/site-packages %p/bin/python%type_raw[python] ../tools/rst2html.py $i $htmldoc
		mkdir -p "$destdir"
		cp $htmldoc $destdir
	done

	cp %b/tools/rstpep2html.py %i/bin

	cd %i/bin
	for i in rst2* rstpep2html.py; do
		mv $i ${i%%.py}-%type_raw[python].py
	done
	cd %i
<<

PostInstScript: <<
  for i in rst2html rst2latex rst2man rst2odt rst2pseudoxml rst2s5 rst2xetex rst2xml rstpep2html; do
    #                              link      name    path (source)                   priority
    update-alternatives --verbose \
                        --install %p/bin/$i    $i    %p/bin/$i-%type_raw[python].py %type_pkg[python] \
                        --slave   %p/bin/$i.py $i-py %p/bin/$i-%type_raw[python].py
  done
<<

PreRmScript: <<
  if [ $1 != "upgrade" ]; then
    for i in rst2html rst2latex rst2man rst2odt rst2odt_prepstyles rst2pseudoxml rst2s5 rst2xetex rst2xml rstpep2html; do
      update-alternatives --remove $i %p/bin/$i-%type_raw[python].py
      update-alternatives --remove $i-py %p/bin/$i-%type_raw[python].py
    done
  fi
<<

DocFiles:BUGS.html COPYING.html HISTORY.html README.html RELEASE-NOTES.html THANKS.html

Description: Python-approved WYSIWYG text markup toolkit
DescDetail: <<
Docutils is an open-source text processing system for processing
plaintext documentation into useful formats, such as HTML or LaTeX. It
includes reStructuredText, the easy to read, easy to use,
what-you-see-is-what-you-get plaintext markup language.

Converters included:

 * rst2html
 * rst2latex
 * rst2s5
... etc.
<<

License: GPL
Homepage: http://docutils.sourceforge.net/
#Maintainer: Brendan Cully <bcully@users.sourceforge.net>
Maintainer: Charles Lepple <clepple+fink@ghz.cc>

# closes Info2:
<<
