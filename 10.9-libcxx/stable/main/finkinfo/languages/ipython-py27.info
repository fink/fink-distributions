Info2: <<
Package: ipython-py27
Version: 5.8.0
Revision: 1
Type: python (2.7)
Maintainer: Derek Homeier <dhomeie@gwdg.de>

Depends: <<
  python%type_pkg[python], 
  ipywidgets-py%type_pkg[python],
  jinja2-py%type_pkg[python],
  jsonschema-py%type_pkg[python],
  jupyter-client-py%type_pkg[python],
  markupsafe-py%type_pkg[python],
  mistune-py%type_pkg[python],
  nbconvert-py%type_pkg[python],
  nbformat-py%type_pkg[python],
  path-py%type_pkg[python],
  pexpect-py%type_pkg[python],
  pickleshare-py%type_pkg[python] (>= 0.7.4-1),
  prompt-toolkit-py%type_pkg[python] (<< 2.0.0),
  pygments-py%type_pkg[python],
  pyqt5-mac-py%type_pkg[python] | pyqt4-mac-py%type_pkg[python],
  simplegeneric-py%type_pkg[python],
  terminado-py%type_pkg[python],
  testpath-py%type_pkg[python],
  tornado-py%type_pkg[python],
  traitlets-py%type_pkg[python] (>= 4.2.0-1),
  zmq-py%type_pkg[python] (>= 15.0.0-1),
  ( %type_pkg[python] <= 32 ) backports.shutil-get-terminal-size-py%type_pkg[python]
<<

Recommends: <<
  ipykernel-py%type_pkg[python],
  ipython-docs-py%type_pkg[python] (= %v-%r),
  matplotlib-py%type_pkg[python],
  zopeinterface-py%type_pkg[python],
  pandoc
<<

BuildDepends: <<
  python%type_pkg[python],
  setuptools-tng-py%type_pkg[python]
<<

Source: https://files.pythonhosted.org/packages/source/i/ipython/ipython-%v.tar.gz
Source-Checksum: SHA256(4bac649857611baaaf76bc82c173aa542f7486446c335fe1a6c05d0d491c8906)

# patch wx interface to avoid AttributeError/`app.is_running` AssertionError/wxPyDeprecationWarning
# with wxpython 4.x (https://github.com/ipython/ipython/issues/10055)
PatchScript: <<
 perl -pi -e 's/(wx.)(Thread_IsMain)/${1}IsMainThread/;' IPython/lib/inputhookwx.py IPython/terminal/pt_inputhooks/wx.py
 perl -pi -e 's/(app.)(ProcessIdle)/evtloop.${2}/;' IPython/lib/inputhookwx.py IPython/terminal/pt_inputhooks/wx.py
 perl -pi -e 's/(wx.)(EventLoop\()/${1}GUI${2}/;' IPython/lib/inputhookwx.py IPython/terminal/pt_inputhooks/wx.py
<<

CompileScript: <<
 %p/bin/python%type_raw[python] setup.py build
<<

InstallScript: <<
 #!/bin/bash -ev
 /usr/bin/find %b/build/lib -name '*.pyc' -delete
 %p/bin/python%type_raw[python] setup.py install --root=%d

 for file in %i/bin/*; do
   echo mv $file ${file}-py%type_pkg[python]
   mv $file ${file}-py%type_pkg[python]
 done

 for file in  %i/share/man/man1/*.1; do
   gzip -9 $file
 done

 for file in  %i/share/man/man1/*.1.gz; do
   echo mv $file ${file%%.1.gz}-py%type_pkg[python].1.gz
   mv $file ${file%%.1.gz}-py%type_pkg[python].1.gz
 done

<<
DocFiles: README.rst PKG-INFO
Description: Replacement Python interpreter
DescDetail: <<
IPython is a replacement for the interactive Python interpreter with many
extra features for object introspection, system shell access and with its
own special command system  for adding functionality when working
interactively. It serves  as an embeddable, ready to use interpreter for
your own programs and it offers a flexible framework which can be used as
the base environment for other system with Python as the underlying
language. Specifically scientific environments like Mathematica, IDL and
Matlab inspired its design, but similar ideas can be useful in many fields.

IPython 5+ features a major upgrade to the terminal interface, bringing live
syntax highlighting as you type, proper multiline editing and multiline paste,
and tab completions that don't clutter up your history.
These features are provided by the Python library prompt_toolkit, which
replaces readline throughout the terminal interface.

This package provides the ipython command line interpreter; for using the
Jupyter kernel to run IPython notebooks, additionally install the
notebook-py%type_pkg[python] package.
<<
PostInstScript: <<

   # Remove the old if they exist
   update-alternatives --auto ipython
   update-alternatives --auto pycolor
   update-alternatives --auto irunner
   update-alternatives --remove ipython %p/bin/ipython%type_raw[python]
   update-alternatives --remove pycolor %p/bin/pycolor%type_raw[python]
   update-alternatives --remove irunner %p/bin/irunner%type_raw[python]

   # Now the new setup
   update-alternatives --verbose --install %p/bin/ipython ipython %p/bin/ipython-py%type_pkg[python] %type_pkg[python] \
	--slave %p/bin/ipcluster ipcluster %p/bin/ipcluster-py%type_pkg[python] \
	--slave %p/bin/ipcontroller ipcontroller %p/bin/ipcontroller-py%type_pkg[python] \
	--slave %p/bin/ipengine ipengine %p/bin/ipengine-py%type_pkg[python] \
	--slave %p/bin/iplogger iplogger %p/bin/iplogger-py%type_pkg[python] \
	--slave %p/bin/iptest iptest %p/bin/iptest-py%type_pkg[python] \
	--slave %p/bin/irunner irunner %p/bin/irunner-py%type_pkg[python] \
	--slave %p/bin/pycolor pycolor %p/bin/pycolor-py%type_pkg[python] \
	--slave %p/share/man/man1/ipython.1.gz ipython_man %p/share/man/man1/ipython-py%type_pkg[python].1.gz \
	--slave %p/share/man/man1/ipcluster.1.gz ipcluster_man %p/share/man/man1/ipcluster-py%type_pkg[python].1.gz \
	--slave %p/share/man/man1/ipcontroller.1.gz ipcontroller_man %p/share/man/man1/ipcontroller-py%type_pkg[python].1.gz \
	--slave %p/share/man/man1/ipengine.1.gz ipengine_man %p/share/man/man1/ipengine-py%type_pkg[python].1.gz \
	--slave %p/share/man/man1/iplogger.1.gz iplogger_man %p/share/man/man1/iplogger-py%type_pkg[python].1.gz \
	--slave %p/share/man/man1/irunner.1.gz irunner_man %p/share/man/man1/irunner-py%type_pkg[python].1.gz \
	--slave %p/share/man/man1/pycolor.1.gz pycolor_man %p/share/man/man1/pycolor-py%type_pkg[python].1.gz

  echo "The executables 'ipython', 'ipcluster', 'ipcontroller', 'ipengine',"
  echo "'iplogger', 'iptest', 'irunner' and 'pycolor' installed in %p/bin/ are"
  echo "symlinks automatically updated by the update-alternatives utility."
  echo "If you install multiple flavours of ipython, the symlinks will point"
  echo "to the higher flavour by default."
  echo "You can inspect the links by running:"
  echo "  update-alternatives --list ipython"
  echo "  update-alternatives --display ipython"

<<

PreRmScript: <<

   # Remove the old
   update-alternatives --remove ipython %p/bin/ipython%type_raw[python]
   update-alternatives --remove pycolor %p/bin/pycolor%type_raw[python]
   update-alternatives --remove irunner %p/bin/irunner%type_raw[python]

  if [ $1 != "upgrade" ]; then
     echo "update-alternatives --verbose --remove ipython %p/bin/ipython-py%type_pkg[python]"
     update-alternatives --verbose --remove ipython %p/bin/ipython-py%type_pkg[python]
  else
    echo "Do not remove during upgrade"
  fi
<<

# TODO: add twisted, foolscap, pyobjc
# 13 Errors, 6 Failures with 2.7
InfoTest: <<
  TestDepends: nose-py%type_pkg[python], ipykernel-py%type_pkg[python], zopeinterface-py%type_pkg[python]
  TestScript: <<
    #!/bin/bash -ev
    export LC_CTYPE=en_US.UTF-8 PYTHONPATH=%b/build/lib
    cd build/lib
    %p/bin/python%type_raw[python] -B IPython/testing/iptest.py IPython || exit 1
  <<
  TestSuiteSize: medium
<<

DescPackaging: <<
Long Term Support version for Python2.7.

PyPI page lists 1-2 dozen additional potential dependencies not in Fink,
but build, docbuild and tests seem to work so far with these.
29 test failures, including a number of "UnicodeEncodeError: 'ascii' codec"
encoding errors under Python2.7, but not fixed by setting LC_CTYPE or LANG.
The '-e' flag for disabling tests also seems to have no effect.

Doc build sourced out to ipython-docs-py%type_pkg[python] package to avoid
circular build dependency with ipykernel-py%type_pkg[python].

Previous maintainers: Andrea Riciputi <ariciputi@users.sourceforge.net>
		Kurt Schwehr <goatbar@users.sourceforge.net>
<<


License: BSD
Homepage: http://ipython.org/

# Info2
<<
