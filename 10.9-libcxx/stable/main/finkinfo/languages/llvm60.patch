diff -uNr llvm-6.0.0.src.orig/cmake/config-ix.cmake llvm-6.0.0.src/cmake/config-ix.cmake
--- llvm-6.0.0.src.orig/cmake/config-ix.cmake	2017-07-27 07:25:42.000000000 -0400
+++ llvm-6.0.0.src/cmake/config-ix.cmake	2017-08-04 06:55:35.000000000 -0400
@@ -377,6 +377,12 @@
 set(LLVM_HOST_TRIPLE "${LLVM_INFERRED_HOST_TRIPLE}" CACHE STRING
     "Host on which LLVM binaries will run")
 
+if( APPLE )
+get_host_osx_version(LLVM_INFERRED_OSX_VERSION)
+set(LLVM_HOST_OSX_VERSION "${LLVM_INFERRED_OSX_VERSION}" CACHE STRING
+    "Host version of Mac OS X")
+endif( APPLE )
+
 # Determine the native architecture.
 string(TOLOWER "${LLVM_TARGET_ARCH}" LLVM_NATIVE_ARCH)
 if( LLVM_NATIVE_ARCH STREQUAL "host" )
diff -uNr llvm-6.0.0.src.orig/cmake/modules/GetHostTriple.cmake llvm-6.0.0.src/cmake/modules/GetHostTriple.cmake
--- llvm-6.0.0.src.orig/cmake/modules/GetHostTriple.cmake	2017-03-15 16:46:12.000000000 -0400
+++ llvm-6.0.0.src/cmake/modules/GetHostTriple.cmake	2017-08-04 06:55:35.000000000 -0400
@@ -27,3 +27,15 @@
   endif( MSVC )
   set( ${var} ${value} PARENT_SCOPE )
 endfunction( get_host_triple var )
+
+# Mac OS X only: get the host version
+function( get_host_osx_version var )
+  if( APPLE )
+    execute_process(COMMAND sw_vers -productVersion COMMAND cut -d. -f1-2
+      RESULT_VARIABLE TT_RV
+      OUTPUT_VARIABLE value
+      OUTPUT_STRIP_TRAILING_WHITESPACE)
+    set( ${var} ${value} PARENT_SCOPE )
+    message(STATUS "Host OS X version: ${value}")
+  endif ( APPLE )
+endfunction( get_host_osx_version var )
