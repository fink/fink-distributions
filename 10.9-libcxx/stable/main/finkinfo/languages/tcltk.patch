diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/generic/tclPort.h tcltk-8.6.17/tcl8.6.17/generic/tclPort.h
--- tcltk-8.6.17.orig/tcl8.6.17/generic/tclPort.h	2025-07-31 13:29:02
+++ tcltk-8.6.17/tcl8.6.17/generic/tclPort.h	2025-10-13 22:43:08
@@ -20,7 +20,7 @@
 #if defined(_WIN32)
 #   include "tclWinPort.h"
 #else
-#   include "tclUnixPort.h"
+#   include "../unix/tclUnixPort.h"
 #endif
 #include "tcl.h"
 
diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/configure tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/configure
--- tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/configure	2025-07-25 14:42:36
+++ tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/configure	2025-10-13 22:44:39
@@ -9509,9 +9509,9 @@
 	eval itcl_STUB_LIB_FLAG="-litclstub"
     fi
 
-    itcl_BUILD_LIB_SPEC="-L`$CYGPATH $(pwd)` ${itcl_LIB_FLAG}"
+    itcl_BUILD_LIB_SPEC="`$CYGPATH $(pwd)`/${PKG_LIB_FILE}"
     itcl_LIB_SPEC="-L`$CYGPATH ${pkglibdir}` ${itcl_LIB_FLAG}"
-    itcl_BUILD_STUB_LIB_SPEC="-L`$CYGPATH $(pwd)` ${itcl_STUB_LIB_FLAG}"
+    itcl_BUILD_STUB_LIB_SPEC="`$CYGPATH $(pwd)`/${PKG_STUB_LIB_FILE}"
     itcl_STUB_LIB_SPEC="-L`$CYGPATH ${pkglibdir}` ${itcl_STUB_LIB_FLAG}"
     itcl_BUILD_STUB_LIB_PATH="`$CYGPATH $(pwd)`/${PKG_STUB_LIB_FILE}"
     itcl_STUB_LIB_PATH="`$CYGPATH ${pkglibdir}`/${PKG_STUB_LIB_FILE}"
diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBase.c tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBase.c
--- tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBase.c	2025-07-25 14:37:07
+++ tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBase.c	2025-10-14 12:18:41
@@ -36,6 +36,9 @@
 "            if {[info exists env(ITCL_LIBRARY)]} {\n"
 "                lappend dirs $env(ITCL_LIBRARY)\n"
 "            }\n"
+"            foreach d $::auto_path {\n"
+"                lappend dirs [file join $d itcl$patchLevel]\n"
+"            }\n"
 "            lappend dirs [file join [file dirname $tcl_library] itcl$patchLevel]\n"
 "            set bindir [file dirname [info nameofexecutable]]\n"
 "            lappend dirs [file join . library]\n"
diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBuiltin.c tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBuiltin.c
--- tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBuiltin.c	2025-07-25 14:37:07
+++ tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/generic/itclBuiltin.c	2025-10-14 12:18:23
@@ -45,6 +45,9 @@
 "            if {[info exists env(ITCL_LIBRARY)]} {\n"
 "                lappend dirs $env(ITCL_LIBRARY)\n"
 "            }\n"
+"            foreach d $::auto_path {\n"
+"                lappend dirs [file join $d itcl$patchLevel]\n"
+"            }\n"
 "            lappend dirs [file join [file dirname $tcl_library] itcl$patchLevel]\n"
 "            set bindir [file dirname [info nameofexecutable]]\n"
 "	    lappend dirs [file join . library]\n"
diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/generic/itclParse.c tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/generic/itclParse.c
--- tcltk-8.6.17.orig/tcl8.6.17/pkgs/itcl4.3.4/generic/itclParse.c	2025-07-25 14:37:07
+++ tcltk-8.6.17/tcl8.6.17/pkgs/itcl4.3.4/generic/itclParse.c	2025-10-14 12:18:16
@@ -60,6 +60,9 @@
 "            if {[info exists env(ITCL_LIBRARY)]} {\n"
 "                lappend dirs $env(ITCL_LIBRARY)\n"
 "            }\n"
+"            foreach d $::auto_path {\n"
+"                lappend dirs [file join $d itcl$patchLevel]\n"
+"            }\n"
 "            lappend dirs [file join [file dirname $tcl_library] itcl$patchLevel]\n"
 "            set bindir [file dirname [info nameofexecutable]]\n"
 "            lappend dirs [file join . library]\n"
diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/pkgs/tdbc1.1.12/configure tcltk-8.6.17/tcl8.6.17/pkgs/tdbc1.1.12/configure
--- tcltk-8.6.17.orig/tcl8.6.17/pkgs/tdbc1.1.12/configure	2025-07-25 15:14:19
+++ tcltk-8.6.17/tcl8.6.17/pkgs/tdbc1.1.12/configure	2025-10-13 22:45:38
@@ -9593,9 +9593,9 @@
 	eval tdbc_STUB_LIB_FLAG="-ltdbcstub"
     fi
 
-    tdbc_BUILD_LIB_SPEC="-L`$CYGPATH $(pwd)` ${tdbc_LIB_FLAG}"
+    tdbc_BUILD_LIB_SPEC="`$CYGPATH $(pwd)`/${PKG_LIB_FILE}"
     tdbc_LIB_SPEC="-L`$CYGPATH ${pkglibdir}` ${tdbc_LIB_FLAG}"
-    tdbc_BUILD_STUB_LIB_SPEC="-L`$CYGPATH $(pwd)` ${tdbc_STUB_LIB_FLAG}"
+    tdbc_BUILD_STUB_LIB_SPEC="`$CYGPATH $(pwd)`/${PKG_STUB_LIB_FILE}"
     tdbc_STUB_LIB_SPEC="-L`$CYGPATH ${pkglibdir}` ${tdbc_STUB_LIB_FLAG}"
     tdbc_BUILD_STUB_LIB_PATH="`$CYGPATH $(pwd)`/${PKG_STUB_LIB_FILE}"
     tdbc_STUB_LIB_PATH="`$CYGPATH ${pkglibdir}`/${PKG_STUB_LIB_FILE}"
diff -Nurd tcltk-8.6.17.orig/tcl8.6.17/unix/configure tcltk-8.6.17/tcl8.6.17/unix/configure
--- tcltk-8.6.17.orig/tcl8.6.17/unix/configure	2025-07-31 13:29:02
+++ tcltk-8.6.17/tcl8.6.17/unix/configure	2025-10-14 09:03:34
@@ -19215,13 +19215,13 @@
     # libdir must be a fully qualified path and not ${exec_prefix}/lib
     eval libdir="$libdir"
     # default install directory for bundled packages
-    PACKAGE_DIR="$libdir"
+    PACKAGE_DIR="@TCL_LIBDIRS_VERSIONED@"
     if test "${TCL_LIB_VERSIONS_OK}" = "ok"; then
 	TCL_LIB_FLAG="-ltcl${TCL_VERSION}"
     else
 	TCL_LIB_FLAG="-ltcl`echo ${TCL_VERSION} | tr -d .`"
     fi
-    TCL_BUILD_LIB_SPEC="-L`pwd | sed -e 's/ /\\\\ /g'` ${TCL_LIB_FLAG}"
+    TCL_BUILD_LIB_SPEC="`pwd`/${TCL_LIB_FILE}"
     TCL_LIB_SPEC="-L${libdir} ${TCL_LIB_FLAG}"
 fi
 VERSION='${VERSION}'
@@ -19265,7 +19265,7 @@
     TCL_STUB_LIB_FLAG="-ltclstub`echo ${TCL_VERSION} | tr -d .`"
 fi
 
-TCL_BUILD_STUB_LIB_SPEC="-L`pwd | sed -e 's/ /\\\\ /g'` ${TCL_STUB_LIB_FLAG}"
+TCL_BUILD_STUB_LIB_SPEC="`pwd`/${TCL_STUB_LIB_FILE}"
 TCL_STUB_LIB_SPEC="-L${TCL_STUB_LIB_DIR} ${TCL_STUB_LIB_FLAG}"
 TCL_BUILD_STUB_LIB_PATH="`pwd`/${TCL_STUB_LIB_FILE}"
 TCL_STUB_LIB_PATH="${TCL_STUB_LIB_DIR}/${TCL_STUB_LIB_FILE}"
@@ -19449,7 +19449,7 @@
 
 
 
-CFLAGS="${CFLAGS} ${CPPFLAGS}"; CPPFLAGS=""
+EXTRA_CC_SWITCHES="${EXTRA_CC_SWITCHES} ${CPPFLAGS}"; CPPFLAGS=""
 
 : ${CONFIG_STATUS=./config.status}
 ac_clean_files_save=$ac_clean_files
diff -Nurd tcltk-8.6.17.orig/tk8.6.17/unix/Makefile.in tcltk-8.6.17/tk8.6.17/unix/Makefile.in
--- tcltk-8.6.17.orig/tk8.6.17/unix/Makefile.in	2025-08-13 15:42:08
+++ tcltk-8.6.17/tk8.6.17/unix/Makefile.in	2025-10-13 22:49:18
@@ -150,7 +150,7 @@
 # X11 include files accessible (the configure script will try to
 # set this value, and will cause it to be an empty string if the
 # include files are accessible via /usr/include).
-X11_INCLUDES		= @XINCLUDES@
+X11_INCLUDES		= $(XFT_CFLAGS) @XINCLUDES@
 
 AQUA_INCLUDES		= -I$(MAC_OSX_DIR) -I$(XLIB_DIR)
 
@@ -267,6 +267,9 @@
 LIBS = @LIBS@ $(X11_LIB_SWITCHES) @TCL_LIBS@
 WISH_LIBS = $(TCL_LIB_SPEC) @LIBS@ $(X11_LIB_SWITCHES) @TCL_LIBS@ @EXTRA_WISH_LIBS@
 
+# support for embedded libraries on Darwin / Mac OS X
+DYLIB_INSTALL_DIR       = ${libdir}
+
 # The symbols below provide support for dynamic loading and shared
 # libraries.  See configure.in for a description of what the
 # symbols mean.  The values of the symbols are normally set by the
@@ -284,9 +287,6 @@
 CC_SEARCH_FLAGS	= @CC_SEARCH_FLAGS@
 LD_SEARCH_FLAGS	= @LD_SEARCH_FLAGS@
 
-# support for embedded libraries on Darwin / Mac OS X
-DYLIB_INSTALL_DIR	= $(libdir)
-
 # support for building the Aqua resource file
 TK_RSRC_FILE		= @TK_RSRC_FILE@
 WISH_RSRC_FILE		= @WISH_RSRC_FILE@
@@ -330,19 +330,19 @@
 CC			= @CC@
 
 CC_SWITCHES_NO_STUBS = -I${UNIX_DIR} -I${GENERIC_DIR} -I${BMAP_DIR} \
-${@TK_WINDOWINGSYSTEM@_INCLUDES} ${CFLAGS} ${CFLAGS_WARNING} \
+${CFLAGS} ${CFLAGS_WARNING} \
 ${SHLIB_CFLAGS} -I${TCL_GENERIC_DIR} -I${TCL_PLATFORM_DIR} ${AC_FLAGS} \
 ${PROTO_FLAGS} ${SECURITY_FLAGS} ${MEM_DEBUG_FLAGS} ${KEYSYM_FLAGS} \
-${NO_DEPRECATED_FLAGS} @EXTRA_CC_SWITCHES@
+${NO_DEPRECATED_FLAGS} @EXTRA_CC_SWITCHES@ ${@TK_WINDOWINGSYSTEM@_INCLUDES}
 
 CC_SWITCHES = $(CC_SWITCHES_NO_STUBS) @TCL_STUB_FLAGS@
 
 APP_CC_SWITCHES = $(CC_SWITCHES_NO_STUBS) @EXTRA_APP_CC_SWITCHES@
 
 DEPEND_SWITCHES = -I${UNIX_DIR} -I${GENERIC_DIR} -I${BMAP_DIR} \
-${@TK_WINDOWINGSYSTEM@_INCLUDES} ${CFLAGS} -I${TCL_GENERIC_DIR} \
+${CFLAGS} -I${TCL_GENERIC_DIR} \
 -I${TCL_PLATFORM_DIR} ${AC_FLAGS} ${PROTO_FLAGS} ${SECURITY_FLAGS} \
-${MEM_DEBUG_FLAGS} ${KEYSYM_FLAGS} @EXTRA_CC_SWITCHES@
+${MEM_DEBUG_FLAGS} ${KEYSYM_FLAGS} @EXTRA_CC_SWITCHES@ ${@TK_WINDOWINGSYSTEM@_INCLUDES}
 
 WISH_OBJS = tkAppInit.o
 
@@ -1203,7 +1203,7 @@
 
 # NB: tkUnixRFont.o uses nondefault CFLAGS
 tkUnixRFont.o: $(UNIX_DIR)/tkUnixRFont.c
-	$(CC) -c $(CC_SWITCHES) $(XFT_CFLAGS) $(UNIX_DIR)/tkUnixRFont.c
+	$(CC) -c $(CC_SWITCHES) $(UNIX_DIR)/tkUnixRFont.c
 
 tkUnixInit.o: $(UNIX_DIR)/tkUnixInit.c tkConfig.sh
 	$(CC) -c $(CC_SWITCHES) \
diff -Nurd tcltk-8.6.17.orig/tk8.6.17/unix/configure tcltk-8.6.17/tk8.6.17/unix/configure
--- tcltk-8.6.17.orig/tk8.6.17/unix/configure	2025-08-13 15:42:09
+++ tcltk-8.6.17/tk8.6.17/unix/configure	2025-10-13 22:43:08
@@ -10115,19 +10115,14 @@
 	echo "$as_me:$LINENO: result: $enable_xft" >&5
 echo "${ECHO_T}$enable_xft" >&6
     else
-	found_xft="yes"
-			XFT_CFLAGS=`xft-config --cflags 2>/dev/null` || found_xft="no"
-	XFT_LIBS=`xft-config --libs 2>/dev/null` || found_xft="no"
-	if test "$found_xft" = "no" ; then
 	    found_xft=yes
 	    XFT_CFLAGS=`pkg-config --cflags xft fontconfig 2>/dev/null` || found_xft="no"
 	    XFT_LIBS=`pkg-config --libs xft fontconfig 2>/dev/null` || found_xft="no"
-	fi
 	echo "$as_me:$LINENO: result: $found_xft" >&5
 echo "${ECHO_T}$found_xft" >&6
 		if test "$found_xft" = "yes" ; then
 	    tk_oldCFlags=$CFLAGS
-	    CFLAGS="$CFLAGS $XINCLUDES $XFT_CFLAGS"
+	    CFLAGS="$CFLAGS $XFT_CFLAGS $XINCLUDES"
 	    tk_oldLibs=$LIBS
 	    LIBS="$tk_oldLIBS $XFT_LIBS $XLIBSW"
 	    echo "$as_me:$LINENO: checking for X11/Xft/Xft.h" >&5
@@ -10192,7 +10187,7 @@
 	fi
 		if test "$found_xft" = "yes" ; then
 	    tk_oldCFlags=$CFLAGS
-	    CFLAGS="$CFLAGS $XINCLUDES $XFT_CFLAGS"
+	    CFLAGS="$CFLAGS $XFT_CFLAGS $XINCLUDES"
 	    tk_oldLibs=$LIBS
 	    LIBS="$tk_oldLIBS $XFT_LIBS $XLIBSW"
 
@@ -11176,7 +11171,7 @@
 	else
 	    TK_LIB_FLAG="-ltk`echo ${TK_VERSION} | tr -d .`"
 	fi
-	TK_BUILD_LIB_SPEC="-L`pwd | sed -e 's/ /\\\\ /g'` ${TK_LIB_FLAG}"
+	TK_BUILD_LIB_SPEC="`pwd`/${TK_LIB_FILE}"
     fi
     TK_LIB_SPEC="-L${libdir} ${TK_LIB_FLAG}"
 fi
@@ -11196,7 +11191,7 @@
     TK_STUB_LIB_FLAG="-ltkstub`echo ${TK_VERSION} | tr -d .`"
 fi
 
-TK_BUILD_STUB_LIB_SPEC="-L`pwd | sed -e 's/ /\\\\ /g'` ${TK_STUB_LIB_FLAG}"
+TK_BUILD_STUB_LIB_SPEC="`pwd`/${TK_STUB_LIB_FILE}"
 TK_STUB_LIB_SPEC="-L${TK_STUB_LIB_DIR} ${TK_STUB_LIB_FLAG}"
 TK_BUILD_STUB_LIB_PATH="`pwd`/${TK_STUB_LIB_FILE}"
 TK_STUB_LIB_PATH="${TK_STUB_LIB_DIR}/${TK_STUB_LIB_FILE}"
@@ -11385,7 +11380,7 @@
 LTLIBOBJS=$ac_ltlibobjs
 
 
-CFLAGS="${CFLAGS} ${CPPFLAGS}"; CPPFLAGS=""
+EXTRA_CC_SWITCHES="${EXTRA_CC_SWITCHES} ${CPPFLAGS}"; CPPFLAGS=""
 
 : ${CONFIG_STATUS=./config.status}
 ac_clean_files_save=$ac_clean_files
diff -Nurd tcltk-8.6.17.orig/tk8.6.17/unix/tkConfig.sh.in tcltk-8.6.17/tk8.6.17/unix/tkConfig.sh.in
--- tcltk-8.6.17.orig/tk8.6.17/unix/tkConfig.sh.in	2025-08-13 15:42:09
+++ tcltk-8.6.17/tk8.6.17/unix/tkConfig.sh.in	2025-10-13 22:43:08
@@ -31,7 +31,7 @@
 TK_LIB_FILE='@TK_LIB_FILE@'
 
 # Additional libraries to use when linking Tk.
-TK_LIBS='@XLIBSW@ @XFT_LIBS@ @LIBS@ @TCL_LIBS@'
+TK_LIBS='@XFT_LIBS@ @XLIBSW@ @LIBS@ @TCL_LIBS@'
 
 # Top-level directory in which Tk's platform-independent files are
 # installed.
