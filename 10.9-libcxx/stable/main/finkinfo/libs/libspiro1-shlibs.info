Package: libspiro1-shlibs
Epoch: 1
Version: 20240903
Revision: 1
License: GPL
Description: Convert spiro points to bezier splines
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>
Homepage: https://github.com/fontforge/libspiro

Source: https://github.com/fontforge/libspiro/archive/%v.tar.gz
Source-Checksum: SHA256(cf0251eb5f3545cce365b727a4a56a2f1292f1ef29245c2045c83e28f8a1df42)
SourceRename: libspiro-%v.tar.gz

BuildDepends: <<
	autoconf2.6,
	automake1.15-core,
	libtool2
<<
NoSetCPPFLAGS: true
NoSetLDFLAGS: true

# Short-circuit a broken autoconf test (only looks for actual symbol
# even if it's a macro in a header).
ConfigureParams: <<
	--disable-silent-rules \
	ac_cv_func_isfinite=yes \
	ac_cv_func_isinfinite=yes \
	--disable-static
<<
CompileScript: <<
	AUTOMAKE=automake-1.15 ACLOCAL=aclocal-1.15 autoreconf -i
	automake-1.15 --foreign -Wall
	%{default_script}
<<

InfoTest: TestScript: make check || exit 2

InstallScript: make install DESTDIR=%d
Shlibs: %p/lib/libspiro.1.dylib 2.0.0 %n (>= 20221101-1)

DocFiles: AUTHORS ChangeLog COPYING NEWS README*

SplitOff: <<
	Package: libspiro1
	Depends: %N (= %e:%v-%r)
	BuildDependsOnly: true
	Conflicts: <<
		libspiro0,
		libspiro1
	<<
	Replaces: <<
		libspiro0,
		libspiro1
	<<
	Files: <<
		include
		lib/libspiro.dylib
		lib/libspiro.la
		lib/pkgconfig
		share/man/man3
	<<
	DocFiles: AUTHORS ChangeLog COPYING NEWS README*
<<
