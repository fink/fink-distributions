Package: npth
Version: 1.8
Revision: 1
Source: https://www.gnupg.org/ftp/gcrypt/%n/%n-%v.tar.bz2
Source-Checksum: SHA256(8bd24b4f23a3065d6e5b26e98aba9ce783ea4fd781069c1b35d149694e90ca3e)
BuildDependsOnly: True
BuildDepends: fink-package-precedence
Depends: %n-shlibs (= %v-%r)

PatchScript: perl -pi -e 's/no_undefined\s*=\s*$/no_undefined = -no-undefined/' src/Makefile.in

CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep=%n .
<<
InfoTest: <<
    TestScript: make check || exit 2
<<

InstallScript: make DESTDIR=%d install
DocFiles: README COPYING.LIB ChangeLog NEWS AUTHORS

SplitOff: <<
  Package: %N-shlibs
  Shlibs: %p/lib/libnpth.0.dylib 4.0.0 %n (>= 1.8-1)
  Files: lib/libnpth.0.dylib
  DocFiles: COPYING.LIB
<<

Description: New GNU Portable Threads Library
DescDetail: <<
nPth is a library to provide the GNU Pth API and thus a non-preemptive
threads implementation.

In contrast to GNU Pth, nPth is based on the system's standard threads
implementation. This allows the use of libraries which are not
compatible to GNU Pth. Experience with a Windows Pth emulation showed
that this is a solid way to provide a co-routine based framework.
<<
Homepage: https://www.gnupg.org/software/npth/index.html
License: GPL
Maintainer: None <fink-devel@lists.sourceforge.net>
