Package: libevent1.4-shlibs
Version: 1.4.15
Revision: 4
Description: Event notification library, version 1.4
License: BSD
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>

Source: mirror:sourceforge:project/levent/libevent/libevent-1.4/libevent-%v.tar.gz
Source-Checksum: SHA256(4eabba1bf046819f4b4976a75b96835c0a23f6d209c4e283ab856650c87993be)

BuildDepends: <<
	autoconf2.6,
	automake1.15,
	fink (>= 0.32),
	fink-package-precedence,
	libtool2
<<

PatchFile: %n.patch
PatchFile-MD5: fc53bbd624392fb87dcf5d71816b6829
PatchScript: <<
	%{default_script}
	# Apple does not have a stable path on all fink platforms.
	# Anyone feel free to write .info %r-variant .info for Dist
	# that are /usr/bin/python vs /usr/bin/python3 (assuming this
	# is even clean for python3). See also BDO pkg RuntimeDepends
	perl -pi -e 's,^#!.*python*,#!%p/bin/python2.7,' event_rpcgen.py
	mv configure.in configure.ac
	./autogen.sh
<<

ConfigureParams: --disable-static
CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep=libevent1.4 .
<<

# Tests pass but require network access.
#InfoTest: <<
#	TestScript: <<
#		perl -pi -e 's|echo|/bin/echo|' test/test.sh
#		make verify || exit 2
#	<<
#<<

InstallScript: make install DESTDIR=%d
Shlibs: <<
	%p/lib/libevent_core-1.4.2.dylib 5.0.0 %n (>= 1.4.14b-1)
	%p/lib/libevent_extra-1.4.2.dylib 5.0.0 %n (>= 1.4.14b-1)
	%p/lib/libevent-1.4.2.dylib 5.0.0 %n (>= 1.4.14b-1)
<<

Homepage: http://libevent.org/
DescDetail: <<
 The libevent API provides a mechanism to execute a callback function when
 a specific event occurs on a file descriptor or after a timeout has been
 reached. Furthermore, libevent also supports callbacks due to signals or
 regular timeouts.
<<
DocFiles: ChangeLog README

SplitOff: <<
	Package: libevent1.4
	Depends: %N (= %v-%r)
	RuntimeDepends: python27
	Conflicts: <<
		libev4,
		libevent1.4,
		libevent2,
		libevent2.1,
		libevent2.1.7
	<<
	Replaces: <<
		libev4,
		libevent1.4,
		libevent2,
		libevent2.1,
		libevent2.1.7
	<<
	BuildDependsOnly: true
	Files: <<
		bin
		include
		lib/libevent_core.{dylib,la}
		lib/libevent_extra.{dylib,la}
		lib/libevent.{dylib,la}
		share/man
	<<
	DocFiles: ChangeLog README
<<
