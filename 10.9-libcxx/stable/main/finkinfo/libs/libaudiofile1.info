Package: libaudiofile1
Version: 0.3.6
Revision: 2
Epoch: 1
###
Depends: %N-shlibs (= %e:%v-%r)
BuildDepends: <<
  fink (>= 0.32.0),
  fink-package-precedence,
  libflac12-dev,
  pkgconfig
<<
BuildDependsOnly: true
Replaces: audiofile
Conflicts: audiofile
###
Source: https://audiofile.68k.org/audiofile-%v.tar.gz
Source-Checksum: SHA256(cdc60df19ab08bfe55344395739bb08f50fc15c92da3962fac334d3bff116965)
Source2: mirror:debian:pool/main/a/audiofile/audiofile_%v-7.debian.tar.xz
Source2-Checksum: SHA256(41f1cf70dd6f1ddf30ac452f94835d108bd585eef98586f4d40b0af69514baa2)
###
# Equivalent to https://github.com/mpruett/audiofile/commit/b62c902dd258125cac86cd2df21fc898035a43d3
# but applies on top of debian's 01_gcc6.patch
# Also https://patchwork.yoctoproject.org/project/oe/patch/20251114013528.108047-1-raj.khem@gmail.com
PatchFile: %n.patch
PatchFile-MD5: 10b2adc418c80f6f62890b1c62838fe0
PatchScript: <<
#!/bin/sh -ev
	for f in `cat ../debian/patches/series`; do
		patch -p1 < ../debian/patches/$f
	done
	%{default_script}
<<
GCC: 4.0
ConfigureParams: <<
	--with-pic \
	--enable-shared \
	--enable-static \
	--mandir=%i/share/man \
	--infodir=%p/share/info \
	--libexecdir=%p/lib \
	--enable-dependency-tracking
<<
CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep=libaudiofile1 .
<<
###
InfoTest: TestScript: make check || exit 2
###
DocFiles: COPYING* README
###
NoSetLDFLAGS: true
SetCXXFLAGS: -DGTEST_USE_OWN_TR1_TUPLE=1
###
SplitOff: <<
  Package: %N-shlibs
  Depends: libflac8
  Suggests: audiofile-bin
  Files: <<
    lib/libaudiofile.*.dylib
  <<
  Shlibs: <<
    %p/lib/libaudiofile.1.dylib 2.0.0 libaudiofile1-shlibs (>= 0.3.4-1)
  <<
  DocFiles: ACKNOWLEDGEMENTS AUTHORS COPYING* ChangeLog NEWS NOTES README TODO
  Description: Audio File Library *Shared Libraries*
<<
SplitOff2: <<
  Package: audiofile-bin
  Depends: %N-shlibs (= %e:%v-%r), libflac12
  Files: <<
    bin/sfconvert
    bin/sfinfo
    share/man/man1
  <<
  DocFiles: COPYING* README
  Description: Audio File Library *Binaries*
<<
###
Description: Audio File Library *Developement Files*
DescDetail: <<
  The Audio File Library provides a uniform and elegant API for
  accessing standard digital audio file formats, such as AIFF/AIFF-C,
  WAVE, and NeXT/Sun .snd/.au. 
<<
DescPackaging: <<
  static library needed to run the test suite
  https://github.com/mpruett/audiofile/issues/15
<<
###
License: LGPL
Maintainer: Justin F. Hallett <thesin@users.sourceforge.net>
Homepage: https://audiofile.68k.org/
