Info2: <<
Package: bundler-rb%type_pkg[ruby]
Version:  2.4.7
Revision: 1
Description: Manage gem dependencies
Type: ruby (2.7 3.2)
License: BSD
Maintainer: Daniel Johnson <daniel@daniel-johnson.org>

Depends: <<
	ruby%type_pkg[ruby]
<<
BuildDepends: <<
	ruby%type_pkg[ruby]-dev
<<

Source: https://rubygems.org/downloads/bundler-%v.gem
Source-Checksum: SHA256(b1941d6405890fb3da1fcaacf8d0d64eee427776019ce18856cf863b13fd1fb9)
NoSourceDirectory: true

CompileScript: <<
	echo ""
<<
InstallScript: <<
	#!/bin/sh -ev
	install -d -m 755 %i/lib/ruby/gems/%type_raw[ruby]
	export RUBYGEMS_PREVENT_UPDATE_SUGGESTION=1
	%p/bin/gem%type_raw[ruby] install \
		--local \
		--force \
		--verbose \
		--vendor \
		--platform=%m-apple-darwin \
		--build-root %d \
		--document rdoc \
		--ignore-dependencies \
		--no-post-install-message \
		bundler-%v.gem

	# clean up build time directories
	rm -rf %i/var/lib/gems/%type_raw[ruby]/cache

	# Don't look for the unversioned 'gem' command
	perl -pi -e 's;(gem) (build|install|push);%p/bin/gem%type_raw[ruby] $2;g' %i/lib/ruby/vendor_ruby/gems/%type_raw[ruby]/gems/bundler-%v/lib/bundler/gem_helper.rb
<<

PreInstscript: <<
	# Previous versions lived outside vendor_ruby, so need to clean them before we install the new ones.
	# Only run this if we're upgrading AND the previous file location exists.
	if [[ $1 = "upgrade" && -f %p/lib/ruby/gems/%type_raw[ruby]/bin/bundler ]]; then
		echo "Removing u-a for old bundler-rb%type_pkg[ruby] location."
		update-alternatives --verbose --remove bundler %p/lib/ruby/gems/%type_raw[ruby]/bin/bundler
	fi
<<
PostInstScript: <<
	update-alternatives --install %p/bin/bundler bundler %p/lib/ruby/vendor_ruby/gems/%type_raw[ruby]/bin/bundler %type_pkg[ruby] \
	--slave %p/bin/bundle bundle %p/lib/ruby/vendor_ruby/gems/%type_raw[ruby]/bin/bundle
<<

PreRmScript: <<
	if [ $1 != "upgrade" ]; then
		update-alternatives --remove bundler %p/lib/ruby/vendor_ruby/gems/%type_raw[ruby]/bin/bundler
	fi
<<

Homepage: https://bundler.io/
<<
