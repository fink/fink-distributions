Info4: <<

Package: tox-py%type_pkg[python]
Version: 4.24.1
Revision: 1
Maintainer: None <fink-devel@lists.sourceforge.net>
License: BSD
Type: python (3.8 3.9 3.10)
Homepage: https://pypi.org/project/tox/
Source: https://files.pythonhosted.org/packages/source/t/tox/tox-%v.tar.gz
Source-Checksum: SHA256(083a720adbc6166fff0b7d1df9d154f9d00bfccb9403b8abf6bc0ee435d6a62e)
PatchFile: %{ni}.patch
PatchFile-Checksum: SHA256(d891cd72b1b1833121305c3584d5ca7195bc4e96091c8b8e6dfc40f47cea8ac0)

Depends: <<
	python%type_pkg[python]-shlibs,
	pyproject-api-py%type_pkg[python],
	pytest-py%type_pkg[python],
	virtualenv-py%type_pkg[python],
	pluggy-py%type_pkg[python],
	colorama-py%type_pkg[python]
<<
BuildDepends: <<
	bootstrap-modules-py%type_pkg[python],
	setuptools-tng-py%type_pkg[python]
<<
Description: Testing in virtualenvs

DescDetail: <<
Tox is a generic virtualenv management and test command line tool for:

- checking the package installs correctly with different Python
  versions and interpreters
- running tests in each of the environments, configuring your test
  tool of choice
- acting as a frontend to Continuous Integration servers, greatly
  reducing boilerplate and merging CI and shell-based testing.

tox aims to automate and standardize testing in Python. It is part of a larger
vision of easing the packaging, testing and release process of Python software.
<<
DescPackaging: <<
Previous maintainer: Kurt Schwehr <goatbar@users.sourceforge.net>
<<

DocFiles: LICENSE PKG-INFO README.md

# Tests should not be run against the installed version and are not included in the package after installation,
# but at least make sure they are running the correct script variants.
PatchScript: <<
#    sed 's|PY_PKG|%type_pkg[python]|g;s|PY_RAW|%type_raw[python]|g;' %{PatchFile} | patch -p1
#    perl -pi -e 's|(basepython = python)(3.6)|${1}%type_raw[python]|g;' tox.ini
#    perl -pi -e 's|(python)(.-[cm])|%p/bin/${1}%type_raw[python]${2}|g;' tox.ini
#    perl -pi -e 's|(python)(3.6)(.-[cm])|%p/bin/${1}%type_raw[python]${3}|g;' tox.ini
#    perl -pi -e 's|(sphinx-build)(.-[d])|%p/bin/${1}%type_raw[python]${2}|g;' tox.ini
<<

CompileScript: <<
	PYTHONPATH=%p/share/bootstrap-modules-python%type_pkg[python] %p/bin/python%type_raw[python] -m build --wheel --no-isolation --skip-dependency-check
<<

InfoTest: <<
	TestScript: <<
		PYTHONPATH=%b/build/lib %p/bin/python%type_raw[python] pytest -e %type_raw[python] || exit 2
	<<
<<
InstallScript: <<
	#!/bin/sh -ev
	PYTHONPATH=%p/share/bootstrap-modules-python%type_pkg[python] %p/bin/python%type_raw[python] -m installer --destdir %d dist/*.whl
	for i in tox ; do
		mv %i/bin/$i %i/bin/$i-py%type_pkg[python]
	done
<<

PostInstScript: <<
    update-alternatives --verbose --install %p/bin/tox tox-py %p/bin/tox-py%type_pkg[python] %type_pkg[python]
    echo ''
    echo 'If you have just built and installed the tox dependencies'
    echo 'coverage-py%type_pkg[python], hypothesis-py%type_pkg[python], pytest-py%type_pkg[python], pytest-mock-py%type_pkg[python]'
    echo 'for the first time, they will have been built with their tests disabled.'
    echo 'You may now test their builds using the `fink -m rebuild` command.'
<<

PreRmScript: <<
    if [ $1 != "upgrade" ]; then
        update-alternatives --verbose --remove tox-py %p/bin/tox-py%type_pkg[python]
    fi
<<

# Info4
<<
