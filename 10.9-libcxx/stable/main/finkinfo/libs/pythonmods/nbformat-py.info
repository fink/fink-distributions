# -*- coding: ascii; tab-width: 4; x-counterpart: nbformat-py.patch -*-
Info2: <<

Package: nbformat-py%type_pkg[python]
Version: 4.4.0
Revision: 1
Maintainer: Derek Homeier <dhomeie@gwdg.de>
License: BSD
Type: python (2.7 3.5 3.6 3.7)
Homepage: https://pypi.python.org/project/nbformat
# https://pypi.python.org/packages/source/n/nbformat/nbformat-4.4.0.tar.gz#md5=684c4dc3c6fd8036fd1ae1c908003e23
Source: https://files.pythonhosted.org/packages/source/n/nbformat/nbformat-%v.tar.gz
Source-Checksum: SHA256(f7494ef0df60766b7cabe0a3651556345a963b74dbc16bc7c18479041170d402)

Depends: <<
  python%type_pkg[python]-shlibs,
  jinja2-py%type_pkg[python],
  jupyter-core-py%type_pkg[python],
  jupyter-client-py%type_pkg[python],
  ipython-genutils-py%type_pkg[python],
  traitlets-py%type_pkg[python]
<<
BuildDepends: python%type_pkg[python], setuptools-tng-py%type_pkg[python], sphinx-py%type_pkg[python]

Description: Jupyter Notebooks

DescDetail: <<
This package contains the base implementation of the Jupyter Notebook
format, and Python APIs for working with notebooks.
<<

PatchFile: nbformat-py.patch
PatchFile-MD5: 1bdd3a8691aac0947a383898311db91b
PatchScript: sed 's|@PREFIX@|%p|g;s|@PY_PKG@|%type_pkg[python]|g;s|@PY_RAW@|%type_raw[python]|g' < %{PatchFile} | patch -p1

CompileScript: <<
    %p/bin/python%type_raw[python] setup.py build
    make -C docs LANG=en_US.UTF-8 PYTHONPATH=%b/build/lib PYTHON=%p/bin/python%type_raw[python] SPHINXBUILD=%p/bin/sphinx-build%type_raw[python] html
<<

InfoTest: <<
    TestDepends: <<
        pytest-py%type_pkg[python],
        pytest-cov-py%type_pkg[python],
        testpath-py%type_pkg[python]
    <<
    TestScript: <<
        PYTHONPATH=build/lib %p/bin/python%type_raw[python] -Bm pytest || exit 2
        find build/lib -name '*.pyc' -delete
    <<
    TestSuiteSize: small
<<

InstallScript: <<
    #!/bin/bash -ev
    %p/bin/python%type_raw[python] setup.py install --root=%d
    for file in %i/bin/*; do
        echo mv ${file}{,-py%type_pkg[python]}
        mv ${file}{,-py%type_pkg[python]}
    done
<<

PostInstScript: <<
    # Remove the old if they exist
    update-alternatives --auto jupyter-trust

    # Now the new setup
    update-alternatives --install %p/bin/jupyter-trust jupyter-trust %p/bin/jupyter-trust-py%type_pkg[python] %type_pkg[python]
    echo "The script 'jupyter-trust' installed in %p/bin/ is a symlink"
    echo "automatically updated by the update-alternatives utility."
    echo "If you install multiple flavours of nbformat, the symlink"
    echo "will point to the higher flavour by default."
    echo "You can inspect the links by running:"
    echo "  update-alternatives --list jupyter-trust"
    echo "  update-alternatives --display jupyter-trust"
<<

PreRmScript: <<
    if [ $1 != "upgrade" ]; then
        update-alternatives --verbose --remove jupyter-trust %p/bin/jupyter-trust-py%type_pkg[python]
    else
        echo "Do not remove during upgrade"
    fi
<<

DocFiles: README.md CONTRIBUTING.md COPYING.md PKG-INFO docs/_build/html

DescPort: <<
Sphinx build with intersphinx directory entries to jupyter-core only to avoid
circular deps
<<
# Info2
<<
