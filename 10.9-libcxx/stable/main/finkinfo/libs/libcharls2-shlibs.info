Package: libcharls2-shlibs
Version: 2.4.2
Revision: 1
Source: https://github.com/team-charls/charls/archive/refs/tags/%v.tar.gz
Source-Checksum: SHA256(d1c2c35664976f1e43fec7764d72755e6a50a80f38eca70fcc7553cad4fe19d9)
SourceRename: charls-%v.tar.gz
BuildDepends: <<
	cmake,
	fink-buildenv-modules,
	fink-package-precedence
<<
CompileScript: <<
#!/bin/sh -ev
	. %p/sbin/fink-buildenv-cmake.sh
	mkdir finkbuild
	pushd finkbuild
		cmake \
			$FINK_CMAKE_ARGS \
			-DBUILD_SHARED_LIBS=ON \
			-DCMAKE_CXX_FLAGS=-MD \
			..
		make
	popd
	fink-package-precedence --depfile-ext='\.d' --prohibit-bdep=libcharls2-dev .
<<
InstallScript: <<
#!/bin/sh -ev
	pushd finkbuild
		make install DESTDIR=%d
	popd
<<
DocFiles: CHANGELOG.md LICENSE.md README.md SECURITY.md
Shlibs: %p/lib/libcharls.2.dylib 2.0.0 %n (>= 2.4.2-1) 
SplitOff: <<
	Package: libcharls2-dev
	Depends: %N (= %v-%r)
	BuildDependsOnly: true
	Files: <<
		include
		lib/libcharls.dylib
		lib/cmake
		lib/pkgconfig
	<<
	DocFiles: CHANGELOG.md LICENSE.md README.md SECURITY.md
<<
DescPackaging: <<
	Upstream (git) and Debian's packaging of it do not compile on
	Darwin. But gdcm has patched it so it does. We use their fork.

	This was originally a splitoff package of the gdcm package,
	but there was package-naming chaos and dependency-deadlock
	messes. Therefore, we pull it out as its own build, external
	to gdcm.

	Headers in subdir per Deabn socket++ package layout.
<<
Description: C++ JPEG-LS library
Homepage: https://github.com/team-charls/charls
License: BSD
Maintainer: Daniel Macks <dmacks@netspace.org>
