diff -u -aruN unison.orig/unison-2.10.2/Makefile.OCaml unison/unison-2.10.2/Makefile.OCaml
--- unison.orig/unison-2.10.2/Makefile.OCaml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/Makefile.OCaml	2005-09-06 09:00:16.000000000 -0700
@@ -25,7 +25,7 @@
 
 ifeq (${OSCOMP},cygwingnuc) # Define this if compiling with Cygwin GNU C
   OSARCH=win32gnuc
-  ETAGS=c:/emacs/bin/etags
+  ETAGS=/bin/etags
   buildexecutable:: win32rc/unison.res.lib   
 else
 # Win32 system
@@ -60,7 +60,7 @@
 # to Unix '/' separators, and extraneous control-M's are deleted.
 # Unfortunately there is a literal control-M buried in this, I'd rather
 # get rid of it...
-OCAMLLIBDIR=$(shell ocamlc -v | tail -1 | sed -e 's/.* //g' | sed -e 's/\\/\//g' | sed -e 's///g')
+OCAMLLIBDIR=$(shell ocamlc -v | tail -n -1 | sed -e 's/.* //g' | sed -e 's/\\/\//g' | sed -e 's///g')
 
 # User interface style: 
 #   Legal values are
@@ -295,18 +295,35 @@
 #-cclib user32.lib -cclib advapi32.lib -cclib wsock32.lib \
 #               -cclib gdi32.lib -cclib imm32.lib -cclib shell32.lib \
 #               -cclib ole32.lib -cclib uuid.lib
-      CLIBS+=-cclib -llablgtk \
+      ifeq ($(OSCOMP), cygwingnuc)
+        # Cygwin
+        CLIBS+=-cclib -llablgtk \
+           -cclib /usr/lib/libglib.dll.a \
+           -cclib /usr/lib/libgmodule.dll.a \
+           -cclib /usr/lib/libgdk.dll.a \
+           -cclib /usr/lib/libgtk.dll.a \
+           $(WINSYSLIBS)
+        STATICLIBS+=-cclib -llablgtk \
+                -cclib /usr/lib/libglib.a \
+                -cclib /usr/lib/libgmodule.a \
+                -cclib /usr/lib/libgdk.a \
+                -cclib /usr/lib/libgtk.a \
+                $(WINSYSLIBS)
+      else
+        # Win32 with GNU C, but not Cygwin
+        CLIBS+=-cclib -llablgtk \
            -cclib $(GUILIBDIR)/glib-1.3.lib \
            -cclib $(GUILIBDIR)/gmodule-1.3.lib \
            -cclib $(GUILIBDIR)/gdk-1.3.lib \
            -cclib $(GUILIBDIR)/gtk-1.3.lib \
            $(WINSYSLIBS)
-      STATICLIBS+=-cclib -llablgtk \
+        STATICLIBS+=-cclib -llablgtk \
                 -cclib $(GUILIBDIR)/cclibs/glib-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gmodule-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gdk-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gtk-1.3.lib \
                 $(WINSYSLIBS)
+     endif # cygwingnuc
     else
       ifeq ($(OSARCH), solaris)
         STATICLIBS+=-cclib -llablgtk \
@@ -351,18 +368,35 @@
 #-cclib user32.lib -cclib advapi32.lib -cclib wsock32.lib \
 #               -cclib gdi32.lib -cclib imm32.lib -cclib shell32.lib \
 #               -cclib ole32.lib -cclib uuid.lib
-      CLIBS+=-cclib -llablgtk2 \
+      ifeq ($(OSCOMP), cygwingnuc)
+        # Cygwin
+        CLIBS+=-cclib -llablgtk2 \
+           -cclib /usr/lib/libglib-2.0.dll.a \
+           -cclib /usr/lib/libglib-2.0.dll.a \
+           -cclib /usr/lib/libgdk-x11-2.0.dll.a \
+           -cclib /usr/lib/libgtk-x11-2.0.dll.a \
+            $(WINSYSLIBS)
+        STATICLIBS+=-cclib -llablgtk2 \
+                -cclib /usr/lib/libglib-2.0.dll.a \
+                -cclib /usr/lib/libglib-2.0.dll.a \
+                -cclib /usr/lib/libgdk-x11-2.0.dll.a \
+                -cclib /usr/lib/libgtk-x11-2.0.dll.a \
+                 $(WINSYSLIBS)
+      else
+        # Win32 with GNU C, but not Cygwin
+        CLIBS+=-cclib -llablgtk2 \
            -cclib $(GUILIBDIR)/glib-1.3.lib \
            -cclib $(GUILIBDIR)/gmodule-1.3.lib \
            -cclib $(GUILIBDIR)/gdk-1.3.lib \
            -cclib $(GUILIBDIR)/gtk-1.3.lib \
            $(WINSYSLIBS)
-      STATICLIBS+=-cclib -llablgtk2 \
+        STATICLIBS+=-cclib -llablgtk2 \
                 -cclib $(GUILIBDIR)/cclibs/glib-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gmodule-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gdk-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gtk-1.3.lib \
                 $(WINSYSLIBS)
+      endif # cygwingnuc
     else
       ifeq ($(OSARCH), solaris)
         STATICLIBS+=-cclib -llablgtk2 \
@@ -450,7 +484,7 @@
            >>dot.tmp
 	echo '{ rank = same; "Tree"; "Safelist"; }'>>dot.tmp
 	echo '{ rank = same; "Uarg"; "Prefs"; }'>>dot.tmp
-	ocamldot .depend | tail +2 >> dot.tmp
+	ocamldot .depend | tail -n +2 >> dot.tmp
 	-dot -Tps -o DEPENDENCIES.ps dot.tmp
 endif
 
diff -u -aruN unison.orig/unison-2.10.2/copy.ml unison/unison-2.10.2/copy.ml
--- unison.orig/unison-2.10.2/copy.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/copy.ml	2005-09-06 09:00:16.000000000 -0700
@@ -10,14 +10,16 @@
 
 let openFileIn fspath path kind =
   match kind with
-    `DATA   -> Unix.openfile (Fspath.concatToString fspath path)
-                 [Unix.O_RDONLY] 0o444
+    `DATA   -> Unix.descr_of_in_channel
+                 (open_in_gen [Open_rdonly; Open_binary]  0o444
+                    (Fspath.concatToString fspath path))
   | `RESS _ -> Osx.openRessIn fspath path
 
 let openFileOut fspath path kind =
   match kind with
-    `DATA     -> Unix.openfile (Fspath.concatToString fspath path)
-                   [Unix.O_WRONLY;Unix.O_CREAT;Unix.O_EXCL] 0o600
+    `DATA     -> Unix.descr_of_out_channel
+                   (open_out_gen [Open_wronly; Open_creat; Open_excl; Open_binary]
+                       0o600 (Fspath.concatToString fspath path))
   | `RESS len -> Osx.openRessOut fspath path len
 
 let protect f g =
@@ -260,10 +262,9 @@
     fspathTo pathTo realPathTo `DATA update srcFileSize id file_id
     >>= (fun (outfd, infd, bi) ->
   Lwt.catch (fun () ->
-    Lwt_util.run_in_region transmitFileReg (bufferSize srcFileSize) (fun () ->
-      Uutil.showProgress id Uutil.Filesize.zero "f";
-      compressRemotely connFrom
-        (bi, fspathFrom, pathFrom, `DATA, srcFileSize, id, file_id))
+    Uutil.showProgress id Uutil.Filesize.zero "f";
+    compressRemotely connFrom
+      (bi, fspathFrom, pathFrom, `DATA, srcFileSize, id, file_id)
             >>= (fun () ->
     decompressor :=
       Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
@@ -281,16 +282,15 @@
       (`RESS ressLength) update ressLength id file_id
         >>= (fun (outfd, infd, bi) ->
     Lwt.catch (fun () ->
-      Lwt_util.run_in_region transmitFileReg (bufferSize ressLength) (fun () ->
-        Uutil.showProgress id Uutil.Filesize.zero "f";
-        compressRemotely connFrom
-          (bi, fspathFrom, pathFrom,
-           `RESS ressLength, ressLength, id, file_id))
-              >>= (fun () ->
-        decompressor :=
-          Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
-        close_all infd outfd;
-        Lwt.return ()))
+      Uutil.showProgress id Uutil.Filesize.zero "f";
+      compressRemotely connFrom
+        (bi, fspathFrom, pathFrom,
+         `RESS ressLength, ressLength, id, file_id)
+            >>= (fun () ->
+      decompressor :=
+        Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
+      close_all infd outfd;
+      Lwt.return ()))
     (fun e ->
        decompressor :=
          Remote.MsgIdMap.remove file_id !decompressor; (* For GC *)
@@ -367,9 +367,13 @@
 let transmitFile
     rootFrom pathFrom rootTo fspathTo pathTo realPathTo
     update desc fp ress id =
-  transmitFileOnRoot rootTo rootFrom
-    (snd rootFrom, pathFrom, fspathTo, pathTo, realPathTo,
-     update, desc, fp, ress, id)
+  let bufSz = bufferSize (max (Props.length desc) (Osx.ressLength ress)) in
+  (* This must be on the client: any lock on the server side may result
+     in a deadlock under windows *)
+  Lwt_util.run_in_region transmitFileReg bufSz (fun () ->
+    transmitFileOnRoot rootTo rootFrom
+      (snd rootFrom, pathFrom, fspathTo, pathTo, realPathTo,
+       update, desc, fp, ress, id))
 
 (****)
 
diff -u -aruN unison.orig/unison-2.10.2/files.ml unison/unison-2.10.2/files.ml
--- unison.orig/unison-2.10.2/files.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/files.ml	2005-09-06 09:00:16.000000000 -0700
@@ -356,18 +356,20 @@
           debug (fun() -> Util.msg "Creating directory %s/%s\n"
             (root2string rootTo) (Path.toString pTo));
           mkdir rootTo workingDir pTo) >>= (fun initialDesc ->
-        let actions =
-          Update.NameMap.fold
-            (fun name child rem ->
-               copyRec (Path.child pFrom name)
-                       (Path.child pTo name)
-                       (Path.child realPTo name)
-                       child
-               :: rem)
-            children []
-        in
+        let runningThreads = ref [] in
         Lwt.catch
-          (fun () -> Lwt_util.join actions)
+          (fun () ->
+             Update.NameMap.iter
+               (fun name child ->
+                  let thread =
+                    copyRec (Path.child pFrom name)
+                            (Path.child pTo name)
+                            (Path.child realPTo name)
+                            child
+                  in
+                  runningThreads := thread :: !runningThreads)
+               children;
+             Lwt_util.join !runningThreads)
           (fun e ->
              (* If one thread fails (in a non-fatal way), we wait for
                 all other threads to terminate before continuing *)
@@ -381,7 +383,8 @@
                             match e with
                               Util.Transient _ -> Lwt.return ()
                             | _                -> Lwt.fail e))
-                   actions
+                   !runningThreads >>= (fun () ->
+                 Lwt.fail e (* DO NOT FORGET TO RERAISE THE EXCEPTION !!!*))
              | _ ->
                  Lwt.fail e) >>= (fun () ->
         Lwt_util.run_in_region copyReg 1 (fun () ->
@@ -469,8 +472,8 @@
            Lwt_unix.run
              (Update.translatePath root2 path2 >>= (fun path2 ->
               Copy.file root2 path2 root1 workingDir tmppath realPath
-                `Copy (Props.setLength Props.fileSafe (Props.length desc1))
-                 fp1 ress1 id));
+                `Copy (Props.setLength Props.fileSafe (Props.length desc2))
+                 fp2 ress2 id));
            displayDiff
 	     (Fspath.concat workingDir realPath)
              (Fspath.concat workingDir tmppath);
@@ -487,8 +490,8 @@
              (Update.translatePath root1 path1 >>= (fun path1 ->
               (* Note that we don't need the ressource fork *)
               Copy.file root1 path1 root2 workingDir tmppath realPath
-                `Copy (Props.setLength Props.fileSafe (Props.length desc2))
-                 fp2 ress2 id));
+                `Copy (Props.setLength Props.fileSafe (Props.length desc1))
+                 fp1 ress1 id));
            displayDiff
              (Fspath.concat workingDir tmppath)
 	     (Fspath.concat workingDir realPath);
diff -u -aruN unison.orig/unison-2.10.2/fingerprint.ml unison/unison-2.10.2/fingerprint.ml
--- unison.orig/unison-2.10.2/fingerprint.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/fingerprint.ml	2005-09-06 09:00:16.000000000 -0700
@@ -22,7 +22,7 @@
   Util.convertUnixErrorsToTransient
     "digesting subfile"
     (fun () ->
-       let inch = open_in path in
+       let inch = open_in_bin path in
        LargeFile.seek_in inch offset;
        begin try
          let res = Digest.channel inch (Uutil.Filesize.toInt len) in
diff -u -aruN unison.orig/unison-2.10.2/os.ml unison/unison-2.10.2/os.ml
--- unison.orig/unison-2.10.2/os.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/os.ml	2005-09-06 09:00:16.000000000 -0700
@@ -150,10 +150,23 @@
         loop newChildren directory
       in
       let absolutePath = Fspath.concat fspath path in
-      let directory = Fspath.opendir absolutePath in
-      let result = loop [] directory in
-      Unix.closedir directory;
-      result)
+      let directory =
+        try
+          Some (Fspath.opendir absolutePath)
+        with Unix.Unix_error (Unix.ENOENT, _, _) ->
+          (* FIX (in Ocaml): under Windows, when a directory is empty
+             (not even "." and ".."), FindFirstFile fails with
+             ERROR_FILE_NOT_FOUND while ocaml expects the error
+             ERROR_NO_MORE_FILES *)
+          None
+      in
+      match directory with
+        Some directory ->
+          let result = loop [] directory in
+          Unix.closedir directory;
+          result
+      | None ->
+          [])
 
 (*****************************************************************************)
 (*                        ACTIONS ON FILESYSTEM                              *)
@@ -167,14 +180,19 @@
        let absolutePath = Fspath.concatToString fspath path in
        match (Fileinfo.get false fspath path).Fileinfo.typ with
          `DIRECTORY ->
-           Unix.chmod absolutePath 0o700;
+           begin try
+             Unix.chmod absolutePath 0o700
+           with Unix.Unix_error _ -> () end;
            Safelist.iter
              (fun child -> delete fspath (Path.child path child))
              (childrenOf fspath path);
            Unix.rmdir absolutePath
        | `FILE ->
-           if Util.osType <> `Unix then
-             Unix.chmod absolutePath 0o600;
+           if Util.osType <> `Unix then begin
+             try
+               Unix.chmod absolutePath 0o600;
+             with Unix.Unix_error _ -> ()
+           end;
            Unix.unlink absolutePath;
            if Prefs.read Osx.rsrc then begin
              let pathDouble = Osx.appleDoubleFile fspath path in
diff -u -aruN unison.orig/unison-2.10.2/osxsupport.c unison/unison-2.10.2/osxsupport.c
--- unison.orig/unison-2.10.2/osxsupport.c	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/osxsupport.c	2005-09-06 09:00:16.000000000 -0700
@@ -6,6 +6,8 @@
 #include <caml/alloc.h>
 #include <caml/memory.h>
 #ifdef __APPLE__
+#include <sys/types.h>
+#include <sys/stat.h>
 #include <sys/attr.h>
 #include <unistd.h>
 #include <stdio.h>
@@ -115,6 +117,20 @@
   retcode = setattrlist(String_val (path), &attrList, attrBuf.finderInfo,
                         sizeof attrBuf.finderInfo, options);
 
+  if (retcode == -1 && errno == EACCES) {
+    /* Unlike with normal Unix attributes, we cannot set OS X attributes 
+       if file is read-only.  Try making it writable temporarily. */
+    struct stat st;
+    int r = stat(String_val(path), &st);
+    if (r == -1) uerror("setattrlist", path);
+    r = chmod(String_val(path), st.st_mode | S_IWUSR);
+    if (r == -1) uerror("setattrlist", path);
+    /* Try again */
+    retcode = setattrlist(String_val (path), &attrList, attrBuf.finderInfo,
+                          sizeof attrBuf.finderInfo, options);
+    /* Whether or not that worked, we should try to set the mode back. */
+    chmod(String_val(path), st.st_mode);
+  }
   if (retcode == -1) uerror("setattrlist", path);
 
   CAMLreturn (Val_unit);
diff -u -aruN unison.orig/unison-2.10.2/props.ml unison/unison-2.10.2/props.ml
--- unison.orig/unison-2.10.2/props.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/props.ml	2005-09-06 09:00:16.000000000 -0700
@@ -421,7 +421,7 @@
 
 let iCanWrite p =
   try
-    Unix.access p [Unix.R_OK];
+    Unix.access p [Unix.W_OK];
     true
   with
     Unix.Unix_error _ -> false
@@ -615,9 +615,9 @@
 let set fspath path kind p =
   Uid.set fspath path kind p.uid;
   Gid.set fspath path kind p.gid;
-  Perm.set fspath path kind p.perm;
+  TypeCreator.set fspath path kind p.typeCreator;
   Time.set fspath path kind p.time;
-  TypeCreator.set fspath path kind p.typeCreator
+  Perm.set fspath path kind p.perm
 
 let init someHostIsRunningWindows =
   Perm.init someHostIsRunningWindows;
diff -u -aruN unison.orig/unison-2.10.2/recon.ml unison/unison-2.10.2/recon.ml
--- unison.orig/unison-2.10.2/recon.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/recon.ml	2005-09-06 09:00:16.000000000 -0700
@@ -30,6 +30,10 @@
             d := Replica1ToReplica2
           else
             d := Replica2ToReplica1
+        end else if s1=`Deleted && dir=`Newer then begin
+          d := Replica2ToReplica1
+        end else if s2=`Deleted && dir=`Newer then begin
+          d := Replica1ToReplica2
         end
   | _ ->
       ()
diff -u -aruN unison.orig/unison-2.10.2/transport.ml unison/unison-2.10.2/transport.ml
--- unison.orig/unison-2.10.2/transport.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/transport.ml	2005-09-06 09:00:16.000000000 -0700
@@ -15,7 +15,8 @@
   match uiFrom, uiTo with
     _, Updates (File (props, ContentsUpdated (_, _, ress)), _) ->
       (Props.length props, Osx.ressLength ress)
-  | Updates (File _, Previous (_, props, _, ress)), NoUpdates ->
+  | Updates (_, Previous (`FILE, props, _, ress)),
+    (NoUpdates | Updates (File (_, ContentsSame), _)) ->
       (Props.length props, Osx.ressLength ress)
   | _ ->
       assert false
diff -u -aruN unison.orig/unison-2.10.2/ubase/util.ml unison/unison-2.10.2/ubase/util.ml
--- unison.orig/unison-2.10.2/ubase/util.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/ubase/util.ml	2005-09-06 09:00:16.000000000 -0700
@@ -244,14 +244,18 @@
   convertUnixErrorsToTransient "time" Unix.time
 
 let time2string timef =
-  let time = localtime timef in
-  Printf.sprintf
-    "%2d:%.2d on %2d %3s, %4d"
-    time.Unix.tm_hour
-    time.Unix.tm_min
-    time.Unix.tm_mday
-    (monthname time.Unix.tm_mon)
-    (time.Unix.tm_year + 1900)
+  try
+    let time = localtime timef in
+    Printf.sprintf
+      "%2d:%.2d:%.2d on %2d %3s, %4d"
+      time.Unix.tm_hour
+      time.Unix.tm_min
+      time.Unix.tm_sec
+      time.Unix.tm_mday
+      (monthname time.Unix.tm_mon)
+      (time.Unix.tm_year + 1900)
+  with Transient _ ->
+    "(invalid date)"
 
 let percentageOfTotal current total =
   (int_of_float ((float current) *. 100.0 /. (float total)))
@@ -355,19 +359,20 @@
 (*****************************************************************************)
 
 let fileInHomeDir n =
-  match osType with
-    `Win32 ->
-      let dirString =
-        try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
-        with Not_found ->
-        try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
-        with Not_found ->
-        try Unix.getenv "UNISON" (* Use UNISON dir if none of
-                                    the above are set *)
-        with Not_found -> "c:/" (* Default *) in
-      Filename.concat dirString n
-  | `Unix ->
-      Filename.concat (safeGetenv "HOME") n
+  if osType = `Unix || isCygwin then
+    Filename.concat (safeGetenv "HOME") n
+  else if osType = `Win32 then
+    let dirString =
+      try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
+      with Not_found ->
+      try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
+      with Not_found ->
+      try Unix.getenv "UNISON" (* Use UNISON dir if none of
+                                  the above are set *)
+      with Not_found -> "c:/" (* Default *) in
+    Filename.concat dirString n
+  else
+    assert false (* osType can't be anything else *)
 
 (*****************************************************************************)
 (*           "Upcall" for building pathnames in the .unison dir              *)
diff -u -aruN unison.orig/unison-2.10.2/uicommon.ml unison/unison-2.10.2/uicommon.ml
--- unison.orig/unison-2.10.2/uicommon.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uicommon.ml	2005-09-06 09:00:16.000000000 -0700
@@ -268,26 +268,28 @@
     | c ->
         buf.[!pos] <- c; pos := !pos + 1
   done;
-  String.sub buf 0 !pos
+  "{" ^ String.sub buf 0 !pos ^ "}"
 
-let ignorePath path = "Path " ^ (quote (Path.toString path))
+let ignorePath path = "Path " ^ quote (Path.toString path)
 
 let ignoreName path =
   match Path.finalName path with
-    Some name -> "Name " ^ (quote (Name.toString name))
+    Some name -> "Name " ^ quote (Name.toString name)
   | None      -> assert false
 
 let ignoreExt path =
   match Path.finalName path with
     Some name ->
       let str = Name.toString name in
-      (try
-        let pos = String.rindex str '.' + 1 in
+      begin try
+        let pos = String.rindex str '.' in
         let ext = String.sub str pos (String.length str - pos) in
-        "Name *." ^ (quote ext)
+        "Name {,.}*" ^ quote ext
       with Not_found -> (* str does not contain '.' *)
-        "Name "^(quote str))
-  | None      -> assert false
+        "Name " ^ quote str
+      end
+  | None ->
+      assert false
 
 let addIgnorePattern theRegExp =
   if theRegExp = "Path " then
diff -u -aruN unison.orig/unison-2.10.2/uigtk.ml unison/unison-2.10.2/uigtk.ml
--- unison.orig/unison-2.10.2/uigtk.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uigtk.ml	2005-09-06 09:00:16.000000000 -0700
@@ -1606,7 +1606,7 @@
                   catch (fun () ->
                            Transport.transportItem
                              theSI.ri (Uutil.File.ofLine i)
-                             (fun title text -> Trace.status (Printf.sprintf "\n%s\n\n%s\n\n" title text))
+                             (fun title text -> Trace.status (Printf.sprintf "\n%s\n\n%s\n\n" title text); true)
                            >>= (fun () ->
                            return Util.Succeeded))
                         (fun e ->
@@ -1760,6 +1760,7 @@
   actionBar#insert_space ();
   grAdd grDiff (actionBar#insert_button ~text:"Diff" ~callback:diffCmd ());
 
+(*
   let mergeCmd () =
     match !current with
       Some i ->
@@ -1787,7 +1788,7 @@
 
   actionBar#insert_space ();
   grAdd grDiff (actionBar#insert_button ~text:"Merge" ~callback:mergeCmd ());
-
+*)
   (*********************************************************************
     Keyboard commands
    *********************************************************************)
diff -u -aruN unison.orig/unison-2.10.2/uigtk2.ml unison/unison-2.10.2/uigtk2.ml
--- unison.orig/unison-2.10.2/uigtk2.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uigtk2.ml	2005-09-06 09:00:16.000000000 -0700
@@ -745,8 +745,7 @@
     match Uicommon.sshParse s with
       Uicommon.Password account -> getPassword account
     | _ -> "" in
-  if Osx.isMacOSX or Osx.isLinux then Some handleSSH
-  else None
+  None
 
 (* ------ *)
 
diff -u -aruN unison.orig/unison-2.10.2/uitext.ml unison/unison-2.10.2/uitext.ml
--- unison.orig/unison-2.10.2/uitext.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/uitext.ml	2005-09-06 09:00:16.000000000 -0700
@@ -423,6 +423,8 @@
                  (["n";"q";"x"],
                     ("Exit"),
                     fun()->
+                      alwaysDisplay "\n";
+                      restoreTerminal ();
                       Lwt_unix.run (Update.unlockArchives ());
                       exit 1)]
                 (fun()-> display  "Press return to continue.")
diff -u -aruN unison.orig/unison-2.10.2/update.ml unison/unison-2.10.2/update.ml
--- unison.orig/unison-2.10.2/update.ml	2004-09-06 12:15:46.000000000 -0700
+++ unison/unison-2.10.2/update.ml	2005-09-06 09:00:16.000000000 -0700
@@ -347,13 +347,25 @@
      let fto = Fspath.toString (Os.fileInUnisonDir toname) in
      debug (fun() -> Util.msg "Copying archive %s to %s\n" ffrom fto);
      Util.convertUnixErrorsToFatal "copying archive" (fun () ->
-       let outFd = Unix.openfile fto
-         [Unix.O_RDWR;Unix.O_CREAT;Unix.O_TRUNC] 0o600 in
+       let outFd = 
+         open_out_gen [Open_wronly; Open_creat; Open_trunc; Open_binary] 
+              0o600 fto
+       in
        Unix.chmod fto 0o600; (* In case the file already existed *)
-       let inFd = Unix.openfile ffrom [Unix.O_RDONLY] 0o444 in
-       Uutil.readWrite inFd outFd (fun _ -> ());
-       Unix.close inFd;
-       Unix.close outFd;
+       let inFd = open_in_bin ffrom in
+       let bufsize = 10000 in
+       let buf = String.create bufsize in
+
+       let rec read () =
+         let n = input inFd buf 0 bufsize in
+         if n>0 then begin
+           output outFd buf 0 n;
+         read()
+         end
+       in
+       read ();
+       close_in inFd;
+       close_out outFd;
        let arcFspath = Os.fileInUnisonDir toname in
        let info = Fileinfo.get false arcFspath Path.empty in
        Hashtbl.replace archiveInfoCache thisRoot info))
@@ -1308,11 +1320,14 @@
       &&
     Props.length info.Fileinfo.desc = Props.length archDesc
       &&
+    notExcelFile path
+      &&
     match archStamp with
       Fileinfo.InodeStamp inode ->
         info.Fileinfo.inode = inode
     | Fileinfo.CtimeStamp ctime ->
-        info.Fileinfo.ctime = ctime && notExcelFile path in
+        info.Fileinfo.ctime = ctime
+  in
   let ressClearlyUnchanged =
     fastCheck
       &&
@@ -1578,7 +1593,6 @@
 let rec buildUpdate archive fspath fullpath here path =
   match Path.deconstruct path with
     None ->
-      Os.checkThatParentPathIsADir fspath here;
       showStatus path;
       let (arch, ui) =
         buildUpdateRec archive fspath here (useFastChecking()) in
@@ -1588,6 +1602,12 @@
        end,
        ui)
   | Some(name, path') ->
+      if not (isDir fspath here) then
+        (archive,
+         Error (Printf.sprintf
+                  "path %s is not valid because %s is not a directory"
+                  (Path.toString fullpath) (Path.toString here)))
+      else
       let children = getChildren fspath here in
       let (name', status) =
         try
@@ -1625,7 +1645,7 @@
              Note that we may also put NoArchive deep inside an
              archive...
           *)
-          (ArchiveDir (desc, NameMap.add name' child otherChildren),
+          (ArchiveDir (desc, NameMap.add name' arch otherChildren),
            updates)
 
 (* for the given path, find the archive and compute the list of update
diff -u -aruN unison.orig/unison-2.10.2/uutil.ml unison/unison-2.10.2/uutil.ml
--- unison.orig/unison-2.10.2/uutil.ml	2004-09-06 12:15:47.000000000 -0700
+++ unison/unison-2.10.2/uutil.ml	2005-09-06 09:00:16.000000000 -0700
@@ -83,7 +83,7 @@
 (*               Copy bytes from one file_desc to another                    *)
 (*****************************************************************************)
 
-let bufsize = 10000
+let bufsize = 16384
 let bufsizeFS = Filesize.ofInt bufsize
 let buf = String.create bufsize
 
diff -u -aruN unison.orig/unison-2.13.16/Makefile.OCaml unison/unison-2.13.16/Makefile.OCaml
--- unison.orig/unison-2.13.16/Makefile.OCaml	2005-06-27 10:38:25.000000000 -0700
+++ unison/unison-2.13.16/Makefile.OCaml	2005-09-06 09:00:16.000000000 -0700
@@ -143,7 +143,7 @@
 # NOTE: the OCAMLLIBDIR is not getting passed correctly?
 macexecutable: $(NAME)-blob.o
 	(cd uimac; xcodebuild OCAMLLIBDIR="$(OCAMLLIBDIR)")
-	gcc uimac/cltool.c -o uimac/build/Unison.app/Contents/MacOS/cltool -framework Carbon
+	gcc uimac/cltool.c -o uimac/build/Unison.app/Contents/MacOS/cltool -framework Carbon || gcc uimac/cltool.c -o uimac/build/Default/Unison.app/Contents/MacOS/cltool -framework Carbon
 
 # OCaml objects for the bytecode version
 # File extensions will be substituted for the native code version
diff -u -aruN unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib
--- unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib	2005-03-18 15:33:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/classes.nib	2005-09-06 09:01:00.000000000 -0700
@@ -45,7 +45,11 @@
                 preferencesController = PreferencesController; 
                 preferencesView = NSView; 
                 profileController = ProfileController; 
+                restartButton = NSButton; 
+                restartMenuItem = NSMenuItem; 
                 statusText = NSTextField; 
+                synchronizeButton = NSButton; 
+                synchronizeMenuItem = NSMenuItem; 
                 tableView = ReconTableView; 
                 updatesText = NSTextField; 
                 updatesView = NSView; 
diff -u -aruN unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib
--- unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib	2005-03-21 12:22:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/info.nib	2005-09-06 09:01:00.000000000 -0700
@@ -3,34 +3,34 @@
 <plist version="1.0">
 <dict>
 	<key>IBDocumentLocation</key>
-	<string>318 45 509 310 0 0 1280 832 </string>
+	<string>502 19 509 310 0 0 1024 746 </string>
 	<key>IBEditorPositions</key>
 	<dict>
 		<key>197</key>
-		<string>450 391 383 326 0 0 1280 832 </string>
+		<string>320 335 383 326 0 0 1024 746 </string>
 		<key>198</key>
-		<string>307 297 669 515 0 0 1280 832 </string>
+		<string>177 221 669 515 0 0 1024 746 </string>
 		<key>29</key>
-		<string>72 209 280 44 0 0 1280 832 </string>
+		<string>-23 199 294 44 0 0 1024 746 </string>
 		<key>307</key>
-		<string>392 388 499 332 0 0 1280 832 </string>
+		<string>262 332 499 332 0 0 1024 746 </string>
 		<key>423</key>
-		<string>450 391 383 326 0 0 1280 832 </string>
+		<string>320 335 383 326 0 0 1024 746 </string>
 	</dict>
 	<key>IBFramework Version</key>
-	<string>364.0</string>
+	<string>439.0</string>
 	<key>IBOpenObjects</key>
 	<array>
-		<integer>423</integer>
-		<integer>198</integer>
-		<integer>29</integer>
 		<integer>402</integer>
-		<integer>234</integer>
+		<integer>29</integer>
+		<integer>198</integer>
 		<integer>21</integer>
 		<integer>307</integer>
 		<integer>197</integer>
+		<integer>234</integer>
+		<integer>423</integer>
 	</array>
 	<key>IBSystem Version</key>
-	<string>7U16</string>
+	<string>8C46</string>
 </dict>
 </plist>
diff -u -aruN unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib
--- unison.orig/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib	2005-03-21 12:22:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/English.lproj/MainMenu.nib/objects.nib	2005-09-06 09:01:00.000000000 -0700
@@ -1,49 +1,53 @@
-typedstreamè„@„„„NSIBObjectData à„„NSObject …’„„„NSCustomObject)”„@@„„„NSMutableString„„NSString”„+NSApplication†…†„if–„„„NSTableColumn)”„@fff@@cc„™™profiles†ƒC—½ƒB=èsè„„„NSTableHeaderCell„„NSTextFieldCell>„„NSActionCell„„NSCellA”„ii‚ş  „@@@@„™™Profiles†„„„NSFont”š$„[36c]      şÿ L u c i d a G r a n d e  „f„c ¦¦ ¦†……„i: …’…’…„c@@ „„„NSColor ”¦„ffƒ>ªªŸ†„¦¦„@@@„™™System†„™™headerTextColor†„¦¦ª †††„Ÿ¡‚1ş@ ¢…„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦†……§ …’…’„„„NSClassSwapper*”„@#„™™ProfileTableView†„„NSTableView=„„	NSControl)„„NSView)„„NSResponder ”’„„„
-NSClipView:²’„„„NSScrollView â²’„„„NSCustomView)²’…š „@@@@ffffffff„„„NSMutableArray „„NSArray ”š’„„„NSTextField±’¸š‚
-   µ…………# Ü#,  #,’¸’…’…’…„icc@  „Ÿ¡‚ş ‚@  ¢„™™?Welcome to Unison!
-Please choose a profile or create a new one
-†¬……§ …’…’½¨ „¦¦«¨„™™controlColor†„¦¦ªƒ?*ª«††„¦¦«¨„™™controlTextColor†ª††’…„:…†’„„„NSButton ±’¸š‚!   µ…………	T   T ’¸’…’…’…¹  „„„NSButtonCell? ¡‚ş ‚8  ¢„™™Open†¬……§ …’…’Æ„	ssii@@@@@ È‚†‚@ÿ„˜™ †„˜™ †…„¤š„[28c]      şÿ H e l v e t i c a¥¦ ¦¦ ¦ †…††’„Ç’¸š µ…………‹ı÷T   T ’¸’…’…’…¹  „É¡‚ş ‚8  ¢„™™Quit†¬……§ …’…’Î½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’¶’„Ç’¸š‚!   µ………… ÆC   C ’¸’…’…’…¹  „É¡‚ş ‚8  ¢„™™New†¬……§ …’…’Ó½ È‚†‚@ÿ„˜™ †„˜™ †…Í…†††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††š‚€  µ„»š’´’„„„
-NSScroller Ó±’¶š‚ €  µ…………3 †   †’¶’…’…’…¹   …’¶„ff: ƒ?4Œ „_doScroller:¦ ¦ †’„Ü’¶š‚ €  µ…………œœq  q’¶’…’…’…¹   …’¶À ƒ?}ÙÁ¦¦ †’„µ’¶š‚ À  µ„»š’„„„NSTableHeaderView²’Şš‚ €  µ…………  2  2’Ş’…’…’…’­††……… 2  2’¶’…’à’…’à„@@ccc„¦¦«¨„™™controlBackgroundColor†Ã†…  †’„„„_NSCornerView ²’¶š‚ €  µ…………3   ’¶’…’…’…††………<C ˜  C ˜’¸’…’´’…’Û’İ’´’Ş’ä„ffffi
+typedstreamè„@„„„NSIBObjectData à„„NSObject …’„„„NSCustomObject)”„@@„„„NSMutableString„„NSString”„+NSApplication†…†„ie–„„„
+NSMenuItemŸ”’„„„NSMenu Ì”„i@@@‚€   „™™Actions†„„„NSMutableArray „„NSArray ”š
+’š’„›’œ„i@@IIi@@@@:i@ „™™Propagate Right to Left†„™™<†‚   ‚ÿÿÿ …„„„NSCustomResource)”–„™™NSImage†„™™NSMenuCheckmark††…„¦–§„™™NSMenuMixedState††… …’…’…†’„›’œ  „™™Propagate Newer to Older†„™™ †‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ  „™™Propagate Older to Newer†­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ  „™™Leave Alone†„™™/†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ  „™™!Revert to Unison's Recommendation†­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ  „™™Merge†­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ ‚À   ­­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ  „™™Restart†„™™r†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’œ  „™™Synchronize all†„™™g†‚   ‚ÿÿÿ …¥…©… …’…’…††…†  „™™Propagate Left to Right†„™™>†‚   ‚ÿÿÿ …¥…©… …’…’…†œ–„„„NSTextField„„	NSControl)„„NSView)„„NSResponder ”’„„„NSCustomView)Ã’…š „@@@@ffffffff„ š’À†………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††š‚ €  §………… ‹C  C’Å’…’…’…„icc@  „„„NSTextFieldCell>„„NSActionCell„„NSCellA”„ii‚„ş@‚@ „@@@@„™™Connecting...†„„„NSFont”š$„[36c]      şÿ L u c i d a G r a n d e  „f„c ±± ± †……„i: …’…’À„c@@ „„„NSColor ”±„@@@„™™System†„™™textBackgroundColor†„Ò±„ff††„Ò±µÓ„™™	textColor†„Ò±¶ †††’…„:…†Å–„„„NSWindowTemplateø”„iiffffi@@@@@cpÊ
+‚px  ­„™™NSWindow†„˜™View†„Ã’…š §„ š’„Á’İš‚ €  §………… ˜ Ü   Ü’İ’…’…’…¨  „Ë¬‚„ş@‚@ ­„™™Unison†„Ğš,„[44c]   $   şÿ L u c i d a G r a n d e - B o l d°± ±± ± †……² …’…’ß³ ÑÖ†’…·…†’„Á’İš‚ €  §………… à4   à4’İ’…’…’…¨  „Ë¬‚„ş ‚@  ­„™™XÂ© Copyright 1999-2005.
 
-‚„   †š‚ À  µ„»š’­†………2 †  2 †’¶’…’­’…’­Ãâ…  †š‚   µ…………  2 †  2 †’´’…’…’…¹  …„@@@ff@@f::iàä„»š’š†„¦¦ª†„¦¦«¨„™™	gridColor†„¦¦ªƒ?   ††……‚Â@  ’…’…’…†¨ èÄ† ’­†­–„Ç’„¹’…š µ„»š’„¾’íš‚
-   µ…………¯g  g’í’…’…’…¹  „Ÿ¡‚ş ‚@  ¢„™™Let's update some stuff!
-†¬……§ …’…’ï¨ ÁÄ†’…º…†’„·’íš‚€  µ„»š’„µ’òš‚ À  µ„»š’„®­„™™ReconTableView†°’ôš µ…………  P ı  P ı’ô’…’…’…¹  …Æ„á’„µ’òš‚ À  µ„»š’ø†……… P  P’ò’…’ø’…’øÃâ…  †š‚ €  µ…………  P  P’ù’…’…’…’ö†„å’òš‚ €  µ…………Q   ’ò’…’…’…†„»š’„›œ„™™left†___„¡‚ş  ¢„™™Left†£……§ …’…’…¨ „¦¦ªƒ>ªªŸ†§†„Ÿ¡‚1ş@ ¢…¬……§ …’…’ö¨ èÄ† ’ö†’„›œ„™™	direction†222„¡‚ş ‚   ¢„™™Action†£……§ …’…’…¨ §†„Ÿ¡‚1ş@‚   ¢…¬……§ …’…’ö¨ èÄ† ’ö†’„›œ„™™right†___„¡‚ş  ¢„™™Right†£……§ …’…’…¨ „¦¦«¨„™™headerColor†è†§†„Ÿ¡‚1ş@ ¢…„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦†……§ …’…’ö¨âÄ† ’ö†’„›œ„™™progress†<<<„¡‚ş ‚   ¢„™™Progress†£……§ …’…’…¨ §†„Ÿ¡‚1ş@‚   ¢………§ …’…’ö¨âÄ† ’ö†’„›œ„™™path†ƒCŠŒ) Èè„¡‚ş  ¢„™™Path†£……§ …’…’…¨ §†„Ÿ¡‚1ş@ ¢………§ …’…’ö¨âÄ† ’ö††èé……‚Z@  ’…’…’…††………P ı  P ı’ò’…’ö’…’öÃâ…  †’„Ü’òš‚ €  µ…………Q ı   ı’ò’…’…’…¹   …’òÀ ƒ?wêqÁ¦ ¦ †’„Ü’òš‚ €  µ…………P  P’ò’…’…’…¹   …’òÀ ƒ?{¿]Á¦¦ †’ù’û†………sa  a’í’…’ô’…’’’ô’ù’ûÅ
-
-‚Ä   †’ì’„·’íš‚€  µ„»š’„µ’š‚ À  µ„»š’„„„NSTextTemplateÆ„„NSViewTemplate.²’š‚   µ………„„„NSMutableSet „„NSSet ”„I’„™™Apple PDF pasteboard type†’„™™Apple PICT pasteboard type†’„™™NSStringPboardType†’„™™*NeXT Rich Text Format v1.0 pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™Apple HTML pasteboard type†’„™™NSFilenamesPboardType†’„™™NeXT TIFF v4.0 pasteboard type†’„™™NSColor pasteboard type†’„™™NeXT RTFD pasteboard type†’„™™#CorePasteboardFlavorType 0x6D6F6F76†† _-  _-’’…’…’…’„™™NSText†’…’„¦¦«¨„™™	textColor†ª†’„¤š¾      şÿ H e l v e t i c a¥¦ ¦¦ ¦ †š ’èª-ª_‚ ˜–€’…¦¦ ¦ ¦¦ ¦ ¦¦ ¦¦ ¦ ††………_- _-’’…’ ’…’ Ãè„„„NSCursor”ª’„„„NSImage.”’…¦ ¦ ¦¦ ¦ ¦ ¦ ¦ ¦¦¦ ¦ ¦ ¦ ª„s¦ ’„„„NSBitmapImageRep„„
-NSImageRep”šÂ„[1218c]MM *  ÿÿÿÿÿÿÿÿ                                                        ÿÿÿÿ   ÿÿÿÿÿ                                                    ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                                ÿÿÿÿ   ÿ   ÿ   ÿÿÿÿÿ                                            ÿÿÿÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                                        ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                                    ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                                ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                            ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿ                        ÿÿÿÿ   ÿ   ÿ   ÿ   ÿ   ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ                    ÿÿÿÿ   ÿ   ÿÿÿÿÿ   ÿ   ÿÿÿÿÿ                                    ÿÿÿÿ   ÿÿÿÿÿ    ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                ÿÿÿÿÿÿÿÿ        ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                ÿÿÿÿ                ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                                ÿÿÿÿ   ÿ   ÿÿÿÿÿ                                                    ÿÿÿÿÿÿÿÿÿÿÿÿ                                                  ª                                         ²      º       (       R                
-ü€  ' 
-ü€  '†’„¦¦ª  †’…†¦ ¦ †  †’„Ü’š‚ €  µ…………œœD  D’’…’…’…¹   …’À Á¦ ¦ †’„Ü’š‚ €  µ…………œœW  W’’…’…’…¹   …’Àƒ?rCÁ¦¦ ††………<a/  a/’í’…’’…’=’>’’…’…Å
+This software is licensed under the GNU General Public License.†„Ğš$¯      şÿ L u c i d a G r a n d e  °
+± ±± ±†……² …’…’ã³ ÑÖ†’…·…†’„„„NSImageViewÂ’İš‚ €  §………„„„NSMutableSet „„NSSet ”„I’„™™Apple PDF pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™NeXT TIFF v4.0 pasteboard type†’„™™NSFilenamesPboardType†’„™™Apple PICT pasteboard type†’„™™Apple PNG pasteboard type†† ¶ à@   à@’İ’…’…’…¨  „„„NSImageCell)Í¬‚ ş ‚   ­„¦–§„™™Unison††………„iii   †±†’„Á’İš‚ €  §…………e à   à’İ’…’…’…¨  „Ë¬‚„ş@‚@ ­„™™Sync you very much!†„Ğš$¯      şÿ O p t i m a - I t a l i c°± ±± ± †……² …’…’ö³ ÑÖ†’…·…†’„Á’İš‚ €  §………… Ü   Ü’İ’…’…’…¨  „Ë¬‚„ş@‚@ ­„™™?.?.?†„Ğš$¯      şÿ L u c i d a G r a n d e  °± ±± ± †……² …’…’ú³ ÑÖ†’…·…††………	
+  
+’…’…’…’…†…„ffff   ê±¶ Õ ’…±¶ƒÿîƒÿî†•–„„„NSBox*Ã’„Æ’…š §„ š’„ÿ’ š‚
+   §„ š’„Ã’š §„ š’„Á’š‚ €  §…………  ’’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™File:
+†„Ğš$¯      şÿ L u c i d a G r a n d e  °± ±± ±†……² …’…’³ „Ò±µÓ„™™controlColor†„Ò±¶ƒ?*ª«††„Ò±µÓ„™™controlTextColor†Ø††’…·…†’„Á’š‚€  §………….w  w’’…’…’…¨  „Ë¬‚”qşA‚ @ ­­	……² …’…’³ÑÖ†’…·…††………³3  ³3’’…’…’…††……… ­·G  ·G’ ’…’…’…„ff@@ccc  „Ë¬‚ş  ­„™™
+First root†	……² …’…’…³ Ñ„Ò±¶ ƒ?LÌÍ†† ’…†’ş’„„„NSButton Â’ š‚!€  §…………}T   T ’ ’…’…’…¨  „„„NSButtonCell?Ì¬‚ş ‚8  ­„™™Save†	……² …’…’„	ssii@@@@@ È‚†‚@ÿ„˜™ †„˜™ †…„Ğš„[28c]      şÿ H e l v e t i c a°± ±± ± †…††’„’ š‚!€  §…………)T   T ’ ’…’…’…¨  „¬‚ş ‚8  ­„™™Cancel†	……² …’…’Æ È‚†‚@ÿ„˜™ †„˜™ †……††’„Á’ š‚€  §………… ıW  W’ ’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™Profile name:†	……² …’…’!³ 
+†’…·…†’„Á’ š‚
+€  §…………m û^  ^’ ’…’…’…¨  „Ë¬‚”qşA‚ @ ­­	……² …’…’$³ÑÖ†’…·…††………  ß"  ß"’…’…’…’…–„˜™NSView†„™™NSResponder††š‚   §„ š’„Ã’şš §„ š’„„„NSMatrix>Â’)š‚€  §…………'F&  F&’)’…’…’…¨  …„#iiii:::ffffi@@@@@Ì  ………F‚D(  „ š’„¬‚„ş  ­„™™Remote†	……² …’…’+Æ È ‚H<Qÿ„˜™ †0…„„„NSButtonImageSource”’„™™NSRadioButton††…†’„¬‚ş  ­„™™Local†	……²…’…’+Æ È ‚H<Qÿ00…1…††
+Õ	„¬‚ş  ­„™™Radio†	……² …’…’…ÆK ‚H8Qÿ…­…1…†’…’…’.†’„Á’)š‚ €  §…………j:%  %’)’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™User:†	……² …’…’8³ 
+†’…·…†’„Á’)š‚ €  §………… ”8N  N’)’…’…’…¨  „Ë¬‚”qşA‚ @ ­­	……² …’…’;³ÑÖ†’…·…†’„Á’)š‚ €  §………… ö:&  &’)’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™Host:†	……² …’…’=³ 
+†’…·…†’„Á’)š‚€  §…………!8 „   „’)’…’…’…¨  „Ë¬‚”qşA‚ @ ­­	……² …’…’@³ÑÖ†’…·…†’„Á’)š‚€  §…………  ’)’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™File:†	……² …’…’B³ 
+†’…·…†’„Á’)š‚€  §………….w  w’)’…’…’…¨  „Ë¬‚”qşA‚ @ ­­	……² …’…’E³ÑÖ†’…·…††………³V  ³V’ş’…’…’…††………<·j  ·j’ ’…’…’…Ã  „Ë¬‚ş  ­„™™Second root†	……² …’…’…³ Ñ„Ò±¶ ƒ?LÌÍ††) ’…† –„’„Æ’…š §„ š’„Á’Kš‚
+€  §…………¯g  g’K’…’…’…¨  „Ë¬‚ş ‚@  ­„™™Let's update some stuff!
+†	……² …’…’M³ 
+†’…·…†’„„„NSScrollView âÃ’Kš‚€  §„ š’„„„
+NSClipView:Ã’Pš‚ À  §„ š’„„„NSClassSwapper*”„@#„™™ReconTableView†„„NSTableView=Â’Sš‚ €  §…………  P ı  P ı’S’…’…’…¨  …„@@@ff@@f::i„„„NSTableHeaderViewÃ’„T’Pš‚ À  §„ š’Z†……… P  P’P’…’Z’…’Z„@@ccc„Ò±µÓ„™™controlBackgroundColor††…  †š‚ €  §…………  P  P’\’…’…’…’V†„„„_NSCornerView Ã’Pš‚ €  §…………Q   ’P’…’…’…†„ š’„„„NSTableColumn)”„@fff@@cc„™™left†___„„„NSTableHeaderCellË¬‚ş  ­„™™Left†„Ğš$¯      şÿ L u c i d a G r a n d e  °± ±± ±†……² …’…’…³ „Ò±¶ƒ>ªªŸ†„Ò±µÓ„™™headerTextColor†Ø††„Ë¬‚1ş@ ­…	……² …’…’V³ Õ† ’V†’„dÕ„™™	direction†222„g¬‚ş ‚   ­„™™Action†i……² …’…’…³ jk†„Ë¬‚1ş@‚  ­…	……² …’…’V³ Õ† ’V†’„dÕ„™™right†___„g¬‚ş  ­„™™Right†i……² …’…’…³ „Ò±µÓ„™™headerColor†Õ†k†„Ë¬‚1ş@ ­…ı……² …’…’V³^† ’V†’„dÕ„™™progress†<<<„g¬‚ş ‚   ­„™™Progress†i……² …’…’…³ wk†„Ë¬‚1ş@‚  ­…ı……² …’…’V³^† ’V†’„dÕ„™™path†ƒCŠŒ) Èè„g¬‚ş  ­„™™Path†i……² …’…’…³ wk†„Ë¬‚1ş@ ­…ı……² …’…’V³^† ’V††Õ„Ò±µÓ„™™	gridColor†„Ò±¶ƒ?   ††……‚Z@  ’…’…’…††………P ı  P ı’P’…’V’…’VÒ^…  †’„„„
+NSScroller ÓÂ’Pš‚ €  §…………Q ı   ı’P’…’…’…¨   …’P„ff: ƒ?wêq„_doScroller:± ± †’„ ˆ’Pš‚ €  §…………P  P’P’…’…’…¨   …’PØ ƒ?{¿]Ù±± †’\’`†………sa  a’K’…’S’…’ ‡’ ‰’S’\’`„ffffi
+
+‚Ä   †’J’„Q’Kš‚€  §„ š’„T’ Šš‚ À  §„ š’„„„NSTextTemplateÆ„„NSViewTemplate.Ã’ Œš‚€  §………„ê¾’„™™Apple HTML pasteboard type†’„™™Apple PICT pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™*NeXT Rich Text Format v1.0 pasteboard type†’„™™Apple PDF pasteboard type†’„™™NSFilenamesPboardType†’„™™NSStringPboardType†’„™™NeXT TIFF v4.0 pasteboard type†’„™™NSColor pasteboard type†’„™™#CorePasteboardFlavorType 0x6D6F6F76†’„™™NeXT RTFD pasteboard type†† _-  _-’ Œ’…’…’…’„™™NSText†’…’Ö’„ĞšÇ      şÿ H e l v e t i c a°± ±± ± †š ’Õ¶-¶_‚ ˜–€’…±± ± ±± ± ±± ±± ± ††………_- _-’ Š’…’ ’…’ ÒÕ„„„NSCursor”¶ÿ’…± ± †  †’„ ˆ’ Šš‚ €  §…………œœD  D’ Š’…’…’…¨   …’ ŠØ Ù± ± †’„ ˆ’ Šš‚ €  §…………œœW  W’ Š’…’…’…¨   …’ ŠØƒ?rCÙ±± ††………<a/  a/’K’…’ Œ’…’ ¡’ ¢’ Œ’…’…Ú
 
 
 
-‚   †’„Ç’íš‚   µ…………U   U ’í’…’…’…¹  „É¡‚ş ‚8  ¢„™™Restart†¬……§ …’…’?½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’„¾’íš‚
-   µ…………™  ’í’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Status
-†£……§ …’…’D¨ ÁÄ†’…º…††………  ‰Ù  ‰Ù’…’…’…’…–„˜™NSView†„™™NSResponder††š‚   µ…………u   u ’í’…’…’…¹  „É¡‚ş ‚8  ¢„™™Synchronize†¬……§ …’…’ì½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††í–„„„
-NSMenuItemŸ”’„„„NSMenu Ì”„i@@@ „™™Unison†„»š
-’„N’O„i@@IIi@@@@:i@ „™™About Unison†„™™ †‚   ‚ÿÿÿ …„„„NSCustomResource)”–„™™NSImage†„™™NSMenuCheckmark††…„W–X„™™NSMenuMixedState††… …’…’…†’„N’OÕ‚À   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Preferences...†„™™,†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Install command-line tool†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ‚À   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Hide Unison†„™™h†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Hide Others†„™™h†‚   ‚ÿÿÿ …V…Z… …’…’…†’M’„N’OÕ‚À   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’OÕ „™™Quit Unison†„™™q†‚   ‚ÿÿÿ …V…Z… …’…’…††„™™_NSAppleMenu††Õ „™™Show All†U‚   ‚ÿÿÿ …V…Z… …’…’…†O–„––„™™MyController†…†•–„Ç’„¹’…š µ„»š’„„„NSBox*²’rš‚
-   µ„»š’„²’tš µ„»š’„¾’wš µ…………  ’w’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™File:
-†¬……§ …’…’y¨ ÁÄ†’…º…†’„¾’wš‚   µ………….w  w’w’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’|¨„¦¦«¨„™™textBackgroundColor†è†2†’…º…††………³3  ³3’t’…’…’…††……… ­·G  ·G’r’…’…’…„ff@@ccc  „Ÿ¡‚ş  ¢„™™
-First root†¬……§ …’…’…¨ ~Ä†w ’…†’„u’rš‚   µ„»š’„²’ ‚š µ„»š’„„„NSMatrix>±’ „š‚   µ…………'F&  F&’ „’…’…’…¹  …„#iiii:::ffffi@@@@@   ………F‚D(  „»š’„É¡‚„ş  ¢„™™Remote†¬……§ …’…’ †½ È ‚H<Qÿ„˜™ † ‹…„„„NSButtonImageSource”’„™™NSRadioButton††…†’„É¡‚ş  ¢„™™Local†¬……§…’…’ †½ È ‚H<Qÿ ‹ ‹… Œ…††Áè¬„É¡‚ş  ¢„™™Radio†¬……§ …’…’…½K ‚H8Qÿ…U… Œ…†’…’…’ ‰†’„¾’ „š µ…………j:%  %’ „’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™User:†¬……§ …’…’ “¨ ÁÄ†’…º…†’„¾’ „š µ………… ”8N  N’ „’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ –¨~2†’…º…†’„¾’ „š µ………… ö:&  &’ „’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Host:†¬……§ …’…’ ˜¨ ÁÄ†’…º…†’„¾’ „š‚   µ…………!8 „   „’ „’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ ›¨~2†’…º…†’„¾’ „š‚   µ…………  ’ „’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™File:†¬……§ …’…’ ¨ ÁÄ†’…º…†’„¾’ „š‚   µ………….w  w’ „’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’  ¨~2†’…º…††………³V  ³V’ ‚’…’…’…††………<·j  ·j’r’…’…’…Ø  „Ÿ¡‚ş  ¢„™™Second root†¬……§ …’…’…¨ ~Ä† „ ’…†’„Ç’rš‚!   µ…………}T   T ’r’…’…’…¹  „É¡‚ş ‚8  ¢„™™Save†¬……§ …’…’ ¤½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’q’„¾’rš‚   µ………… ıW  W’r’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Profile name:†¬……§ …’…’ ©¨ ÁÄ†’…º…†’„¾’rš‚
-   µ…………m û^  ^’r’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ ¬¨~2†’…º…††………  ß"  ß"’…’…’…’…–„˜™NSView†„™™NSResponder††š‚!   µ…………)T   T ’r’…’…’…¹  „É¡‚ş ‚8  ¢„™™Cancel†¬……§ …’…’q½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††r–ö–\O–tr–Ó¸– ¤r–„Ç’„²’…š µ„»š’„®­„™™NSSecureTextField†¾’ µš µ…………< »   »’ µ’…’…’…¹  „Ÿ¡‚”qşA‚ @  ¢U¬……§ …’…’ ·¨~2†’…º…†’„Ç’ µš µ…………sb   b ’ µ’…’…’…¹  „É¡‚ş ‚8  ¢„™™Continue†¬……§ …’…’ º½ È‚†‚@ÿ„˜™ †„˜™ †…Í…††’ ´’„¾’ µš µ…………Z ·   ·’ µ’…’…’…¹  „Ÿ¡‚ş ‚ @  ¢„™™Please enter your password
-†¬……§ …’…’ ¿¨ ÁÄ†’…º…††………	 ã €   ã €’…’…’…’…†š µ…………T   T ’ µ’…’…’…¹  „É¡‚ş ‚8  ¢„™™Cancel†¬……§ …’…’ ´½ È‚†‚@ÿ„˜™ †„˜™ †…Í…†† µ–„¹’…š µ„»š’„¾’ Æš µ………… ‹C  C’ Æ’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™Connecting...†„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦ †……§ …’…’ È¨ ~2†’…º…††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††•– ¬r–|w–  †–ö–öò–í•–„N’„PÔ „™™Actions†„»š
-’„N’ ÏÕ „™™Propagate Left to Right†„™™>†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Propagate Right to Left†„™™<†‚   ‚ÿÿÿ …V…Z… …’…’…†’ Î’„N’ ÏÕ „™™Propagate Older to Newer†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Leave Alone†„™™/†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™!Revert to Unison's Recommendation†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Merge†U‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ‚@   UU‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Restart†„™™r†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ÏÕ „™™Synchronize all†„™™g†‚   ‚ÿÿÿ …V…Z… …’…’…††…†Õ „™™Propagate Newer to Older†U‚   ‚ÿÿÿ …V…Z… …’…’…† Ï–]O–jO– † „–?í–„PÔ „™™MainMenu†„»š’„N’ éÕ QU‚   ‚ÿÿÿ …V…Z„submenuAction: …’…’O†’„N’ éÕ „™™Edit†U‚   ‚ÿÿÿ …V…ZÜ …’…’„PÔ „˜™Edit†„»š’„N’ ïÕ „™™Cut†„™™x†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™Copy†„™™c†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™Paste†„™™v†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™
-Select All†„™™a†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’ ïÕ „™™Select Conflicts†U‚   ‚ÿÿÿ …V…Z… …’…’…††…††’„N’ éÕ  ĞU‚   ‚ÿÿÿ …V…ZÜ …’…’ Ï†’„N’ éÕ „™™Ignore†U‚   ‚ÿÿÿ …V…ZÜ …’…’„PÔ „»š’„N’Õ „™™Ignore Path†„™™i†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’Õ „™™Ignore Extension†„™™e†‚   ‚ÿÿÿ …V…Z… …’…’…†’„N’Õ „™™Ignore Name†„™™n†‚   ‚ÿÿÿ …V…Z… …’…’…††…††’„N’ éÕ „™™Help†U‚   ‚ÿÿÿ …V…ZÜ …’…’„PÔ „»š’„N’Õ „™™Unison Online Help†„™™?†‚   ‚ÿÿÿ …V…Z… …’…’…††…†††„™™_NSMainMenu††•–„„„NSWindowTemplateø”„iiffffi@@@@@cp 
-‚px  U„™™NSWindow†„˜™View†„²’…š µ„»š’„¾’š µ………… ˜ Ü   Ü’’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™Unison†„¤š,„[44c]   $   şÿ L u c i d a G r a n d e - B o l d¥¦ ¦¦ ¦ †……§ …’…’¨ ~2†’…º…†’„¾’š µ………… à4   à4’’…’…’…¹  „Ÿ¡‚„ş ‚@  ¢„™™XÂ© Copyright 1999-2005.
+‚   †’„’Kš‚€  §…………U   U ’K’…’…’…¨  „¬‚ş ‚8  ­„™™Restart†	……² …’…’ £Æ È‚†‚@ÿ„˜™ †„˜™ †……††’„Á’Kš‚
+€  §…………™  ’K’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™Status
+†i……² …’…’ ¨³ 
+†’…·…††………  ‰Ù  ‰Ù’…’…’…’…–„˜™NSView†„™™NSResponder††š‚€  §…………u   u ’K’…’…’…¨  „¬‚$ş ‚   ­„™™Synchronize†	……² …’…’JÆ È‚†‚@ÿ­„˜™ †…	…††K–„›’„ „˜™Edit†„ š’„›’ ±  „™™Cut†„™™x†‚   ‚ÿÿÿ …¥…©… …’…’…†’ °’„›’ ±  „™™Paste†„™™v†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ ±  „™™
+Select All†„™™a†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ ±  „™™Select Conflicts†­‚   ‚ÿÿÿ …¥…©… …’…’…††…†  „™™Copy†„™™c†‚   ‚ÿÿÿ …¥…©… …’…’…† ±–„›’„ „™™Ignore†„ š’„›’ Â  „™™Ignore Path†„™™i†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Â  „™™Ignore Extension†„™™e†‚   ‚ÿÿÿ …¥…©… …’…’…†’ Á†…†  „™™Ignore Name†„™™n†‚   ‚ÿÿÿ …¥…©… …’…’…† Â–„›’„ „™™Unison†„ š	’„›’ Î  „™™About Unison†­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Î ‚@   ­­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Î  „™™Preferences...†„™™,†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Î ‚@   ­­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Î  „™™Hide Unison†„™™h†‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Î  „™™Hide Others†„™™h†‚   ‚ÿÿÿ …¥…©… …’…’…†’ Í’„›’ Î ‚@   ­­‚   ‚ÿÿÿ …¥…©… …’…’…†’„›’ Î  „™™Quit Unison†„™™q†‚   ‚ÿÿÿ …¥…©… …’…’…††„™™_NSAppleMenu††  „™™Show All†­‚   ‚ÿÿÿ …¥…©… …’…’…† Î–¸œ–– –B)– Î„›’„ „™™MainMenu†„ š’ ä’„›’ å  „™™Edit†­‚   ‚ÿÿÿ …¥…©„submenuAction: …’…’ ±†’„›’ å  ­‚   ‚ÿÿÿ …¥…©Ş …’…’œ†’„›’ å   Ã­‚   ‚ÿÿÿ …¥…©Ş …’…’ Â†’„›’ å  „™™Help†­‚   ‚ÿÿÿ …¥…©Ş …’…’„  í„ š’„›’ î  „™™Unison Online Help†„™™?†‚   ‚ÿÿÿ …¥…©… …’…’…††…†††„™™_NSMainMenu††   Ï­‚   ‚ÿÿÿ …¥…©Ş …’…’ Î†– · ±–„––„™™ProfileController†…†•––nV– ë å– ê å– Ñ Î–PK–úİ–;)–„Á’„Ã’…š §„ š’„WÎ„™™NSSecureTextField†Á’ ÷š‚ €  §…………< »   »’ ÷’…’…’…¨  „Ë¬‚”qşA‚ @ ­­	……² …’…’ ù³ÑÖ†’…·…†’„’ ÷š‚ €  §…………sb   b ’ ÷’…’…’…¨  „¬‚ş ‚8  ­„™™Continue†	……² …’…’ üÆ È‚†‚@ÿ„˜™ †„˜™ †……††’„’ ÷š‚ €  §…………T   T ’ ÷’…’…’…¨  „¬‚ş ‚8  ­„™™Cancel†	……² …’…’Æ È‚†‚@ÿ„˜™ †„˜™ †……††’ ö†………	 ã €   ã €’…’…’…’…†š‚ €  §…………Z ·   ·’ ÷’…’…’…¨  „Ë¬‚ş ‚ @  ­„™™Please enter your password
+†	……² …’…’ ö³ 
+†’…·…† ÷– ÷„Ú¹¨R ã €‚px  „™™PasswordWindow†„™™NSWindow†„˜™View† ÷…Á   ê±¶ Õ ’…±¶ƒÿîƒÿî†–VP–„’„Æ’…š §„ š’„Á’š‚
+€  §…………# Ü#,  #,’’…’…’…¨  „Ë¬‚ş ‚@  ­„™™?Welcome to Unison!
+Please choose a profile or create a new one
+†	……² …’…’³ 
+†’…·…†’’„’š‚ €  §…………‹ı÷T   T ’’…’…’…¨  „¬‚ş ‚8  ­„™™Quit†	……² …’…’Æ È‚†‚@ÿ„˜™ †„˜™ †……††’„Q’š‚€  §„ š’„T’š‚ À  §„ š’„WÎ„™™ProfileTableView†Y’š‚€  §…………  2 †  2 †’’…’…’…¨  …Ğ„[’„T’š‚ À  §„ š’†……… 2  2’’…’’…’Ò^…  †š‚ €  §…………  2  2’’…’…’…’†„a’š‚ €  §…………3   ’’…’…’…†„ š’„dÕ„™™profiles†ƒC—½ƒB=èsè„g¬‚ş  ­„™™Profiles†i……² …’…’…³ „Ò±¶ƒ>ªªŸ†k†„Ë¬‚1ş@ ­…	……² …’…’³ Õ† ’††Õ „……‚Â@  ’…’…’…††………2 †  2 †’’…’’…’Ò^…  †’„ ˆ’š‚ €  §…………3 †   †’’…’…’…¨   …’Ø ƒ?4Œ Ù± ± †’„ ˆ’š‚ €  §…………œœq  q’’…’…’…¨   …’Ø ƒ?}ÙÙ±± †’’ †………<C ˜  C ˜’’…’’…’(’)’’’ Ú
 
-This software is licensed under the GNU General Public License.†„¤š$¤      şÿ L u c i d a G r a n d e  ¥
-¦ ¦¦ ¦†……§ …’…’ ¨ ~2†’…º…†’„„„NSImageView±’š µ………„$Ë’„™™Apple PDF pasteboard type†’„™™NeXT TIFF v4.0 pasteboard type†’„™™1NeXT Encapsulated PostScript v1.2 pasteboard type†’„™™NSFilenamesPboardType†’„™™Apple PICT pasteboard type†† ¶ à@   à@’’…’…’…¹  „„„NSImageCell)¡¡‚ ş  ¢„W–X„™™Unison††………„iii   †¦†’„¾’š µ…………e à   à’’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™Sync you very much!†„¤š$¤      şÿ O p t i m a - I t a l i c¥¦ ¦¦ ¦ †……§ …’…’0¨ ~2†’…º…†’„¾’š µ………… Ü   Ü’’…’…’…¹  „Ÿ¡‚„ş@‚@  ¢„™™?.?.?†„¤š$¤      şÿ L u c i d a G r a n d e  ¥¦ ¦¦ ¦ †……§ …’…’4¨ ~2†’…º…††………	
-  
-’…’…’…’…†…„ffff   @¦ª Õ ’…¦ªƒÿîƒÿî†•–„²’…š µ„»š †………	àh  àh’…’…’…’…†„ŞÂàh‚px  „™™Unison†„™™NSWindow†„˜™View†8…ã   @¦ª Õ ’…¦ †–­¶–½¸–„Ş¨R ã €‚px  „™™PasswordWindow†„™™NSWindow†„˜™View† µ…ã   @¦ª Õ ’…¦ªƒÿîƒÿî†•– › „–  „– – „– Ø Ï–`O–wt–Î¸–„––„™™PreferencesController†…†•–0– º µ–ïí––– È Æ–$– ø ï–ö– ò ï– İ Ï–bO–– Ú Ï–„––„™™ProfileController†…†•– â Ï–¶¸–  é– – ©r– í é– – Ï – „ ‚–í–ıö–cO– û ï–:•–– ş ï– ¿ µ– ‰ †–yw–iO–r•–– ß Ï– ì é– Ò Ï– õ ï–òí–– µ>––   „–Dí– ˜ „–O ì– “ „–fO– á Ï–4–Æ¸– é–SO– ï í– é––¸•– Õ Ï– ‚r–ö– · µ– å ÏšD– ¤„™™NSButton†–„˜™ †–­„™™NSTableView†– ›„™™NSTextField1†–j„™™1111†–í„™™updatesView†–>„™™PasswordWindow†–š„™™NSTableColumn†–r„™™PreferencesView†– ˜„™™NSTextField21†–4„™™NSTextField3†– õ„™™NSMenuItem1†– „™™NSButtonCell1†–¸„™™chooseProfileView†– „„™™NSView†– ø„™™NSMenuItem9†–DE–„˜™1†–„™™NSTableColumn1†–„™™AboutWindow†–„™™NSTextField†– Æ„™™ConnectingView†– È„™™NSTextField†–]„™™121†– –„™™NSTextField†–w„™™NSView†– ‰„™™NSButtonCell†–|„™™NSTextField†–ò„™™NSScrollView1†– “„™™NSTextField2†– ò„™™NSMenuItem3†– ï„™™NSMenu†– û„™™NSMenuItem10†– †„™™	NSMatrix1†–¶„™™NSScrollView1†–ì„™™	NSButton1†–ö„™™NSTableView†– ¬„™™NSTextField4†–ï„™™NSTextField2†– „™™NSTextField1†– „™™NSTextField22†–:„™™Window†–„™™NSScrollView2†–t„™™NSBox†–„˜™2†–?„™™
-NSButton21†–q„™™	NSButton1†– ©„™™NSTextField23†–½„™™NSTextField2†– º„™™NSButton†– é„˜™MainMenu†–Æ„™™NSButton†– í„™™
-NSMenuItem†– ‚„™™NSBox1†–Î„™™	NSButton1†–D„™™NSTextField1†–•„˜™File's Owner†–y„™™NSTextField2†– ´„™™	NSButton1†–Ó„™™	NSButton2†– „™™
-NSTextView†–  „™™NSTextField3†–BC– ·„™™NSTextField†– ¿„™™NSTextField2†–ı„™™NSTableColumn†–0„™™NSTextField2†–op’„$Ë’:†’„»šJ’„„„NSNibControlConnector Ï„„NSNibConnector”«j•„˜™
-terminate:††’„Š«f•„™™hideOtherApplications:††’„Š«c•„™™hide:††’„Š«M•„™™unhideAllApplications:††’„Š« ò…„˜™cut:††’„Š« ø…„˜™paste:††’„Š« û…„˜™
-selectAll:††’„Š« õ…„˜™copy:††’„„„NSNibOutletConnector Ï‹«oí„™™updatesView††’„œ«o¸„™™chooseProfileView††’„Š«Óo„™™createButton:††’„Š«Æo„™™openButton:††’„Š«?o„™™restartButton:††’„œ«o:„™™
-mainWindow††’„œ«D­„™™	tableView††’„œ«­D„™™
-dataSource††’„œ«oï„™™updatesText††’„œ«oD„™™profileController††’„œ«oö„™™	tableView††’„œ«öo„™™
-dataSource††’„Š«ìo„™™syncButton:††’„Š« ºo„™™endPasswordWindow:††’„œ«o>„™™passwordWindow††’„œ«o ·„™™passwordText††’„Š« ´o„™™endPasswordWindow:††’„œ«o „™™detailsTextView††’„œ«öo„™™delegate††’„Š«…„™™ignorePath:††’„Š«…„™™
-ignoreExt:††’„Š«…„™™ignoreName:††’„Š« Ò…„™™copyLR:††’„Š« Õ…„™™copyRL:††’„Š« ş…„™™selectConflicts:††’„Š« İ…„™™revert:††’„Š« Î…„™™forceNewer:††’„Š« Ø…„™™forceOlder:††’„Š« Ú…„™™leaveAlone:††’„œ«oD„™™
-statusText††’„œ«B ¬„™™profileNameText††’„œ«Bq„™™cancelButton††’„œ«B ¤„™™
-saveButton††’„œ«oB„™™preferencesController††’„œ«or„™™preferencesView††’„œ«B|„™™firstRootText††’„œ«B –„™™secondRootUser††’„œ«B ›„™™secondRootHost††’„œ«B  „™™secondRootText††’„œ«B ‰„™™remoteButtonCell††’„œ«B „™™localButtonCell††’„œ« ¬|„™™nextKeyView††’„œ«| †ï†’„œ« † –ï†’„œ« – ›ï†’„œ« ›  ï†’„œ«   ¤ï†’„œ« ¤ ¬ï†’„Š« ‰B„™™remoteClick:††’„Š« B„™™localClick:††’„œ«¶Æï†’„œ«Æ­ï†’„Š« ¤o„™™saveProfileButton:††’„Š«qo„™™cancelProfileButton:††’„œ«o ´„™™passwordCancelButton††’„œ« ·o„™™delegate††’„œ«­o„™™myController††’„œ«o„™™aboutWindow††’„œ«o4„™™versionText††’„Š«So„™™raiseAboutWindow:††’„Š«o„™™onlineHelp:††’„Š« åo„™™syncButton:††’„Š« ß…„™™merge:††’„œ«o Æ„™™ConnectingView††’„Š«`o„™™installCommandLineTool:††’„Š« âo„™™restartButton†††’…š ±„@iç ›rç ‚Cç©çÚQç› Òçjç õç¯çÀ üç•çš Êçèxç¦ Øç º íç`¬ç ÏçÎç“ ¯ç †lçD Ùç ãç éç ©IçøƒçÎ Éç „Dçœç´ éç’çí Æç­ç• °çj ˆçÜRç ¿ ïç ç á£ç äçò àçÂç½ Çç  tç í £çBKçêyç¨ Úç şç ç “oçĞç0šç şç ıç4›çú†ç¶ ğç ¤Gççf ‘ç  úç Æ§ç ø «çŞ^çì èç ‰mç\ Äçû‡ç? ÏçyjçÄç µ ëç İçìzçª Ûç sçüˆç ï ©ç¸ ÅçÒç— ³ç ÿç¶ Ëç¸ ñç ¬Jç
-Ÿçö âç‰ ‹ç Òç Îçàfç Óçi •çoç å¤ç nçÆç –pçî{ç¬ Üçş‰ç ì8çb ç–çÔç —çº òç çâuç  ÕçwBç] çÓ ÎçÈç ´ îçÆ Èçğ|ç® İç ‹ç ßç â®çÖ2ç û ¬çqHç­ ÍçtAçñ}ç> êç ˜qç ò  ç¼ óço Ñç¥çM –çävç¢ ÖçO9çò~ç‘ç È«çÊç ’ç ß¡çóç° æçŒç$™çc †ç ˜çØLçr3ç · ìççô€ç ùç¾ ûç:ç ÚçD0ç¦çgçı áç Øç|kçæwçSçõç8ç¤ ×çÌç‘ ™ç Õ
-çï Ğç™ µç õ çö‚ç² çš°š–­¯– · ¸–ö÷’„˜™IBCocoaFramework††
\ No newline at end of file
+‚„   †’„’š‚!€  §………… ÆC   C ’’…’…’…¨  „¬‚ş ‚8  ­„™™New†	……² …’…’*Æ È‚†‚@ÿ„˜™ †„˜™ †……†††………  k  k’…’…’…’…–„˜™NSView†„™™NSResponder††š‚!€  §…………	T   T ’’…’…’…¨  „¬‚ş ‚8  ­„™™Open†	……² …’…’Æ È‚†‚@ÿ„˜™ †„˜™ †……††– –»œ–„––„™™PreferencesController†…†•– Â ë– ¨K–„––„™™MyController†…†•– – å•––K•– º ±–«œ– Å Â–)ş–– ì å– Ó Î–$ –E)– £K–öİ–¢œ– ä å– × Î– ù ÷–+)– Û Î–„Ú¹làh‚px  „™™Unison†„™™NSWindow†„˜™View†„Ã’…š §„ š †………	àh  àh’…’…’…’…†…Á   ê±¶ Õ ’…± †•–sV–cV– Ô Î– ½ ±– È Â–4+– è å– Ø Î–=)–®œ– •–  Š– ŠK––MK–İÙ–•–@)–•– Ş Î––=9–³œ– ± è–*––°œ–! –zV–µœ– ß Î–V–çİ– ´ ±–"– ü ÷– ÷–œ ê–ãİ–.+–·œ– î ì–Å•– ğ î–8)–ßİšD– ß„™™1111†– „™™PreferencesView†–„™™NSTextField2†–Ù„™™AboutWindow†–@„™™NSTextField1†–Å„™™ConnectingView†–4„™™NSButtonCell1†– Ô„™™121†– ·„™™NSMenuItem9†– å„˜™MainMenu†–)„™™NSView†–„™™NSButton†–.„™™NSButtonCell†– ì„˜™1†–!„™™NSTextField23†–J„™™	NSButton1†–„™™	NSButton1†–9„™™Window†– ô õ–„™™chooseProfileView†–n„™™NSTableColumn1†– ±„™™NSMenu†–„™™NSView†–V„™™NSTableView†–=„™™NSTextField21†–À„™™NSTextField†–M„™™NSTextField2†–56–*„™™	NSButton2†– º„™™NSMenuItem10†– Š„™™NSScrollView2†–78–$„™™NSTextField4†–"„™™NSTableColumn†–„™™PasswordWindow†– ö„™™NSTextField2†–„™™	NSButton1†–ş„™™NSBox1†– è„™™
+NSMenuItem†–„™™NSTextField2†–+„™™	NSMatrix1†– ù„™™NSTextField†–E„™™NSTextField3†– ´„™™NSMenuItem3†–c„™™NSTableColumn†– ğ„˜™ †–P„™™NSScrollView1†–„™™NSButton†– £„™™
+NSButton21†–ã„™™NSTextField1†–•„˜™File's Owner†–„™™	NSButton1†– î„˜™2†–8„™™NSTextField2†–B„™™NSTextField22†–ö„™™NSTextField2†–;„™™NSTextField†– °„™™NSMenuItem1†–K„™™updatesView†–ú„™™NSTextField3†–„™™NSTextField†–„™™NSBox†–ß„™™NSTextField†–„™™NSScrollView1†– „™™
+NSTextView†–„™™NSTableView†– ¨„™™NSTextField1†– ü„™™NSButton†’„ê¾’9†’„ šM’„„„NSNibControlConnector Ï„„NSNibConnector”µ ß•„˜™
+terminate:††’„ƒµ Û•„™™hideOtherApplications:††’„ƒµ Ø•„™™hide:††’„ƒµ Í•„™™unhideAllApplications:††’„ƒµ ´…„˜™cut:††’„ƒµ ·…„˜™paste:††’„ƒµ º…„˜™
+selectAll:††’„ƒµ °…„˜™copy:††’„„„NSNibOutletConnector Ï„µ7K„™™updatesView††’„•µ7„™™chooseProfileView††’„ƒµ*7„™™createButton:††’„ƒµ7„™™openButton:††’„ƒµ £7„™™restartButton:††’„•µ79„™™
+mainWindow††’„•µ ô„™™	tableView††’„•µ ô„™™
+dataSource††’„•µ7M„™™updatesText††’„•µ7 ô„™™profileController††’„•µ7V„™™	tableView††’„•µV7„™™
+dataSource††’„ƒµJ7„™™syncButton:††’„ƒµ ü7„™™endPasswordWindow:††’„•µ7„™™passwordWindow††’„•µ7 ù„™™passwordText††’„ƒµ7„™™endPasswordWindow:††’„•µ7 „™™detailsTextView††’„•µV7„™™delegate††’„ƒµ Å…„™™ignorePath:††’„ƒµ È…„™™
+ignoreExt:††’„ƒµ Á…„™™ignoreName:††’„ƒµš…„™™copyLR:††’„ƒµ¢…„™™copyRL:††’„ƒµ ½…„™™selectConflicts:††’„ƒµ³…„™™revert:††’„ƒµ«…„™™forceNewer:††’„ƒµ®…„™™forceOlder:††’„ƒµ°…„™™leaveAlone:††’„•µ7 ¨„™™
+statusText††’„•µ5$„™™profileNameText††’„•µ5„™™cancelButton††’„•µ5„™™
+saveButton††’„•µ75„™™preferencesController††’„•µ7 „™™preferencesView††’„•µ5„™™firstRootText††’„•µ5;„™™secondRootUser††’„•µ5@„™™secondRootHost††’„•µ5E„™™secondRootText††’„•µ5.„™™remoteButtonCell††’„•µ54„™™localButtonCell††’„•µ$„™™nextKeyView††’„•µ+è†’„•µ+;è†’„•µ;@è†’„•µ@Eè†’„•µEè†’„•µ$è†’„ƒµ.5„™™remoteClick:††’„ƒµ45„™™localClick:††’„•µè†’„•µè†’„ƒµ7„™™saveProfileButton:††’„ƒµ7„™™cancelProfileButton:††’„•µ7„™™passwordCancelButton††’„•µ ù7„™™delegate††’„•µ7„™™myController††’„•µ7Ù„™™aboutWindow††’„•µ7ú„™™versionText††’„ƒµ Ñ7„™™raiseAboutWindow:††’„ƒµ ğ7„™™onlineHelp:††’„ƒµ»7„™™syncButton:††’„ƒµµ…„™™merge:††’„•µ7Å„™™ConnectingView††’„ƒµ¸7„™™restartButton:††’„•µ7J„™™synchronizeButton††’„•µ7 £„™™restartButton††’„•µ7»„™™synchronizeMenuItem††’„•µ7¸„™™restartMenuItem†††’…š ³„@iê}â îjâ$Jâ¥â› ÖâV ââİvâ" Êâë~âç™â=qâÃâ9â!Iâ åâ ³â°â© æâìâAâK Æâ‚ ‹âûŒâ ½â Â şâ·£â ÁâÑLâ ± ©â· ûâß–âí€â Š ùâ · «â+lâ	¦âBâ ×âz õâÅ§âßwâÙ’âîâÅâ’ µâ±â Å ÿâ«â« çâ4nâ°âİ‘âï‚âJ èâœâıâ” Òâ ä8â äâÓQâ8oâ;pâ¹ üâ Åâ@râŸ Øâ ß ˆâáxâÇâ Èâ Ó Äâ¶â ¨0â × â­ éâ êâöšâñƒâšâÿœâ¢
+â»¤âBsâ)DâÕRâjâ»â† ’â¡ Úâ Û ‘â¸®â=â ´  âãyâ ËâÉâˆ ˜â·âşCâHâ¯ ğâ Í –â5Kâ©âó†âs ãââ Éâ ù ìâGâ×^â ğoâ½â  úâô‡â7 Ñâ ô ÙâŠ ™âEtâ º ¬â³â è £â£ Ûâåzâõˆâc áâ ö ïâËâ± ñâ•âŸâ êâ— Óâ Ø †â È ân ßâ Íâ®â ÇâÙfâ Ô â¿â Î9âú›âŒ ¯â¥ Üâ £ Ïâç{â ÷ ëâÀ«â÷‰â.mâ °âÍâ³ òâM Ğâ â ë ıâ™ ÕâÛuâP àâ ° â ü íâÁâµ¡â Ñâ¯âkâ§ İâ ìgâ îâã—â 3âé|âù‹âÏ2â Ş •âµ óâ* Îš¸š––VX– ù ú’„˜™IBCocoaFramework††
\ No newline at end of file
diff -u -aruN unison.orig/unison-2.13.16/uimac/MyController.h unison/unison-2.13.16/uimac/MyController.h
--- unison.orig/unison-2.13.16/uimac/MyController.h	2005-03-18 15:33:18.000000000 -0800
+++ unison/unison-2.13.16/uimac/MyController.h	2005-09-06 09:00:16.000000000 -0700
@@ -12,6 +12,9 @@
 {
     IBOutlet NSWindow *mainWindow;
 
+    IBOutlet NSMenuItem *restartMenuItem;
+    IBOutlet NSMenuItem *synchronizeMenuItem;
+
     IBOutlet ProfileController *profileController;
     IBOutlet NSView *chooseProfileView;
     NSSize chooseProfileSize;
@@ -28,6 +31,8 @@
 
     IBOutlet ReconTableView *tableView;
     IBOutlet NSTextField *updatesText;
+    IBOutlet NSButton *restartButton;
+    IBOutlet NSButton *synchronizeButton;
 
     IBOutlet NSWindow *passwordWindow;
     IBOutlet NSTextField *passwordText;
diff -u -aruN unison.orig/unison-2.13.16/uimac/MyController.m unison/unison-2.13.16/uimac/MyController.m
--- unison.orig/unison-2.13.16/uimac/MyController.m	2005-03-20 19:25:50.000000000 -0800
+++ unison/unison-2.13.16/uimac/MyController.m	2005-09-06 09:00:16.000000000 -0700
@@ -74,6 +74,8 @@
         [reconItems insertObject:[ReconItem initWithRi:Field(caml_reconItems,j)]
             atIndex:j];
     }
+    [synchronizeButton setEnabled:YES];
+    [synchronizeMenuItem setEnabled:YES];
 }
 
 - (void)displayDetails:(int)i
@@ -129,6 +131,8 @@
     [mainWindow setContentView:blankView];
     [self resizeWindowToSize:updatesSize];
     [mainWindow setContentView:updatesView];
+    [synchronizeButton setEnabled:NO];
+    [synchronizeMenuItem setEnabled:NO];
 
     // reconItems table gets keyboard input
     [mainWindow makeFirstResponder:tableView];
@@ -203,6 +207,8 @@
     [[NSNotificationCenter defaultCenter] removeObserver:self
         name:NSThreadWillExitNotification
         object:nil];
+    [restartButton setEnabled:YES];
+    [restartMenuItem setEnabled:YES];
     int i;
     for (i = 0; i < [reconItems count]; i++) {
         [[reconItems objectAtIndex:i] resetProgress];
@@ -213,6 +219,10 @@
 - (IBAction)syncButton:(id)sender
 {
     [tableView setEditable:NO];
+    [restartButton setEnabled:NO];
+    [restartMenuItem setEnabled:NO];
+    [synchronizeButton setEnabled:NO];
+    [synchronizeMenuItem setEnabled:NO];
     [[NSNotificationCenter defaultCenter] addObserver:self
         selector:@selector(afterSync:)
         name:NSThreadWillExitNotification object:nil];
diff -u -aruN unison.orig/unison-2.9.1/Makefile.OCaml unison/unison-2.9.1/Makefile.OCaml
--- unison.orig/unison-2.9.1/Makefile.OCaml	2002-04-10 22:13:23.000000000 -0700
+++ unison/unison-2.9.1/Makefile.OCaml	2005-09-06 09:00:16.000000000 -0700
@@ -25,7 +25,7 @@
 
 ifeq (${OSCOMP},cygwingnuc) # Define this if compiling with Cygwin GNU C
   OSARCH=win32gnuc
-  ETAGS=c:/emacs/bin/etags
+  ETAGS=/bin/etags
   buildexecutable:: win32rc/unison.res.lib   
 else
 # Win32 system
@@ -207,18 +207,35 @@
 #-cclib user32.lib -cclib advapi32.lib -cclib wsock32.lib \
 #               -cclib gdi32.lib -cclib imm32.lib -cclib shell32.lib \
 #               -cclib ole32.lib -cclib uuid.lib
-      CLIBS+=-cclib -llablgtk \
+      ifeq ($(OSCOMP), cygwingnuc)
+        # Cygwin
+        CLIBS+=-cclib -llablgtk \
+           -cclib /usr/lib/libglib.dll.a \
+           -cclib /usr/lib/libgmodule.dll.a \
+           -cclib /usr/lib/libgdk.dll.a \
+           -cclib /usr/lib/libgtk.dll.a \
+           $(WINSYSLIBS)
+        STATICLIBS+=-cclib -llablgtk \
+                -cclib /usr/lib/libglib.a \
+                -cclib /usr/lib/libgmodule.a \
+                -cclib /usr/lib/libgdk.a \
+                -cclib /usr/lib/libgtk.a \
+                $(WINSYSLIBS)
+      else
+        # Win32 with GNU C, but not Cygwin
+        CLIBS+=-cclib -llablgtk \
            -cclib $(GUILIBDIR)/glib-1.3.lib \
            -cclib $(GUILIBDIR)/gmodule-1.3.lib \
            -cclib $(GUILIBDIR)/gdk-1.3.lib \
            -cclib $(GUILIBDIR)/gtk-1.3.lib \
            $(WINSYSLIBS)
-      STATICLIBS+=-cclib -llablgtk \
+        STATICLIBS+=-cclib -llablgtk \
                 -cclib $(GUILIBDIR)/cclibs/glib-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gmodule-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gdk-1.3.lib \
                 -cclib $(GUILIBDIR)/cclibs/gtk-1.3.lib \
                 $(WINSYSLIBS)
+     endif # cygwingnuc
     else
       ifeq ($(OSARCH), solaris)
         STATICLIBS+=-cclib -llablgtk \
diff -u -aruN unison.orig/unison-2.9.1/ubase/uprintf.ml unison/unison-2.9.1/ubase/uprintf.ml
--- unison.orig/unison-2.9.1/ubase/uprintf.ml	2002-04-10 22:13:23.000000000 -0700
+++ unison/unison-2.9.1/ubase/uprintf.ml	2005-09-06 09:00:16.000000000 -0700
@@ -10,8 +10,8 @@
 (*                                                                     *)
 (***********************************************************************)
 
-external format_int: string -> int -> string = "format_int"
-external format_float: string -> float -> string = "format_float"
+external format_int: string -> int -> string = "caml_format_int"
+external format_float: string -> float -> string = "caml_format_float"
 
 let fprintf outchan doafter format =
   let format = (Obj.magic format : string) in
diff -u -aruN unison.orig/unison-2.9.1/ubase/util.ml unison/unison-2.9.1/ubase/util.ml
--- unison.orig/unison-2.9.1/ubase/util.ml	2002-04-10 22:13:23.000000000 -0700
+++ unison/unison-2.9.1/ubase/util.ml	2005-09-06 09:00:16.000000000 -0700
@@ -329,19 +329,20 @@
 (*****************************************************************************)
 
 let fileInHomeDir n =
-  match osType with
-    `Win32 ->
-      let dirString =
-        try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
-        with Not_found ->
-        try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
-        with Not_found ->
-        try Unix.getenv "UNISON" (* Use UNISON dir if none of
-                                    the above are set *)
-        with Not_found -> "c:/" (* Default *) in
-      Filename.concat dirString n
-  | `Unix ->
-      Filename.concat (safeGetenv "HOME") n
+  if osType = `Unix || isCygwin then
+    Filename.concat (safeGetenv "HOME") n
+  else if osType = `Win32 then
+    let dirString =
+      try Unix.getenv "USERPROFILE" (* Windows NT/2K *)
+      with Not_found ->
+      try Unix.getenv "HOME" (* Windows 9x with Cygwin HOME set *)
+      with Not_found ->
+      try Unix.getenv "UNISON" (* Use UNISON dir if none of
+                                  the above are set *)
+      with Not_found -> "c:/" (* Default *) in
+    Filename.concat dirString n
+  else
+    assert false (* osType can't be anything else *)
 
 (*****************************************************************************)
 (*           "Upcall" for building pathnames in the .unison dir              *)
