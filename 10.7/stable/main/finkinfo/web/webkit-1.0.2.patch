diff -Nurd -x'*~' webkit-1.2.7.orig/GNUmakefile.in webkit-1.2.7/GNUmakefile.in
--- webkit-1.2.7.orig/GNUmakefile.in	2011-02-07 12:43:44.000000000 -0500
+++ webkit-1.2.7/GNUmakefile.in	2011-08-09 11:00:49.000000000 -0400
@@ -9054,7 +9054,7 @@
 	$(GEOCLUE_LIBS) \
 	$(GLIB_LIBS) \
 	$(GSTREAMER_LIBS) \
-	$(GTK_LIBS) \
+	$(GTK_LIBS) -lintl \
 	$(HILDON_LIBS) \
 	$(JPEG_LIBS) \
 	$(LIBSOUP_LIBS) \
@@ -9319,8 +9319,8 @@
 	$(LIBSOUP_CFLAGS)
 
 Programs_DumpRenderTree_LDADD = \
-	libwebkit-1.0.la \
 	libJavaScriptCore.la \
+	libwebkit-1.0.la \
 	$(GLOBALDEPS_LIBS) \
 	$(CAIRO_LIBS) \
 	$(GTK_LIBS) \
@@ -9340,7 +9340,7 @@
 @TARGET_X11_TRUE@	-I$(srcdir)/WebCore/plugins \
 @TARGET_X11_TRUE@	-I$(srcdir)/WebKitTools/DumpRenderTree/TestNetscapePlugIn.subproj \
 @TARGET_X11_TRUE@	$(global_cppflags) \
-@TARGET_X11_TRUE@	$(javascriptcore_cppflags)
+@TARGET_X11_TRUE@	$(javascriptcore_cppflags) -DXP_UNIX
 
 @TARGET_X11_TRUE@TestNetscapePlugin_libtestnetscapeplugin_la_SOURCES = \
 @TARGET_X11_TRUE@	WebKitTools/DumpRenderTree/unix/TestNetscapePlugin/ForwardingHeaders/WebKit/npapi.h \
diff -Nurd -x'*~' webkit-1.2.7.orig/JavaScriptCore/interpreter/Interpreter.cpp webkit-1.2.7/JavaScriptCore/interpreter/Interpreter.cpp
--- webkit-1.2.7.orig/JavaScriptCore/interpreter/Interpreter.cpp	2011-02-07 12:29:58.000000000 -0500
+++ webkit-1.2.7/JavaScriptCore/interpreter/Interpreter.cpp	2011-08-09 14:07:04.000000000 -0400
@@ -2794,8 +2794,10 @@
             vPC += OPCODE_LENGTH(op_get_by_pname);
             NEXT_INSTRUCTION();
         }
-        Identifier propertyName(callFrame, subscript.toString(callFrame));
-        result = baseValue.get(callFrame, propertyName);
+        {
+            Identifier propertyName(callFrame, subscript.toString(callFrame));
+            result = baseValue.get(callFrame, propertyName);
+        }
         CHECK_FOR_EXCEPTION();
         callFrame->r(dst) = result;
         vPC += OPCODE_LENGTH(op_get_by_pname);
diff -Nurd -x'*~' webkit-1.2.7.orig/WebCore/bindings/js/JSDOMBinding.h webkit-1.2.7/WebCore/bindings/js/JSDOMBinding.h
--- webkit-1.2.7.orig/WebCore/bindings/js/JSDOMBinding.h	2010-09-10 09:20:32.000000000 -0400
+++ webkit-1.2.7/WebCore/bindings/js/JSDOMBinding.h	2011-08-09 14:07:04.000000000 -0400
@@ -225,7 +225,7 @@
     {
         if (!node)
             return JSC::jsNull();
-        if (JSNode* wrapper = getCachedDOMNodeWrapper(exec, node->document(), node))
+        if (JSC::JSCell* wrapper = getCachedDOMNodeWrapper(exec, node->document(), node))
             return wrapper;
         return createDOMNodeWrapper<WrapperClass>(exec, globalObject, node);
     }
diff -Nurd -x'*~' webkit-1.2.7.orig/WebCore/config.h webkit-1.2.7/WebCore/config.h
--- webkit-1.2.7.orig/WebCore/config.h	2010-09-10 09:20:33.000000000 -0400
+++ webkit-1.2.7/WebCore/config.h	2012-09-22 13:24:15.000000000 -0400
@@ -124,8 +124,10 @@
 
 // this breaks compilation of <QFontDatabase>, at least, so turn it off for now
 // Also generates errors on wx on Windows, presumably because these functions
-// are used from wx headers.
-#if !PLATFORM(QT) && !PLATFORM(WX) && !PLATFORM(CHROMIUM)
+// are used from wx headers.On GTK+ for Mac many GTK+ files include <libintl.h>
+// or <glib/gi18n-lib.h>, which in turn include <xlocale/_ctype.h> which uses
+// isacii().
+#if !PLATFORM(QT) && !PLATFORM(WX) && !PLATFORM(CHROMIUM) && !(OS(DARWIN) && PLATFORM(GTK))
 #include <wtf/DisallowCType.h>
 #endif
 
diff -Nurd -x'*~' webkit-1.2.7.orig/configure webkit-1.2.7/configure
--- webkit-1.2.7.orig/configure	2011-02-07 12:43:44.000000000 -0500
+++ webkit-1.2.7/configure	2011-08-09 13:02:42.000000000 -0400
@@ -16790,7 +16790,7 @@
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if dolt supports this host" >&5
 $as_echo_n "checking if dolt supports this host... " >&6; }
-dolt_supported=yes
+dolt_supported=no
 if test x$DOLT_BASH = x; then
     dolt_supported=no
 fi
@@ -17206,7 +17206,7 @@
 
 
 # Check for libpng the way Gtk+ does it
-for l in libpng libpng14 libpng12; do
+for l in libpng14; do
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $l" >&5
 $as_echo_n "checking for $l... " >&6; }
   if $PKG_CONFIG --exists $l ; then
@@ -17799,7 +17799,7 @@
 
 if test "$with_unicode_backend" = "icu"; then
         case "$host" in
-            *-*-darwin*)
+            *-*-darwin*-but-not-fink-because-it-has-icu-config)
 		UNICODE_CFLAGS="-I$srcdir/JavaScriptCore/icu -I$srcdir/WebCore/icu"
 		UNICODE_LIBS="-licucore"
                 ;;
@@ -17968,7 +17968,7 @@
 done
 
 
-GETTEXT_PACKAGE=$PACKAGE
+GETTEXT_PACKAGE="${PACKAGE}-1.0.2"
 
 
 cat >>confdefs.h <<_ACEOF
