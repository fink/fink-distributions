Info2: <<
Package: xcircuit-testing
Version: 3.9.37
Revision: 1
Type: maj (3.9)

Depends: x11, x11-shlibs,  tcltk, tcltk-shlibs
BuildDepends: tcltk-dev, x11-dev, automake1.14, autoconf2.6, fink (>=0.32), fink-buildenv-modules
RuntimeDepends: ghostscript | ghostscript-nox, app-defaults, ngspice

Conflicts: xcircuit
Replaces: xcircuit

Source: http://opencircuitdesign.com/xcircuit/archive/xcircuit-%v.tgz
Source-Checksum: SHA1(7b6a986cea73f2c4cf794e4a1fe9287d50154144)

PatchScript: <<
	perl -pi -e 's/-single_module -dynamiclib -flat_namespace/-dynamiclib/; s/-undefined suppress -noprebind//' configure.in 	
	perl -pi -e 's,(\$\{LDDL_FLAGS\} xcwrap\.o),-install_name \$\(libdir\)/xcircuit-%type_raw[maj]/xcircuit\$\{SHDLIB_EXT\} \1,' Makefile.am
	
<<

ConfigureParams: --with-gnu-ld --with-ngspice=%p --enable-optimize

SetCFLAGS: -fno-common

CompileScript: <<
	#!/bin/sh -ev
	. fink-buildenv-helper.sh
	autoreconf -fi
	if [ $DARWIN_MAJOR_VERSION -gt 11 ] ; then
		./configure %c --x-libraries=/opt/X11/lib --x-includes=/opt/X11/include
	else
		./configure %c --x-libraries=/usr/X11/lib --x-includes=/usr/X11/include
	fi
	make
<<

InstallScript: <<
	#!/bin/sh -ev
	make install DESTDIR=%d
	mkdir -p %i/share/man/man1
	mv %i/lib/xcircuit-%type_raw[maj]/man/xcircuit.1 %i/share/man/man1
	rm -r %i/lib/xcircuit-%type_raw[maj]/man
	mkdir -p %i/etc/app-defaults
	mv %i/lib/xcircuit-%type_raw[maj]/app-defaults/XCircuit %i/etc/app-defaults
	rm -r %i/lib/xcircuit-%type_raw[maj]/app-defaults
	./mkinstalldirs %i/lib/xcircuit-%type_raw[maj]/python
	for i in spice gettext pagebbox ; 
		do install -c -m 644 lib/python/$i.py %i/lib/xcircuit-%type_raw[maj]/python ; 
	done
<<
DocFiles: COPYRIGHT README* TODO CHANGES examples

Shlibs: !%p/lib/xcircuit-%type_raw[maj]/xcircuit.dylib

Description: Circuit drawing app with schematic capture
DescDetail: <<
XCircuit is a UNIX/X11 (and now Windows, if you have an X-Server running) 
program for drawing publishable-quality electrical circuit schematic diagrams 
and related figures, and produce circuit netlists through schematic capture. 
XCircuit regards circuits as inherently hierarchical, and writes both 
hierarchical PostScript output and hierarchical SPICE netlists. 
Circuit components are saved in and retrieved from libraries which are fully 
editable. XCircuit does not separate artistic expression from circuit drawing; 
it maintains flexiblity in style without compromising the power of schematic 
capture.

XCircuit is flexible enough to be used as a generic program for drawing just 
about anything, and is competitive with powerful programs such as "xfig". 
It is especially good for any task requiring repeated use of a standard set of 
graphical objects, including architectural drawing, printed circuit board 
layouts, and (my personal favorite) music typography.

This package represents the upstream "Development" branch.
<<
DescUsage: <<
Depending on your X11 environment, dialog boxes can get buried
behind the main window.
Ghostscript rendering is not yet available because we don't install the 
relevant header in a Fink package.
<<
DescPort: <<
Needed to add -fno-common to CFLAGS.

Patch Makefile.am to to make sure that xcircuit.dylb
has a proper install_name.

Patch configure.in to avoid building xcircuit.dylib with a flat namespace.
<<
DescPackaging: <<
3.8.2-1 and later:  unify patch with xcircuit, entailing a PatchScript to differentiate
the two cases.

3.6.78-1 and later:  includes Python bindings (they come with the tarball) and
examples.  

xcircuit.dylib appears not even to be used by the executable, and has no
headers to build against it.

App-defaults file is installed in a Fink-compliant location.

Move manpage to Fink-compliant location in the InstallScript.

Prior versions by Max Horn.
<<
Maintainer: Alexander Hansen <alexkhansen@users.sourceforge.net>
Homepage: http://opencircuitdesign.com/xcircuit/
License: GPL
<<
