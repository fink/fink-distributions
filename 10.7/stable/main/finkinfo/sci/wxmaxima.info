Info2: <<
Package: wxmaxima%type_pkg[-ui]
Type: -ui (-gtk -mac)
Version: 12.01.0
Revision: 2
Description: Interface to Maxima using wxWidgets
DescDetail: <<
wxMaxima is a cross platform GUI for the computer algebra system maxima based 
on wxWidgets.  wxMaxima features include:
*	2D formatted math display: wxMaxima implements its own math display 
	engine to nicely display maxima output.
*	Menu system: most maxima commands are available through menus. Most 
	used functions are also available through a button panel at below the 
	input line.
*	Dialogs: commands which require more that one argument can be entered
	through dialogs so that there is no need to remember the exact syntax.
*	Command line history: the input line has command history and command 
	completion based on previous input.
*	Create documents: text can be mixed with math calculations to create 
	documents. See the
	howto (http://wxmaxima.sourceforge.net/wiki/index.php/Howto)
	for tips on how to use these features. Documents can be saved and edited
	again later.
<<
DescUsage: <<
You can either use the  app bundle in %p/Applications, which is
symlinked in /Applications/Fink, or the "wxmaxima" command-line
script.

If you get a "Cannot connect to server" message on startup,
quit and restart wxMaxima.  
<<
Maintainer: Alexander Hansen <alexkhansen@users.sourceforge.net>
Homepage: http://andrejv.github.com/wxmaxima/
#
Source: mirror:sourceforge:%{ni}/wxMaxima-%v.tar.gz
Source-MD5: ef71ba8339fcdd7b715619af51bfa65e
#
PatchFile: %{ni}.patch
PatchFile-MD5: d65056917122c01e5fc96d7cfb88db74
PatchScript: <<
#!/bin/sh -ev
sed -e 's,PREFIX,%p,' %{PatchFile} | patch -p1 
# patch out hardcoded default app locations
perl -pi.bak -e 's,/Applications/Maxima\.app,%p/bin/maxima,' src/Config.cpp src/wxMaxima.cpp
perl -pi.bak -e 's,/Applications/Gnuplot.app,%p/bin/gnuplot,' src/wxMaxima.cpp
<<
#
Recommends: <<
maxima (>= 5.26.0-1), 
(%type_pkg[-ui] = -mac) xmaxima (>= 5.26.0-1), 
(%type_pkg[-ui] = -gtk) xmaxima-x11 (>= 5.26.0-1)
<<
Depends: <<
libxml2-shlibs, libiconv, 
(%type_pkg[-ui] = -mac) wxcocoa293-shlibs (>= 2.9.3-3), 
(%type_pkg[-ui] = -gtk) wxgtk2.8-shlibs ( >= 2.8.4 )
<<
BuildDepends: <<
libxml2, libiconv-dev, 
(%type_pkg[-ui] = -mac) wxcocoa293 (>= 2.9.3-3), 
(%type_pkg[-ui] = -mac) xcode (>= 4.2.1)
(%type_pkg[-ui] = -gtk) wxgtk2.8 ( >= 2.8.4 ),
fink-package-precedence
<<
Conflicts: wxmaxima-mac, wxmaxima-gtk
Replaces: wxmaxima-mac, wxmaxima-gtk
Provides: wxmaxima
GCC: 4.0
#
ConfigureParams: <<
--with-wx-config=%p/bin/wx-config --with-xml-prefix=%p \
 --enable-unicode-glyphs --enable-printing --enable-dnd
<<
#
CompileScript: <<
#!/bin/sh -ev
./configure %c
make wxMaxima.app
fink-package-precedence .
mv wxMaxima.app/Contents/MacOS/wxmaxima wxMaxima.app/Contents/MacOS/wxmaxima.bin
cp wxmaxima.fink wxMaxima.app/Contents/MacOS/wxmaxima
chmod a+x wxMaxima.app/Contents/MacOS/wxmaxima
<<
InstallScript:<<
#!/bin/sh -ev
%{default_script}
rm %i/bin/wxmaxima || echo "No %p/bin/wxmaxima"
cp wxmaximabin %i/bin/wxmaxima
chmod a+x %i/bin/wxmaxima
<<
#
AppBundles: wxMaxima.app
DocFiles: AUTHORS COPYING ChangeLog NEWS README
DescPackaging:<<
Patch file installs a wrapper script in the .app bundle to insure 
that Fink's environment is used.

We remove the %p/bin/wxmaxima applications that upstream builds and
replace them by a script using "open -a %p/Applications/wxMaxima.app."

As of 11.08.0-2: use llvm-g++ and llvm-gcc instead of clang; wxcocoa293
has to be built with llvm-gcc|g++, and we get a missing symbols error 
in wxmaxima-mac during the wx test in ./configure if clang is used.

We require a versioned dependency on wxcocoa293 because this version of 
wxmaxima needs some stuff which is not in the official wxwidgets-2.9.3 release,
and which has been added to wxcocoa293-2.9.3-2.

Force rebuild for 12.01.0-2, since the package seems to be sensitive to
what compiler is used to build wxcocoa293.
<<
License: GPL2
<<