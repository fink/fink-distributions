diff --git a/build/unix/makelib.sh b/build/unix/makelib.sh
index d4b3833..593e96b 100755
--- a/build/unix/makelib.sh
+++ b/build/unix/makelib.sh
@@ -34,7 +34,7 @@ rm -f $LIB
 if [ $PLATFORM = "macosx" ]; then
    macosx_minor=`sw_vers | sed -n 's/ProductVersion://p' | cut -d . -f 2`
    if [ $macosx_minor -ge 5 ] && [ $LD != "icpc" ]; then
-      soext="so"
+      soext="dylib"
    else
       soext="dylib"
    fi
@@ -220,7 +220,7 @@ if [ "x$MAJOR" != "x" ]; then
 	ln -fs $SONAME.$MAJOR        $LIB
     elif [ -f $LIBVERS ]; then
 	# Versioned library has format foo.3.05.so
-	source_file=`echo $SONAME | sed "s/.*\./&${MINOR}./"`
+	source_file=`basename $SONAME | sed "s/.*\./&${MINOR}./"`
 	LIBNOMAJORMINOR=`echo $LIB|sed 's,\.'$MAJOR'\.'$MINOR',,'`
 	if [ $LIB != $LIBNOMAJORMINOR ]; then
 	    LIBNOMINOR=`echo $LIB|sed 's,\.'$MINOR',,'`
diff --git a/cint/ROOT/cintdlls.mk b/cint/ROOT/cintdlls.mk
index 185ee61..b7d11a3 100644
--- a/cint/ROOT/cintdlls.mk
+++ b/cint/ROOT/cintdlls.mk
@@ -146,7 +146,7 @@ ifeq ($(subst $(MACOSX_MINOR),,456789),456789)
 else
   # On macosx one should change the install_name as well.
   # FIXME: not tested on 10.4, should be the same also there?
-  CINTDLLSOEXTCMD += ;install_name_tool -id `otool -D $@ | tail -1 | sed -e's|:$$||;s|[.]so$$|.dll|'` $@
+  CINTDLLSOEXTCMD += ;install_name_tool -id `otool -D $@ | tail -n 1 | sed -e's|:$$||;s|[.]so$$|.dll|'` $@
   CINTDLLSOEXTCMD += ;rm -f $(@:.dll=.so)
 endif
 endif # macosx
@@ -163,21 +163,21 @@ endif
 $(ALLCINTDLLS): $(ORDER_) $(MAINLIBS)
 
 $(CINTDLLDIRSTL)/%.dll: $(CINTDLLDIRDLLSTL)/G__cpp_%.o
-	@$(MAKELIB) $(PLATFORM) $(LD) "$(LDFLAGS)" "$(SOFLAGS)" $(notdir $(@:.dll=.$(SOEXT))) $(@:.dll=.$(SOEXT)) "$(filter-out $(MAINLIBS),$^)" "$(CINTDLLLIBLINK)"
+	@$(MAKELIB) $(PLATFORM) $(LD) "$(LDFLAGS)" "$(SOFLAGS)" $(@:.dll=.$(SOEXT)) $(@:.dll=.$(SOEXT)) "$(filter-out $(MAINLIBS),$^)" "$(CINTDLLLIBLINK)"
 	$(CINTDLLSOEXTCMD)
 ifneq ($(subst win,,$(ARCH)),$(ARCH))
 	@rm -f $(@:.dll=.lib) $(@:.dll=.exp) # remove import libs
 endif
 
 $(CINTDLLDIRDLLS)/stdcxxfunc.dll: $(CINTDLLDIRL)/G__cpp_stdcxxfunc.o
-	@$(MAKELIB) $(PLATFORM) $(LD) "$(LDFLAGS)" "$(SOFLAGS)" $(notdir $(@:.dll=.$(SOEXT))) $(@:.dll=.$(SOEXT)) "$(filter-out $(MAINLIBS),$^)" "$(CINTDLLLIBLINK)"
+	@$(MAKELIB) $(PLATFORM) $(LD) "$(LDFLAGS)" "$(SOFLAGS)" $(@:.dll=.$(SOEXT)) $(@:.dll=.$(SOEXT)) "$(filter-out $(MAINLIBS),$^)" "$(CINTDLLLIBLINK)"
 	$(CINTDLLSOEXTCMD)
 ifneq ($(subst win,,$(ARCH)),$(ARCH))
 	@rm -f $(@:.dll=.lib) $(@:.dll=.exp) # remove import libs
 endif
 
 $(CINTDLLDIRDLLS)/%.dll: $(CINTDLLDIRL)/G__c_%.o
-	@$(MAKELIB) $(PLATFORM) $(LD) "$(LDFLAGS)" "$(SOFLAGS)" $(notdir $(@:.dll=.$(SOEXT))) $(@:.dll=.$(SOEXT)) "$(filter-out $(MAINLIBS),$^)" "$(CINTDLLLIBLINK)"
+	@$(MAKELIB) $(PLATFORM) $(LD) "$(LDFLAGS)" "$(SOFLAGS)" $(@:.dll=.$(SOEXT)) $(@:.dll=.$(SOEXT)) "$(filter-out $(MAINLIBS),$^)" "$(CINTDLLLIBLINK)"
 	$(CINTDLLSOEXTCMD)
 
 core/metautils/src/stlLoader_%.cc: $(ROOT_SRCDIR)/core/metautils/src/stlLoader.cc
diff --git a/cint/configure b/cint/configure
index 55f6d35..bed095e 100755
--- a/cint/configure
+++ b/cint/configure
@@ -155,7 +155,7 @@ function config_macos {
     AR="ar -r -cs "
     IMPLIBEXT=.dylib
 
-    MAKEIMPLIB="ln -sf @so@ @imp@"
+    MAKEIMPLIB="ln -sf `basename @so@` @imp@"
 
     EXPLLINK=1
 
diff --git a/config/Makefile.macosx64 b/config/Makefile.macosx64
index 59c32b5..2b94c84 100644
--- a/config/Makefile.macosx64
+++ b/config/Makefile.macosx64
@@ -104,7 +104,7 @@ endif
 endif
 endif
 ifeq ($(subst $(MACOSX_MINOR),,1234),1234)
-SOEXT         = so
+SOEXT         = dylib
 else
 SOEXT         = dylib
 endif
diff --git a/configure b/configure
index 4381f45..61ab2e5 100755
--- a/configure
+++ b/configure
@@ -2465,12 +2465,6 @@ if test ! "x$enable_x11" = "xno" ; then
         result "See http://root.cern.ch/drupal/content/build-prerequisites"
         exit 1
     fi
-    if test "x$platform" = "xmacosx" &&
-       test ! "x$x11libdir" = "x$found_dir" ; then
-        result "`basename $0`: libXft not in same directory as libX11"
-        result "For consistency they should be in the same directory"
-        exit 1
-    fi
 
     check_library "libXext" "$enable_shared" "$xextlibdir" \
         ${finkdir:+$finkdir/lib} \
@@ -2483,12 +2477,6 @@ if test ! "x$enable_x11" = "xno" ; then
         result "See http://root.cern.ch/drupal/content/build-prerequisites"
         exit 1
     fi
-    if test "x$platform" = "xmacosx" &&
-       test ! "x$x11libdir" = "x$found_dir" ; then
-        result "`basename $0`: libXext not in same directory as libX11"
-        result "For consistency they should be in the same directory"
-        exit 1
-    fi
 else
     x11libdir=""
     xpmlibdir=""
@@ -3582,7 +3570,7 @@ if test ! "x$enable_fftw3" = "xno"; then
 
     # At this time, libfftw3.a should always be prefered over .so,
     # to avoid forcing users to install fftw3.
-    check_library "libfftw3 libfftw3-3" "no" "$fftw3libdir" \
+    check_library "libfftw3 libfftw3-3" "yes" "$fftw3libdir" \
         $FFTW3 ${FFTW3:+$FFTW3/lib} ${FFTW3:+$FFTW3/.libs} \
         ${finkdir:+$finkdir/lib} \
         /usr/local/lib /usr/lib /opt/fftw3/lib
diff --git a/etc/Makefile.arch b/etc/Makefile.arch
index e3f0767..cf6d966 100644
--- a/etc/Makefile.arch
+++ b/etc/Makefile.arch
@@ -7,8 +7,9 @@
 # Author: Fons Rademakers, 29/2/2000
 
 RC           := root-config
-ifneq ($(shell which $(RC) 2>&1 | sed -ne "s@.*/$(RC)@$(RC)@p"),$(RC))
-ifneq ($(ROOTSYS),)
+RCCOMMAND    := $(firstword $(RC))
+ifneq ($(shell which $(RCCOMMAND) 2>&1 | sed -ne "s@.*/$(RCCOMMAND)@$(RCCOMMAND)@p"),$(RCCOMMAND))
+ifneq ($(ROOTSYS)
 RC1          := $(ROOTSYS)/bin/root-config
 ifneq ($(shell which $(RC1) 2>&1 | sed -ne "s@.*/$(RC)@$(RC)@p"),$(RC))
 $(error Please make sure $(RC1) can be found in path)
@@ -16,7 +17,7 @@ else
 RC           := $(RC1)
 endif
 else
-$(error Please make sure $(RC) can be found in path)
+$(error Please make sure $(RCCOMMAND) can be found in path)
 endif
 endif
 
diff --git a/proof/afdsmgrd/Module.mk b/proof/afdsmgrd/Module.mk
index 9333c9e..3d92790 100644
--- a/proof/afdsmgrd/Module.mk
+++ b/proof/afdsmgrd/Module.mk
@@ -8,7 +8,7 @@ MODDIR       := $(ROOT_SRCDIR)/proof/$(MODNAME)
 
 AFDSMGRDDIR  := $(MODDIR)
 AFDSMGRDBIN  := bin/afdsmgrd
-AFDSMGRDTAR  := $(shell cd $(AFDSMGRDDIR) && ls -1 afdsmgrd-v*.tar.gz | tail -1)
+AFDSMGRDTAR  := $(shell cd $(AFDSMGRDDIR) && ls -1 afdsmgrd-v*.tar.gz | tail -n 1)
 
 AFDSMGRDPREP   := $(AFDSMGRDDIR)/afdsmgrdPrepare
 AFDSMGRDINST   := $(AFDSMGRDDIR)/afdsmgrdInstall
