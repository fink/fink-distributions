Package: mplayer
Version: 1.0.0rc4svn34835
Revision: 1
Description: Unix movie player
License: GPL
Maintainer: None <fink-devel@lists.sourceforge.net>
## Versions to 1.0rc2 by James Bunton <jamesbunton@fastmail.fm>
Depends: <<
	a52dec-shlibs,
	bzip2-shlibs,
	dirac-shlibs,
	fontconfig2-shlibs,
	freetype219-shlibs,
	fribidi-shlibs,
	giflib-shlibs,
	lame-shlibs,
	libass4-shlibs,
	libbluray1-shlibs,
	libcaca-shlibs,
	libcdio-common,
	libcdio7-shlibs,
	libfaad2-shlibs,
	libgsm1-shlibs,
	libiconv,
	libmad-shlibs,
	libmng2-shlibs,
	libmpg123-shlibs,
	libncurses5-shlibs,
	libogg-shlibs,
	liboil-0.3-shlibs,
	libopencore-amr0-shlibs,
	libopenjpeg-shlibs,
	libpng15-shlibs,
	librtmp-shlibs,
	libschroedinger-shlibs,
	libspeex1-shlibs,
	libtheora0-shlibs,
	libvorbis0-shlibs,
	libx264-118-shlibs,
	lzo2-shlibs,
	mpeg2dec-shlibs,
	sdl-shlibs,
	xvidcore-shlibs
<<
BuildDepends: <<
	a52dec-dev,
	aalib,
	bzip2-dev,
	dirac-dev,
	fink-package-precedence,
	fontconfig2-dev,
	freetype219,
	fribidi-dev,
	giflib,
	ladspa-dev,
	lame-dev,
	libass4-dev,
	libbluray1-dev,
	libcaca-dev,
	libcdio-dev,
	libfaad2-dev,
	libgsm1-dev,
	libiconv-dev,
	libjpeg8,
	libmad,
	libmng2,
	libmpg123,
	libncurses5,
	libogg,
	liboil-0.3,
	libopencore-amr0,
	libopenjpeg,
	libpng15,
	librtmp,
	libschroedinger,
	libspeex1,
	libtheora0,
	libvorbis0,
	libvpx,
	libx264-118-dev,
	lzo2,
	mpeg2dec-dev,
	pkgconfig,
	sdl,
	xvidcore,
	yasm
<<
Source: http://www.snaggledworks.com/fink/src/%n-svn34835.tar.bz2
Source-MD5: 5e1ef56d5543dffdbc5cf746fc1141ba
PatchFile: %n-gsm_h.patch
PatchFile-MD5: 6828f9e991ddf5421f61fed7b3631c48
PatchScript: <<
	patch -p1 < %{PatchFile}
<<
# Some parameters are hidden with ${IFS:--foo} to not confuse the 
# autodetect code.  They're still listed for ease of maintenance.
# If something needs to be enabled, best to add the needed (Build)Deps
# and then hide-enable them here.  If directly enabled, autodetect gets
# confused.
ConfigureParams: <<
	--enable-mencoder \
	--enable-mplayer \
	--disable-gui \
	--disable-gtk1 \
	${IFS:--enable-termcap} \
	${IFS:--enable-termios} \
	--enable-iconv \
	--disable-langinfo \
	--disable-lirc \
	--disable-lircc \
	--disable-joystick \
	${IFS:--enable-apple-remote} \
	--disable-apple-ir \
	--disable-vm \
	--disable-xf86keysym \
	--disable-radio \
	--disable-radio-capture \
	--disable-radio-v4l2 \
	--disable-radio-bsdbt848 \
	--disable-tv \
	--disable-tv-v4l1 \
	--disable-tv-v4l2 \
	--disable-tv-bsdbt848 \
	--disable-pvr \
	--disable-rtc \
	${IFS:--enable-networking} \
	--disable-winsock2_h \
	--disable-smb \
	--disable-live \
	--disable-nemesi \
	${IFS:--enable-librtmp} \
	--disable-vcd \
	${IFS:--enable-bluray} \
	${IFS:--enable-dvdnav} \
	${IFS:--enable-dvdread} \
	${IFS:--enable-dvdread-internal} \
	${IFS:--enable-libdvdcss-internal} \
	--disable-cdparanoia \
	--enable-cddb \
	--enable-bitmap-font \
	${IFS:--enable-freetype} \
	${IFS:--enable-fontconfig} \
	--disable-unrarexec \
	--enable-menu \
	${IFS:--enable-sortsub} \
	${IFS:--enable-fribidi} \
	--disable-enca \
	--disable-maemo \
	--enable-macosx-finder \
	${IFS:--enable-macosx-bundle} \
	${IFS:--enable-inet6} \
	${IFS:--enable-gethostbyname2} \
	--enable-ftp \
	--disable-vstream \
	${IFS:--enable-pthreads} \
	--disable-w32threads \
	--disable-ass-internal \
	${IFS:--enable-ass} \
	--disable-rpath \
	--enable-gif \
	--enable-png \
	--enable-mng \
	--disable-jpeg \
	${IFS:--enable-libcdio} \
	${IFS:--enable-liblzo} \
	--disable-win32dll \
	--disable-qtx \
	--enable-xanim \
	--enable-real \
	${IFS:--enable-xvid} \
	--disable-xvid-lavc \
	${IFS:--enable-x264} \
	--disable-x264-lavc \
	${IFS:--enable-libdirac-lavc} \
	${IFS:--enable-libschroedinger-lavc} \
	${IFS:--enable-libvpx-lavc} \
	--disable-libnut \
	${IFS:--enable-static-ffmpeg_a} \
	--disable-ffmpeg_so \
	${IFS:--enable-postproc} \
	${IFS:--enable-vf-lavfi} \
	--disable-libavcodec_mpegaudio_hp \
	--disable-tremor-internal \
	--disable-tremor-low \
	--disable-tremor \
	${IFS:--enable-libvorbis} \
	${IFS:--enable-speex} \
	${IFS:--enable-libgsm} \
	${IFS:--enable-theora} \
	${IFS:--enable-faad} \
	--disable-faac \
	--disable-faac-lavc \
	${IFS:--enable-ladspa} \
	--disable-libbs2b \
	--disable-libdv \
	${IFS:--enable-mpg123} \
	${IFS:--enable-mad} \
	${IFS:--enable-mp3lame} \
	--disable-mp3lame-lavc \
	--disable-toolame \
	--disable-twolame \
	--disable-xmms \
	--disable-libdca \
	${IFS:--enable-mp3lib} \
	${IFS:--enable-liba52} \
	${IFS:--enable-libmpeg2} \
	--disable-libmpeg2-internal \
	--disable-musepack \
	${IFS:--enable-libopencore_amrnb} \
	${IFS:--enable-libopencore_amrwb} \
	--enable-libopenjpeg \
	--disable-crystalhd \
	--disable-vidix \
	--disable-vidix-pcidb \
	--disable-dhahelper \
	--disable-svgalib_helper \
	${IFS:--enable-gl} \
	${IFS:--enable-matrixview} \
	--disable-dga2 \
	--disable-dga1 \
	--disable-vesa \
	--disable-svga \
	${IFS:--enable-sdl} \
	--disable-kva \
	${IFS:--enable-aa} \
	${IFS:--enable-caca} \
	--disable-ggi \
	--disable-ggiwmh \
	--disable-direct3d \
	--disable-directx \
	--disable-dxr2 \
	--disable-dxr3 \
	--disable-ivtv \
	--disable-v4l2 \
	--disable-dvb \
	--disable-mga \
	--disable-xmga \
	--disable-xv \
	--disable-xvmc \
	--disable-vdpau \
	--disable-vm \
	--disable-xinerama \
	--disable-x11 \
	--disable-xshape \
	--disable-xss \
	--disable-fbdev \
	--disable-mlib \
	--disable-3dfx \
	--disable-tdfxfb \
	--disable-s3fb \
	--disable-wii \
	--disable-directfb \
	--disable-zr \
	--disable-bl \
	--disable-tdfxvid \
	--disable-xvr100 \
	--enable-tga \
	--enable-pnm \
	--enable-md5sum \
	--enable-yuv4mpeg \
	${IFS:--enable-corevideo} \
	--disable-quartz \
	--disable-alsa \
	--disable-ossaudio \
	--disable-arts \
	--disable-esd \
	--disable-pulse \
	--disable-jack \
	${IFS:--enable-openal} \
	--disable-nas \
	--disable-sgiaudio \
	--disable-sunaudio \
	--disable-kai \
	--disable-dart \
	--disable-win32waveout \
	--enable-coreaudio \
	--disable-select \
	--language=all \
	--disable-runtime-cpudetection \
	--disable-cross-compile \
	--disable-static \
	--extra-cflags="-I./libdvdread4 -I%p/include -MD" \
	--extra-libs="-liconv"
<<
## all these vars must be cleared to not confuse configure
## use --extra-cflags, etc in %c instead
NoSetCFLAGS: true
NoSetCPPFLAGS: true
NoSetCXXFLAGS: true
NoSetLDFLAGS: true
CompileScript: <<
	%{default_script}
	fink-package-precedence --depfile-ext='\.d' .
<<
InstallScript: <<
	make install DESTDIR=%d
	install -d -m 755 %i/share/applications
	install -d -m 755 %i/share/icons/hicolor/{16x16,22x22,24x24,32x32,48x48,256x256}/apps
	install -m 644 etc/mplayer.desktop %i/share/applications
	install -m 644 etc/mplayer16x16.png %i/share/icons/hicolor/16x16/apps/mplayer.png
	install -m 644 etc/mplayer22x22.png %i/share/icons/hicolor/22x22/apps/mplayer.png
	install -m 644 etc/mplayer24x24.png %i/share/icons/hicolor/24x24/apps/mplayer.png
	install -m 644 etc/mplayer32x32.png %i/share/icons/hicolor/32x32/apps/mplayer.png
	install -m 644 etc/mplayer48x48.png %i/share/icons/hicolor/48x48/apps/mplayer.png
	install -m 644 etc/mplayer256x256.png %i/share/icons/hicolor/256x256/apps/mplayer.png
	install -m 644 etc/codecs.conf %i/etc/%n/codecs.conf
	install -m 644 etc/input.conf %i/etc/%n/input.conf
	install -m 644 etc/example.conf %i/etc/%n/%n.conf
	install -d -m 755 %i/share/doc/%n
	cp -r DOCS/* %i/share/doc/%n
<<
DocFiles: AUTHORS Changelog Copyright LICENSE README
ConfFiles: <<
	%p/etc/%n/%n.conf
	%p/etc/%n/codecs.conf
	%p/etc/%n/input.conf
<<
Homepage: http://www.mplayerhq.hu/
DescDetail: <<
MPlayer is a movie player which runs on many systems (see the 
documentation). It plays most MPEG/VOB, AVI, Ogg/OGM, VIVO, ASF/WMA/WMV, 
QT/MOV/MP4, RealMedia, Matroska, NUT, NuppelVideo, FLI, YUV4MPEG, FILM, 
RoQ, PVA files, supported by many native, XAnim, and Win32 DLL codecs. You 
can watch VideoCD, SVCD, DVD, 3ivx, DivX 3/4/5 and even WMV movies.

MEncoder (MPlayer's Movie Encoder) is a simple movie encoder, designed to 
encode MPlayer-playable movies to other MPlayer-playable formats. It can 
encode with various codecs.
<<
DescPackaging: <<
o Upstream stopped having point releases after 1.0rc4, so are now forced to use SVN checkouts.  The following commands were used to create this release (via MacPorts):

svn export -r34835 --ignore-externals svn://svn.mplayerhq.hu/mplayer/trunk mplayer-svn34835
svn export -r1243 svn://svn.mplayerhq.hu/dvdnav/trunk/libdvdnav/src mplayer-svn34835/libdvdnav
svn export -r1243 svn://svn.mplayerhq.hu/dvdnav/trunk/libdvdread/src mplayer-svn34835/libdvdread4
git clone --depth 1000 git://git.videolan.org/ffmpeg.git mplayer-svn34835/ffmpeg
cd mplayer-svn34835/ffmpeg
git checkout -f d3d5e84f33496f7c6ed704d53998db97a69f02e8

o The ConfigureParams section was created by copying the contents of
$ ./configure --help
Many options are either explicitly disabled or enabled to ensure that the
declared dependencies are correct. Some things we want enabled, but they
must be left as autodetect so that configure will find the correct paths.
These are left in ConfigureParams but hidden by the shell using a hack.

This is all done so that mplayer builds consistently regardless of what other
fink packages are installed on the machine.  BuildDepends is used to enforce the
presence of external libraries.
<<
DescPort: <<
o Patch is used to find gsm.h (vs Ubuntu's gsm/gsm.h)
<<
